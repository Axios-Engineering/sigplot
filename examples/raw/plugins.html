<!DOCTYPE html>
<html>

<head>
    <#define TITLE|Plugins>
        <#include common-head.html>
            <#include common-css.html>
</head>

<body>
    <div class="container">
        <#include header.html>
            <div class="jumbotron">
                <div id="plot"></div>
                <div class="text-center">
                    Slider Position:
                    <span id="slidertagpos" class="label label-default">Pos:</span>
                    <span id="slidertagloc" class="label label-default">Loc:</span>
                </div>
                <div class="text-center">
                    Accordion Position:
                    <span id="accordiontagctr" class="label label-default">Center:</span>
                    <span id="accordiontagwidth" class="label label-default">Width:</span>
                </div>
            </div>
            <!-- /jumbotron -->
            <div id="content">
                <h2><#TITLE></h2>
                <p>
                    SigPlot can be extended to provide new capabilities using the plugin mechanism. Plugins can draw on the plot, they can add to the menu, and they can interact with mouse events. SigPlot comes with some standard plugins in the sigplot.plugins.js file, but
                    you many contribute others. To load the standard plugins:
                </p>
                <pre><code class="language-javascript">
&lt;script src="../sigplot.plugins.js"&gt;&lt;/script&gt;
	        </code></pre>
                <p>
                    Currently the standard plugins include:
                    <ul>
                        <li>Annotations - Draw text and images on the canvas</li>
                        <li>Slider - Horizontal or vertical line that can be scrolled on the canvas or dragged by the user</li>
                        <li>Accordion - Select a horizontal of vertical range between two sliders, useful for subband tuning</li>
                    </ul>
                </p>
                <p>
                    The annotation plugin behaves similar to the original SigPlot annotation mechanism. SigPlot annotations have two unique features:
                    <ul>
                        <li>Annotations can be images or videos (basically anything supported by canvas drawImage)</li>
                        <li>Annotations can be placed relative to the real coordinates</li>
                    </ul>
                </p>
                <p>
                    The slider plugin creates a horizontal or vertical bar that can be used to display the current position in the file. It also provides the ability for the user to "grab" the bar and slide it .. go ahead, give it a try.
                </p>
                <p>
                    A SigPlot plugin can be any JavaScript object, all methods are optional but here is a common plugin
                </p>
                <pre><code class="language-javascript">
MyPlugin = function(options) { // Contructor };

MyPlugin.prototype = {
    init: function(plot) { // Called when the plugin is added to a plot }
    dispose: function(plot) { // Called when removed from a plot }
    refresh: function(plot { // Called when the plugin needs to redraw }
    menu: // either an mx.menu compatible object or a function that returns one
};
	        </code></pre>
            </div>
    </div>
    <#include footer.html>
        <#include common-scripts.html>
            <script src="../sigplot/sigplot.plugins-minimized.js"></script>
            <script id="example-source">
                var plot;
                var annotations;
                var slider;
                var accordion;
                var boxes;

                var img = new Image(); // Create new img element
                img.src = '../images/Ax_Web_Logo_22.png';

                function initialize() {
                    try {
                        plot = new sigplot.Plot(document.getElementById('plot'), {
                            all: true,
                            expand: true
                        });
                    } catch (error) {
                        plot = undefined;
                        errorMessage = document.createElement("span");
                        errorMessage.innerHTML = "Your browser is not compatible with Web SigPlot...Sorry";
                        errorMessage.style.display = "block";
                        errorMessage.style.color = "black";
                        errorMessage.style.top = "50%";
                        errorMessage.style.width = "100%";
                        errorMessage.style.fontSize = "150%";
                        errorMessage.style.textAlign = "center";
                        document.getElementById('plot').appendChild(errorMessage);
                        console.log(error);
                        return;
                    }

                    annotations = new sigplot.AnnotationPlugin();
                    plot.add_plugin(annotations);

                    annotations.add_annotation({
                        x: 0,
                        y: 0,
                        value: img,
                        absolute_placement: true
                    });

                    annotations.add_annotation({
                        x: img.width + 50,
                        y: 20,
                        value: "Absolutely Placed Annotation",
                        absolute_placement: true
                    });

                    annotations.add_annotation({
                        x: 0.0,
                        y: 0.5,
                        value: "Relative Annotation @ (0.0,0.5)",
                    });

                    boxes = new sigplot.BoxesPlugin();
                    plot.add_plugin(boxes);

                    boxes.add_box({
                        x: 40,
                        y: 40,
                        w: 40,
                        h: 40,
                        absolute_placement: true
                    }); // Place at pixels instead of values
                    boxes.add_box({
                        x: -0.25,
                        y: -0.25,
                        w: 0.1,
                        h: 0.1,
                        text: "1"
                    });

                    // Demonstrate some cipped boxes
                    boxes.add_box({
                        x: -1.25,
                        y: 0,
                        w: 0.5,
                        h: 0.1,
                        text: "A Box"
                    });
                    boxes.add_box({
                        x: 0.75,
                        y: 0,
                        w: 0.5,
                        h: 0.1,
                        text: "A Box"
                    });


                    slider = new sigplot.SliderPlugin({
                        style: {
                            strokeStyle: "#FF2400"
                        }
                    });
                    plot.add_plugin(slider, 1); // below annotations (default is max zorder)
                    slider.addListener("slidertag", function(evt) {
                        document.getElementById('slidertagpos').innerHTML = evt.position;
                        document.getElementById('slidertagloc').innerHTML = evt.location;
                    });

                    accordion = new sigplot.AccordionPlugin({
                        draw_center_line: true,
                        shade_area: true,
                        draw_edge_lines: false,
                        direction: "horizontal",
                        center_line_style: {
                            strokeStyle: "#0000FF"
                        }
                    });
                    plot.add_plugin(accordion, 2);
                    accordion.addListener("accordiontag", function(evt) {
                        document.getElementById('accordiontagctr').innerHTML = evt.center;
                        document.getElementById('accordiontagwidth').innerHTML = evt.width;
                    });

                    accordion.set_center(-0.5);
                    accordion.set_width(0.25);


                    slider.set_position(0.0);
                    window.setInterval(function() {
                            var pos = slider.get_position() + 0.1;
                            if (pos >= 1) {
                                pos = (pos - 2);
                            }
                            slider.set_position(pos);
                        },
                        5000);

                }

                window.onload = function() {
                    initialize();
                }
            </script>
</body>

</html>