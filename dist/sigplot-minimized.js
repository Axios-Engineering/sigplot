/*

 File: tinycolor.js
 TinyColor v0.9.15+
 https://github.com/bgrins/TinyColor
 2013-02-24, Brian Grinstead, MIT License

 File: CanvasInput.js
  CanvasInput v1.0.10
  http://goldfirestudios.com/blog/108/CanvasInput-HTML5-Canvas-Text-Input

  (c) 2013, James Simpson of GoldFire Studios
  goldfirestudios.com

  (c) 2013, Axios, Inc.
  Modifications made by Axios, Inc.
  axiosengineering.com

  MIT License

 File: spin.js
 Copyright (c) 2011-2013 Felix Gnass
 Licensed under the MIT license

 File: sigplot.layer1d.js
 Copyright (c) 2012-2014, Michael Ihde, All rights reserved.
 Copyright (c) 2012-2014, Axios Inc., All rights reserved.

 This file is part of SigPlot.

 SigPlot is free software; you can redistribute it and/or modify it under the terms of the GNU Lesser
 General Public License as published by the Free Software Foundation; either version 3.0 of the License, or
 (at your option) any later version. This library is distributed in the hope that it will be useful, but
 WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
 PURPOSE. See the GNU Lesser General Public License for more details. You should have received a copy of the
 GNU Lesser General Public License along with SigPlot.

 File: sigplot.layer2d.js
 Copyright (c) 2012-2014, Michael Ihde, All rights reserved.
 Copyright (c) 2012-2014, Axios Inc., All rights reserved.

 This file is part of SigPlot.

 SigPlot is free software; you can redistribute it and/or modify it under the terms of the GNU Lesser
 General Public License as published by the Free Software Foundation; either version 3.0 of the License, or
 (at your option) any later version. This library is distributed in the hope that it will be useful, but
 WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
 PURPOSE. See the GNU Lesser General Public License for more details. You should have received a copy of the
 GNU Lesser General Public License along with SigPlot.

 File: license.js
 Copyright (c) 2012-2014, Michael Ihde, All rights reserved.
 Copyright (c) 2012-2014, Axios Inc., All rights reserved.

 This file is part of SigPlot.

 SigPlot is free software; you can redistribute it and/or modify it under the terms of the GNU Lesser 
 General Public License as published by the Free Software Foundation; either version 3.0 of the License, or 
 (at your option) any later version. This library is distributed in the hope that it will be useful, but 
 WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR 
 PURPOSE. See the GNU Lesser General Public License for more details. You should have received a copy of the 
 GNU Lesser General Public License along with SigPlot.

 Portions of SigPlot may utilize the following open-source software:

   loglevel.js          - MIT License; Copyright (c) 2014, Tim Perry
   typedarray.js        - MIT License; Copyright (c) 2010, Linden Research, Inc.
   tinycolor.js         - MIT License; Copyright (c) 2013, Brian Grinstead
   CanvasInput.js       - MIT License; Copyright (c) 2013, James Simpson of GoldFire Studios
   spin.js              - MIT License; Copyright (c) 2011-2013 Felix Gnass
   Array.remove         - MIT License; Copyright (c) 2007, John Resig
   Firefox subarray fix - Public Domain; Copyright (c) 2011, Ryan Berdeen

 File: typedarray.js
 $LicenseInfo:firstyear=2010&license=mit$

 Copyright (c) 2010, Linden Research, Inc.

 Permission is hereby granted, free of charge, to any person obtaining a copy
 of this software and associated documentation files (the "Software"), to deal
 in the Software without restriction, including without limitation the rights
 to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 copies of the Software, and to permit persons to whom the Software is
 furnished to do so, subject to the following conditions:

 The above copyright notice and this permission notice shall be included in
 all copies or substantial portions of the Software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 THE SOFTWARE.
 $/LicenseInfo$

 Copyright (c) 2013, Michael Ihde - Added big-endian/little-endian support

 File: common.js
 Copyright (c) 2012-2014, Michael Ihde, All rights reserved.
 Copyright (c) 2012-2014, Axios Inc., All rights reserved.

 This file is part of SigPlot.

 SigPlot is free software; you can redistribute it and/or modify it under the terms of the GNU Lesser
 General Public License as published by the Free Software Foundation; either version 3.0 of the License, or
 (at your option) any later version. This library is distributed in the hope that it will be useful, but
 WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
 PURPOSE. See the GNU Lesser General Public License for more details. You should have received a copy of the
 GNU Lesser General Public License along with SigPlot.


 File: bluefile.js
 Copyright (c) 2012-2014, Michael Ihde, All rights reserved.
 Copyright (c) 2012-2014, Axios Inc., All rights reserved.

 This file is part of SigPlot.

 SigPlot is free software; you can redistribute it and/or modify it under the terms of the GNU Lesser
 General Public License as published by the Free Software Foundation; either version 3.0 of the License, or
 (at your option) any later version. This library is distributed in the hope that it will be useful, but
 WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
 PURPOSE. See the GNU Lesser General Public License for more details. You should have received a copy of the
 GNU Lesser General Public License along with SigPlot.


 File: m.js
 Copyright (c) 2012-2014, Michael Ihde, All rights reserved.
 Copyright (c) 2012-2014, Axios Inc., All rights reserved.

 This file is part of SigPlot.

 SigPlot is free software; you can redistribute it and/or modify it under the terms of the GNU Lesser
 General Public License as published by the Free Software Foundation; either version 3.0 of the License, or
 (at your option) any later version. This library is distributed in the hope that it will be useful, but
 WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
 PURPOSE. See the GNU Lesser General Public License for more details. You should have received a copy of the
 GNU Lesser General Public License along with SigPlot.

 File: mx.js
 Copyright (c) 2012-2014, Michael Ihde, All rights reserved.
 Copyright (c) 2012-2014, Axios Inc., All rights reserved.

 This file is part of SigPlot.

 SigPlot is free software; you can redistribute it and/or modify it under the terms of the GNU Lesser
 General Public License as published by the Free Software Foundation; either version 3.0 of the License, or
 (at your option) any later version. This library is distributed in the hope that it will be useful, but
 WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
 PURPOSE. See the GNU Lesser General Public License for more details. You should have received a copy of the
 GNU Lesser General Public License along with SigPlot.

 File: sigplot.js
 Copyright (c) 2012-2014, Michael Ihde, All rights reserved.
 Copyright (c) 2012-2014, Axios Inc., All rights reserved.

 This file is part of SigPlot.

 SigPlot is free software; you can redistribute it and/or modify it under the terms of the GNU Lesser
 General Public License as published by the Free Software Foundation; either version 3.0 of the License, or
 (at your option) any later version. This library is distributed in the hope that it will be useful, but
 WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
 PURPOSE. See the GNU Lesser General Public License for more details. You should have received a copy of the
 GNU Lesser General Public License along with SigPlot.
*/
var ArrayBuffer,ArrayBufferView,Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,DataView;
(function(){function e(){document&&document.createTextNode("").splitText(1);throw new RangeError("INDEX_SIZE_ERR");}function a(d){if(Object.getOwnPropertyNames&&Object.defineProperty){var q=Object.getOwnPropertyNames(d),s;for(s=0;s<q.length;s+=1)Object.defineProperty(d,q[s],{value:d[q[s]],writable:!1,enumerable:!1,configurable:!1})}}function c(d){function q(s){Object.defineProperty(d,s,{get:function(){return d._getter(s)},set:function(q){d._setter(s,q)},enumerable:!0,configurable:!1})}if(Object.defineProperty){var s;
for(s=0;s<d.length;s+=1)q(s)}}function u(d){return[d&255]}function n(d){return y(d[0],8)}function f(d){return[d&255]}function g(d){return X(d[0],8)}function h(d){return[d>>8&255,d&255]}function l(d){return y(d[0]<<8|d[1],16)}function k(d){return[d>>8&255,d&255]}function w(d){return X(d[0]<<8|d[1],16)}function t(d){return[d>>24&255,d>>16&255,d>>8&255,d&255]}function G(d){return y(d[0]<<24|d[1]<<16|d[2]<<8|d[3],32)}function C(d){return[d>>24&255,d>>16&255,d>>8&255,d&255]}function B(d){return X(d[0]<<
24|d[1]<<16|d[2]<<8|d[3],32)}function A(d){var q=[];for(d=d.join("");d.length;)q.push(parseInt(d.substring(0,8),2)),d=d.substring(8);return q}function E(d){var q=[],s,v;for(s=d.length;s;s-=1)for(b=d[s-1],v=8;v;v-=1)q.push(b%2?1:0),b>>=1;q.reverse();return q}function H(d){return[d&255]}function Q(d){return y(d[0],8)}function S(d){return[d&255]}function T(d){return X(d[0],8)}function K(d){return[d&255,d>>8&255]}function W(d){return y(d[1]<<8|d[0],16)}function d(d){return[d&255,d>>8&255]}function v(d){return X(d[1]<<
8|d[0],16)}function x(d){return[d&255,d>>8&255,d>>16&255,d>>24&255]}function F(d){return y(d[3]<<24|d[2]<<16|d[1]<<8|d[0],32)}function P(d){return[d&255,d>>8&255,d>>16&255,d>>24&255]}function p(d){return X(d[3]<<24|d[2]<<16|d[1]<<8|d[0],32)}function Y(d){var q=[];for(d=d.join("");d.length;)q.push(parseInt(d.substring(d.length-8,d.length),2)),d=d.substring(0,d.length-8);return q}function U(d){var q=[],s,v;for(s=0;s<d.length;s++)for(b=d[s],v=8;v;v-=1)q.push(b%2?1:0),b>>=1;q.reverse();return q}function y(d,
q){var s=32-q;return d<<s>>s}function X(d,q){var s=32-q;return d<<s>>>s}function q(d,q,s){var v=(1<<q-1)-1,r,a,c;isNaN(d)?(a=(1<<v)-1,v=Math.pow(2,s-1),r=0):Infinity===d||-Infinity===d?(a=(1<<v)-1,v=0,r=0>d?1:0):0===d?(v=a=0,r=-Infinity===1/d?1:0):(r=0>d,d=Math.abs(d),d>=Math.pow(2,1-v)?(c=Math.min(Math.floor(Math.log(d)/Math.LN2),v),a=c+v,v=Math.round(d*Math.pow(2,s-c)-Math.pow(2,s))):(a=0,v=Math.round(d/Math.pow(2,1-v-s))));for(d=[];s;s-=1)d.push(v%2?1:0),v=Math.floor(v/2);for(s=q;s;s-=1)d.push(a%
2?1:0),a=Math.floor(a/2);d.push(r?1:0);d.reverse();return L(d)}function s(d,q,s){var v=[],r,a,v=$(d);r=v.join("");d=(1<<q-1)-1;v=parseInt(r.substring(0,1),2)?-1:1;a=parseInt(r.substring(1,1+q),2);r=parseInt(r.substring(1+q),2);return a===(1<<q)-1?0!==r?NaN:Infinity*v:0<a?v*Math.pow(2,a-d)*(1+r/Math.pow(2,s)):0!==r?v*Math.pow(2,-(d-1))*(r/Math.pow(2,s)):0>v?-0:0}function z(d){return s(d,11,52)}function r(d){return q(d,11,52)}function D(d){return s(d,8,23)}function M(d){return q(d,8,23)}var I={ToInt32:function(d){return d>>
0},ToUint32:function(d){return d>>>0}};Object.prototype.__defineGetter__&&!Object.defineProperty&&(Object.defineProperty=function(d,q,s){s.hasOwnProperty("get")&&d.__defineGetter__(q,s.get);s.hasOwnProperty("set")&&d.__defineSetter__(q,s.set)});var O=window.BIG_ENDIAN_ARRAYBUFFERS?u:H,N=window.BIG_ENDIAN_ARRAYBUFFERS?n:Q,aa=window.BIG_ENDIAN_ARRAYBUFFERS?f:S,ba=window.BIG_ENDIAN_ARRAYBUFFERS?g:T,R=window.BIG_ENDIAN_ARRAYBUFFERS?h:K,J=window.BIG_ENDIAN_ARRAYBUFFERS?l:W,ca=window.BIG_ENDIAN_ARRAYBUFFERS?
k:d,da=window.BIG_ENDIAN_ARRAYBUFFERS?w:v,ea=window.BIG_ENDIAN_ARRAYBUFFERS?t:x,fa=window.BIG_ENDIAN_ARRAYBUFFERS?G:F,ga=window.BIG_ENDIAN_ARRAYBUFFERS?C:P,ha=window.BIG_ENDIAN_ARRAYBUFFERS?B:p,L=window.BIG_ENDIAN_ARRAYBUFFERS?A:Y,$=window.BIG_ENDIAN_ARRAYBUFFERS?E:U;ArrayBuffer||function(){function d(q,s,v){var r;r=function(d,q,s){var v,x,z;if(arguments.length&&"number"!==typeof arguments[0])if("object"===typeof arguments[0]&&arguments[0].constructor===r)for(v=arguments[0],this.length=v.length,this.byteLength=
this.length*this.BYTES_PER_ELEMENT,this.buffer=new ArrayBuffer(this.byteLength),x=this.byteOffset=0;x<this.length;x+=1)this._setter(x,v._getter(x));else if("object"!==typeof arguments[0]||arguments[0]instanceof ArrayBuffer)if("object"===typeof arguments[0]&&arguments[0]instanceof ArrayBuffer){this.buffer=d;this.byteOffset=I.ToUint32(q);this.byteOffset>this.buffer.byteLength&&e();if(this.byteOffset%this.BYTES_PER_ELEMENT)throw new RangeError("ArrayBuffer length minus the byteOffset is not a multiple of the element size.");
3>arguments.length?(this.byteLength=this.buffer.byteLength-this.byteOffset,this.byteLength%this.BYTES_PER_ELEMENT&&e(),this.length=this.byteLength/this.BYTES_PER_ELEMENT):(this.length=I.ToUint32(s),this.byteLength=this.length*this.BYTES_PER_ELEMENT);this.byteOffset+this.byteLength>this.buffer.byteLength&&e()}else throw new TypeError("Unexpected argument type(s)");else for(v=arguments[0],this.length=I.ToUint32(v.length),this.byteLength=this.length*this.BYTES_PER_ELEMENT,this.buffer=new ArrayBuffer(this.byteLength),
x=this.byteOffset=0;x<this.length;x+=1)z=v[x],this._setter(x,Number(z));else{this.length=I.ToInt32(arguments[0]);if(0>s)throw new RangeError("ArrayBufferView size is not a small enough positive integer.");this.byteLength=this.length*this.BYTES_PER_ELEMENT;this.buffer=new ArrayBuffer(this.byteLength);this.byteOffset=0}this.constructor=r;a(this);c(this)};r.prototype=new ArrayBufferView;r.prototype.BYTES_PER_ELEMENT=q;r.prototype.emulated=!0;r.prototype._pack=s;r.prototype._unpack=v;r.BYTES_PER_ELEMENT=
q;r.prototype._getter=function(d){if(1>arguments.length)throw new SyntaxError("Not enough arguments");d=I.ToUint32(d);if(!(d>=this.length)){var q=[],s,v;s=0;for(v=this.byteOffset+d*this.BYTES_PER_ELEMENT;s<this.BYTES_PER_ELEMENT;s+=1,v+=1)q.push(this.buffer._bytes[v]);return this._unpack(q)}};r.prototype.get=r.prototype._getter;r.prototype._setter=function(d,q){if(2>arguments.length)throw new SyntaxError("Not enough arguments");d=I.ToUint32(d);if(!(d>=this.length)){var s=this._pack(q),v,r;v=0;for(r=
this.byteOffset+d*this.BYTES_PER_ELEMENT;v<this.BYTES_PER_ELEMENT;v+=1,r+=1)this.buffer._bytes[r]=s[v]}};r.prototype.set=function(d,q){if(1>arguments.length)throw new SyntaxError("Not enough arguments");var s,v,r,a,c,x;if("object"===typeof arguments[0]&&arguments[0].constructor===this.constructor)if(s=arguments[0],v=I.ToUint32(arguments[1]),v+s.length>this.length&&e(),x=this.byteOffset+v*this.BYTES_PER_ELEMENT,v=s.length*this.BYTES_PER_ELEMENT,s.buffer===this.buffer){r=[];a=0;for(c=s.byteOffset;a<
v;a+=1,c+=1)r[a]=s.buffer._bytes[c];for(a=0;a<v;a+=1,x+=1)this.buffer._bytes[x]=r[a]}else for(a=0,c=s.byteOffset;a<v;a+=1,c+=1,x+=1)this.buffer._bytes[x]=s.buffer._bytes[c];else if("object"===typeof arguments[0]&&"undefined"!==typeof arguments[0].length)for(s=arguments[0],r=I.ToUint32(s.length),v=I.ToUint32(arguments[1]),v+r>this.length&&e(),a=0;a<r;a+=1)c=s[a],this._setter(v+a,Number(c));else throw new TypeError("Unexpected argument type(s)");};r.prototype.subarray=function(d,q){d=I.ToInt32(d);q=
I.ToInt32(q);1>arguments.length&&(d=0);2>arguments.length&&(q=this.length);0>d&&(d=this.length+d);0>q&&(q=this.length+q);var s=this.length;d=0>d?0:d>s?s:d;s=this.length;s=(0>q?0:q>s?s:q)-d;0>s&&(s=0);return new this.constructor(this.buffer,d*this.BYTES_PER_ELEMENT,s)};return r}ArrayBuffer=function(d){d=I.ToInt32(d);if(0>d)throw new RangeError("ArrayBuffer size is not a small enough positive integer.");this.byteLength=d;this._bytes=[];this._bytes.length=d;for(d=0;d<this.byteLength;d+=1)this._bytes[d]=
0;a(this)};ArrayBuffer.isNative=!1;ArrayBufferView=function(){};Int8Array=Int8Array||d(1,O,N);Uint8Array=Uint8Array||d(1,aa,ba);Int16Array=Int16Array||d(2,R,J);Uint16Array=Uint16Array||d(2,ca,da);Int32Array=Int32Array||d(4,ea,fa);Uint32Array=Uint32Array||d(4,ga,ha);Float32Array=Float32Array||d(4,M,D);Float64Array=Float64Array||d(8,r,z)}();DataView||function(){function d(q,s){return"function"===typeof q.get?q.get(s):q[s]}function q(s){return function(q,r){q=I.ToUint32(q);q+s.BYTES_PER_ELEMENT>this.byteLength&&
e();q+=this.byteOffset;var a=new Uint8Array(this.buffer,q,s.BYTES_PER_ELEMENT),c=[],x;for(x=0;x<s.BYTES_PER_ELEMENT;x+=1)c.push(d(a,x));Boolean(r)===Boolean(v)&&c.reverse();return d(new s((new Uint8Array(c)).buffer),0)}}function s(q){return function(s,r,a){s=I.ToUint32(s);s+q.BYTES_PER_ELEMENT>this.byteLength&&e();r=new q([r]);r=new Uint8Array(r.buffer);var c=[],x;for(x=0;x<q.BYTES_PER_ELEMENT;x+=1)c.push(d(r,x));Boolean(a)===Boolean(v)&&c.reverse();(new Uint8Array(this.buffer,s,q.BYTES_PER_ELEMENT)).set(c)}}
var v=function(){var q=new Uint16Array([4660]),q=new Uint8Array(q.buffer);return 18===d(q,0)}();DataView=function(d,q,s){if(!("object"===typeof d&&d instanceof ArrayBuffer))throw new TypeError("TypeError");this.buffer=d;this.byteOffset=I.ToUint32(q);this.byteOffset>this.buffer.byteLength&&e();this.byteLength=3>arguments.length?this.buffer.byteLength-this.byteOffset:I.ToUint32(s);this.byteOffset+this.byteLength>this.buffer.byteLength&&e();a(this)};ArrayBufferView&&(DataView.prototype=new ArrayBufferView);
DataView.prototype.getUint8=q(Uint8Array);DataView.prototype.getInt8=q(Int8Array);DataView.prototype.getUint16=q(Uint16Array);DataView.prototype.getInt16=q(Int16Array);DataView.prototype.getUint32=q(Uint32Array);DataView.prototype.getInt32=q(Int32Array);DataView.prototype.getFloat32=q(Float32Array);DataView.prototype.getFloat64=q(Float64Array);DataView.prototype.setUint8=s(Uint8Array);DataView.prototype.setInt8=s(Int8Array);DataView.prototype.setUint16=s(Uint16Array);DataView.prototype.setInt16=s(Int16Array);
DataView.prototype.setUint32=s(Uint32Array);DataView.prototype.setInt32=s(Int32Array);DataView.prototype.setFloat32=s(Float32Array);DataView.prototype.setFloat64=s(Float64Array)}()})();window.ArrayBuffer&&!ArrayBuffer.prototype.slice&&(ArrayBuffer.prototype.slice=function(e,a){var c=new Uint8Array(this);void 0===a&&(a=c.length);for(var u=new ArrayBuffer(a-e),n=new Uint8Array(u),f=0;f<n.length;f++)n[f]=c[f+e];return u});
Array.prototype.remove=function(e,a){var c=this.slice((a||e)+1||this.length);this.length=0>e?this.length+e:e;return this.push.apply(this,c)};window.requestAnimFrame=function(e){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){return window.setTimeout(a,1E3/60)}}();
window.cancelAnimFrame=function(e){return window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCanelAnimationFrame||function(a){window.clearTimeout(a)}}();function dashOn(e,a,c){return e.setLineDash?(e.setLineDash([a,c]),!0):void 0!==e.mozDash?(e.mozDash=[a,c],!0):e.webkitLineDash&&0===e.webkitLineDash.length?(e.webkitLineDash=[a,c],!0):!1}
function dashOff(e){e.setLineDash?e.setLineDash([]):e.mozDash?e.mozDash=null:e.webkitLineDash&&(e.webkitLineDash=[])}function getKeyCode(e){e=window.event||e;return e=e.charCode||e.keyCode}function setKeypressHandler(e){window.addEventListener?window.addEventListener("keypress",e,!1):window.attachEvent&&window.attachEvent("onkeypress",e)}Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)});
window.Float64Array||(window.Float64Array=function(){return window.Float64Array||function(e,a,c){if(!(e instanceof ArrayBuffer))throw"Invalid type";var u=new DataView(e),n=[];e=(e.byteLength-a)/8;n.length=void 0===c?e:Math.min(c,e);for(c=0;c<n.length;c++)n[c]=u.getFloat64(8*c+a,!0);n.subarray=function(a,c){return n.slice(a,c)};return n}}());
(function(){var e=function(){};window.console||(window.console={log:e,info:e,warn:e,debug:e,error:e});if((new Int8Array([0,1,0])).subarray(1).subarray(1)[0]){var a=function(a,e){0===arguments.length?(a=0,e=this.length):(0>a&&(a+=this.length),a=Math.max(0,Math.min(this.length,a)),1===arguments.length?e=this.length:(0>e&&(e+=this.length),e=Math.max(a,Math.min(this.length,e))));return new this.constructor(this.buffer,this.byteOffset+a*this.BYTES_PER_ELEMENT,e-a)};[Int8Array,Uint8Array,Int16Array,Uint16Array,
Int32Array,Uint32Array,Float32Array,Float64Array].forEach(function(c){c.prototype.subarray=a})}})();
(function(e,a){function c(a,c,l,k){a[n](u+c,"wheel"===f?l:function(a){!a&&(a=e.event);var c={originalEvent:a,target:a.target||a.srcElement,type:"wheel",deltaMode:"MozMousePixelScroll"===a.type?0:1,deltaX:0,delatZ:0,preventDefault:function(){a.preventDefault?a.preventDefault():a.returnValue=!1}};"mousewheel"===f?(c.deltaY=-0.025*a.wheelDelta,a.wheelDeltaX&&(c.deltaX=-0.025*a.wheelDeltaX)):c.deltaY=a.detail;return l(c)},k||!1)}var u="",n,f;e.addEventListener?n="addEventListener":(n="attachEvent",u=
"on");f="onwheel"in a.createElement("div")?"wheel":void 0!==a.onmousewheel?"mousewheel":"DOMMouseScroll";e.addWheelListener=function(a,e,l){c(a,f,e,l);"DOMMouseScroll"===f&&c(a,"MozMousePixelScroll",e,l)}})(window,document);function update(e,a){for(var c in a){var u=a[c];"object"===typeof u?update(e[c],u):e[c]=u}return e}
(function(e){function a(a){a=new Uint8Array(a);if(G)return String.fromCharCode.apply(null,a);for(var c="",e=0;e<a.length;e++)c+=String.fromCharCode(a[e]);return c}function c(a){return 0<=a&&31>a?1<<a:c[a]||(c[a]=Math.pow(2,a))}function u(c,g){this.options={ext_header_type:"dict"};e.update(this.options,g);this.file_name=this.file=null;this.offset=0;this.buf=c;if(null!=this.buf){var f=new DataView(this.buf);this.version=a(this.buf.slice(0,4));this.headrep=a(this.buf.slice(4,8));this.datarep=a(this.buf.slice(8,
12));var h="EEEI"===this.headrep,l="EEEI"===this.datarep;this.ext_start=f.getInt32(24,h);this.ext_size=f.getInt32(28,h);this.type=f.getUint32(48,h);this["class"]=this.type/1E3;this.format=a(this.buf.slice(52,54));this.timecode=f.getFloat64(56,h);1===this["class"]?(this.xstart=f.getFloat64(256,h),this.xdelta=f.getFloat64(264,h),this.xunits=f.getInt32(272,h),this.yunits=f.getInt32(296,h),this.subsize=1):2===this["class"]&&(this.xstart=f.getFloat64(256,h),this.xdelta=f.getFloat64(264,h),this.xunits=
f.getInt32(272,h),this.subsize=f.getInt32(276,h),this.ystart=f.getFloat64(280,h),this.ydelta=f.getFloat64(288,h),this.yunits=f.getInt32(296,h));this.data_start=f.getFloat64(32,h);this.data_size=f.getFloat64(40,h);var f=this.data_start,k=this.data_start+this.data_size;this.ext_size&&(this.ext_header=this.unpack_keywords(this.buf,this.ext_size,512*this.ext_start,h));this.setData(this.buf,f,k,l)}}function n(a){var c=document.createElement("a");c.href=a;for(var e=c.protocol.replace(":",""),f=c.hostname,
g=c.port,h=c.search,l={},k=c.search.replace(/^\?/,"").split("&"),d=k.length,v=0,x;v<d;v++)k[v]&&(x=k[v].split("="),l[x[0]]=x[1]);return{source:a,protocol:e,host:f,port:g,query:h,params:l,file:(c.pathname.match(/\/([^\/?#]+)$/i)||[null,""])[1],hash:c.hash.replace("#",""),path:c.pathname.replace(/^([^\/])/,"/$1"),relative:(c.href.match(/tps?:\/\/[^\/]+(.+)/)||[null,""])[1],segments:c.pathname.replace(/^\//,"").split("/")}}function f(a,c,e){e=e||1024;var f=0,g=new ArrayBuffer(a.length),h=new Uint8Array(g),
l=function(){for(var k=f+e;f<k;f++)h[f]=a.charCodeAt(f)&255;f>=a.length?c(g):setTimeout(l,0)};setTimeout(l,0)}function g(a){this.options=a}navigator.userAgent.match(/(iPad|iPhone|iPod)/i);var h=function(){var a=new ArrayBuffer(4),c=new Uint32Array(a),a=new Uint8Array(a);c[0]=3735928559;if(239===a[0])return"LE";if(222===a[0])return"BE";throw Error("unknown endianness");}(),l={S:1,C:2,V:3,Q:4,M:9,X:10,T:16,U:1,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9},k={P:0.125,A:1,O:1,B:1,I:2,L:4,X:8,F:4,D:8},w={P:null,
A:null,O:Uint8Array,B:Int8Array,I:Int16Array,L:Int32Array,X:null,F:Float32Array,D:Float64Array},t={P:null,A:null,O:"getUint8",B:"getInt8",I:"getInt16",L:"getInt32",X:function(a,e,f){var g,h,l=Math.pow(2,53);f?(g=4,h=0):(g=0,h=4);g=a.getInt32(e+g,f);a=a.getInt32(e+h,f)+c(32)*g;return a>=l?(window.console.info("Int is bigger than JS can represent."),Infinity):a},F:"getFloat32",D:"getFloat64"},G=!0;try{var C=new Uint8Array(new ArrayBuffer(4));C[0]=66;C[1]=76;C[2]=85;C[3]=69;"BLUE"!==String.fromCharCode.apply(null,
C)&&(G=!1)}catch(B){G=!1}u.prototype={setData:function(a,c,e,f){1===this["class"]?(this.spa=l[this.format[0]],this.bps=k[this.format[1]],this.bpa=this.spa*this.bps,this.ape=1,this.bpe=this.ape*this.bpa):2===this["class"]&&(this.spa=l[this.format[0]],this.bps=k[this.format[1]],this.bpa=this.spa*this.bps,this.ape=this.subsize,this.bpe=this.ape*this.bpa);void 0===f&&(f="LE"===h);if("LE"===h&&!f)throw"Not supported "+h+" "+f;if("BE"===h&&this.littleEndianData)throw"Not supported "+h+" "+f;a?(this.dview=
c&&e?this.createArray(a,c,(e-c)/this.bps):this.createArray(a),this.size=this.dview.length/(this.spa*this.ape)):this.dview=this.createArray(null,null,this.size)},unpack_keywords:function(c,e,f,g){var h,l,k,n,d,v,x=[],F={},P={},p=0;c=c.slice(f,c.length);var Y=new DataView(c);for(c=a(c);p<e;)v=p+8,f=Y.getUint32(p,g),h=Y.getInt16(p+4,g),l=Y.getInt8(p+6,g),k=c.slice(p+7,p+8),h=f-h,d=v+h,l=c.slice(d,d+l),"A"===k?n=c.slice(v,v+h):t[k]?n="string"===typeof t[k]?Y[t[k]](v,g):t[k](Y,v,g):window.console.info("Unsupported keyword format "+
k+" for tag "+l),"undefined"===typeof F[l]?F[l]=1:(F[l]++,l=""+l+F[l]),P[l]=n,x.push({tag:l,value:n}),p+=f;c=["dict","json",{},"XMTable","JSON","DICT"];for(var U in c)if(c[U]===this.options.ext_header_type)return P;return x},createArray:function(a,c,e){var f=w[this.format[1]];if(void 0===f)throw"unknown format "+this.format[1];void 0===c&&(c=0);void 0===e&&(e=a.length||a.byteLength/k[this.format[1]]);return a?new f(a,c,e):new f(e)}};g.prototype={readheader:function(a,c){var e=this,f=new FileReader,
g=a.webkitSlice(0,512);f.onloadend=function(a){return function(g){g.target.error?c(null):(g=new u(f.result,e.options),g.file=a,c(g))}}(a);f.readAsArrayBuffer(g)},read:function(a,c){var e=this,f=new FileReader;f.onloadend=function(a){return function(g){g.target.error?c(null):(g=new u(f.result,e.options),g.file=a,g.file_name=a.name,c(g))}}(a);f.readAsArrayBuffer(a)},read_http:function(a,c){var e=this,g=new XMLHttpRequest;g.open("GET",a,!0);g.responseType="arraybuffer";g.overrideMimeType("text/plain; charset=x-user-defined");
g.onload=function(h){if(4!==g.readyState||200!==g.status&&0!==g.status)c(null);else if(h=null,g.response){h=g.response;h=new u(h,e.options);n(a);var l=n(a);h.file_name=l.file;c(h)}else g.responseText&&f(g.responseText,function(f){f=new u(f,e.options);n(a);var g=n(a);f.file_name=g.file;c(f)})};g.onerror=function(a){c(null)};g.send(null)}};e.BlueHeader=e.BlueHeader||u;e.BlueFileReader=e.BlueFileReader||g})(this);
(function(e){function a(e,k){e=e?e:"";k=k||{};if("object"==typeof e&&e.hasOwnProperty("_tc_id"))return e;var d=c(e),v=d.r,x=d.g,F=d.b,P=d.a,p=B(100*P)/100,Y=k.format||d.format;1>v&&(v=B(v));1>x&&(x=B(x));1>F&&(F=B(F));return{ok:d.ok,format:Y,_tc_id:G++,alpha:P,toHsv:function(){var d=f(v,x,F);return{h:360*d.h,s:d.s,v:d.v,a:P}},toHsvString:function(){var d=f(v,x,F),a=B(360*d.h),c=B(100*d.s),d=B(100*d.v);return 1==P?"hsv("+a+", "+c+"%, "+d+"%)":"hsva("+a+", "+c+"%, "+d+"%, "+p+")"},toHsl:function(){var d=
u(v,x,F);return{h:360*d.h,s:d.s,l:d.l,a:P}},toHslString:function(){var d=u(v,x,F),a=B(360*d.h),c=B(100*d.s),d=B(100*d.l);return 1==P?"hsl("+a+", "+c+"%, "+d+"%)":"hsla("+a+", "+c+"%, "+d+"%, "+p+")"},toHex:function(d){return g(v,x,F,d)},toHexString:function(d){return"#"+g(v,x,F,d)},toRgb:function(){return{r:B(v),g:B(x),b:B(F),a:P}},toRgbString:function(){return 1==P?"rgb("+B(v)+", "+B(x)+", "+B(F)+")":"rgba("+B(v)+", "+B(x)+", "+B(F)+", "+p+")"},toPercentageRgb:function(){return{r:B(100*h(v,255))+
"%",g:B(100*h(x,255))+"%",b:B(100*h(F,255))+"%",a:P}},toPercentageRgbString:function(){return 1==P?"rgb("+B(100*h(v,255))+"%, "+B(100*h(x,255))+"%, "+B(100*h(F,255))+"%)":"rgba("+B(100*h(v,255))+"%, "+B(100*h(x,255))+"%, "+B(100*h(F,255))+"%, "+p+")"},toName:function(){return 0===P?"transparent":S[g(v,x,F,!0)]||!1},toFilter:function(d){var c=g(v,x,F),e=c,q=Math.round(255*parseFloat(P)).toString(16),s=q,z=k&&k.gradientType?"GradientType = 1, ":"";d&&(d=a(d),e=d.toHex(),s=Math.round(255*parseFloat(d.alpha)).toString(16));
return"progid:DXImageTransform.Microsoft.gradient("+z+"startColorstr=#"+l(q)+c+",endColorstr=#"+l(s)+e+")"},toString:function(d){var v=!!d;d=d||this.format;var a=!1,v=!v&&1>P&&0<P&&("hex"===d||"hex6"===d||"hex3"===d||"name"===d);"rgb"===d&&(a=this.toRgbString());"prgb"===d&&(a=this.toPercentageRgbString());if("hex"===d||"hex6"===d)a=this.toHexString();"hex3"===d&&(a=this.toHexString(!0));"name"===d&&(a=this.toName());"hsl"===d&&(a=this.toHslString());"hsv"===d&&(a=this.toHsvString());return v?this.toRgbString():
a||this.toHexString()}}}function c(a){var c={r:0,g:0,b:0},d=1,v=!1,x=!1;if("string"==typeof a)a:{a=a.replace(w,"").replace(t,"").toLowerCase();var e=!1;if(Q[a])a=Q[a],e=!0;else if("transparent"==a){a={r:0,g:0,b:0,a:0,format:"name"};break a}var f;a=(f=T.rgb.exec(a))?{r:f[1],g:f[2],b:f[3]}:(f=T.rgba.exec(a))?{r:f[1],g:f[2],b:f[3],a:f[4]}:(f=T.hsl.exec(a))?{h:f[1],s:f[2],l:f[3]}:(f=T.hsla.exec(a))?{h:f[1],s:f[2],l:f[3],a:f[4]}:(f=T.hsv.exec(a))?{h:f[1],s:f[2],v:f[3]}:(f=T.hex6.exec(a))?{r:parseInt(f[1],
16),g:parseInt(f[2],16),b:parseInt(f[3],16),format:e?"name":"hex"}:(f=T.hex3.exec(a))?{r:parseInt(f[1]+""+f[1],16),g:parseInt(f[2]+""+f[2],16),b:parseInt(f[3]+""+f[3],16),format:e?"name":"hex"}:!1}if("object"==typeof a){if(a.hasOwnProperty("r")&&a.hasOwnProperty("g")&&a.hasOwnProperty("b"))c=a.g,v=a.b,c={r:255*h(a.r,255),g:255*h(c,255),b:255*h(v,255)},v=!0,x="%"===String(a.r).substr(-1)?"prgb":"rgb";else if(a.hasOwnProperty("h")&&a.hasOwnProperty("s")&&a.hasOwnProperty("v")){a.s=k(a.s);a.v=k(a.v);
var x=a.h,e=a.s,c=a.v,x=6*h(x,360),e=h(e,100),c=h(c,100),v=C.floor(x),g=x-v,x=c*(1-e);f=c*(1-g*e);e=c*(1-(1-g)*e);v%=6;c={r:255*[c,f,x,x,e,c][v],g:255*[e,c,c,f,x,x][v],b:255*[x,x,e,c,c,f][v]};v=!0;x="hsv"}else a.hasOwnProperty("h")&&a.hasOwnProperty("s")&&a.hasOwnProperty("l")&&(a.s=k(a.s),a.l=k(a.l),c=n(a.h,a.s,a.l),v=!0,x="hsl");a.hasOwnProperty("a")&&(d=a.a)}d=parseFloat(d);if(isNaN(d)||0>d||1<d)d=1;return{ok:v,format:a.format||x,r:A(255,E(c.r,0)),g:A(255,E(c.g,0)),b:A(255,E(c.b,0)),a:d}}function u(a,
c,d){a=h(a,255);c=h(c,255);d=h(d,255);var v=E(a,c,d),x=A(a,c,d),e,f=(v+x)/2;if(v==x)e=x=0;else{var g=v-x,x=0.5<f?g/(2-v-x):g/(v+x);switch(v){case a:e=(c-d)/g+(c<d?6:0);break;case c:e=(d-a)/g+2;break;case d:e=(a-c)/g+4}e/=6}return{h:e,s:x,l:f}}function n(a,c,d){function v(d,v,a){0>a&&(a+=1);1<a&&(a-=1);return a<1/6?d+6*(v-d)*a:0.5>a?v:a<2/3?d+(v-d)*(2/3-a)*6:d}a=h(a,360);c=h(c,100);d=h(d,100);if(0===c)d=c=a=d;else{var x=0.5>d?d*(1+c):d+c-d*c,e=2*d-x;d=v(e,x,a+1/3);c=v(e,x,a);a=v(e,x,a-1/3)}return{r:255*
d,g:255*c,b:255*a}}function f(a,c,d){a=h(a,255);c=h(c,255);d=h(d,255);var v=E(a,c,d),x=A(a,c,d),e,f=v-x;if(v==x)e=0;else{switch(v){case a:e=(c-d)/f+(c<d?6:0);break;case c:e=(d-a)/f+2;break;case d:e=(a-c)/f+4}e/=6}return{h:e,s:0===v?0:f/v,v:v}}function g(a,c,d,v){a=[l(B(a).toString(16)),l(B(c).toString(16)),l(B(d).toString(16))];return v&&a[0].charAt(0)==a[0].charAt(1)&&a[1].charAt(0)==a[1].charAt(1)&&a[2].charAt(0)==a[2].charAt(1)?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0):a.join("")}function h(a,
c){var d=a;"string"==typeof d&&-1!=d.indexOf(".")&&1===parseFloat(d)&&(a="100%");d="string"===typeof a&&-1!=a.indexOf("%");a=A(c,E(0,parseFloat(a)));d&&(a=parseInt(a*c,10)/100);return 1E-6>C.abs(a-c)?1:a%c/parseFloat(c)}function l(a){return 1==a.length?"0"+a:""+a}function k(a){1>=a&&(a=100*a+"%");return a}var w=/^[\s,#]+/,t=/\s+$/,G=0,C=Math,B=C.round,A=C.min,E=C.max,H=C.random;a.fromRatio=function(c,e){if("object"==typeof c){var d={},v;for(v in c)c.hasOwnProperty(v)&&(d[v]="a"===v?c[v]:k(c[v]));
c=d}return a(c,e)};a.equals=function(c,e){return c&&e?a(c).toRgbString()==a(e).toRgbString():!1};a.random=function(){return a.fromRatio({r:H(),g:H(),b:H()})};a.desaturate=function(c,e){e=0===e?0:e||10;var d=a(c).toHsl();d.s-=e/100;d.s=A(1,E(0,d.s));return a(d)};a.saturate=function(c,e){e=0===e?0:e||10;var d=a(c).toHsl();d.s+=e/100;d.s=A(1,E(0,d.s));return a(d)};a.greyscale=function(c){return a.desaturate(c,100)};a.lighten=function(c,e){e=0===e?0:e||10;var d=a(c).toHsl();d.l+=e/100;d.l=A(1,E(0,d.l));
return a(d)};a.darken=function(c,e){e=0===e?0:e||10;var d=a(c).toHsl();d.l-=e/100;d.l=A(1,E(0,d.l));return a(d)};a.complement=function(c){c=a(c).toHsl();c.h=(c.h+180)%360;return a(c)};a.triad=function(c){var e=a(c).toHsl(),d=e.h;return[a(c),a({h:(d+120)%360,s:e.s,l:e.l}),a({h:(d+240)%360,s:e.s,l:e.l})]};a.tetrad=function(c){var e=a(c).toHsl(),d=e.h;return[a(c),a({h:(d+90)%360,s:e.s,l:e.l}),a({h:(d+180)%360,s:e.s,l:e.l}),a({h:(d+270)%360,s:e.s,l:e.l})]};a.splitcomplement=function(c){var e=a(c).toHsl(),
d=e.h;return[a(c),a({h:(d+72)%360,s:e.s,l:e.l}),a({h:(d+216)%360,s:e.s,l:e.l})]};a.analogous=function(c,e,d){e=e||6;d=d||30;var v=a(c).toHsl();d=360/d;c=[a(c)];for(v.h=(v.h-(d*e>>1)+720)%360;--e;)v.h=(v.h+d)%360,c.push(a(v));return c};a.monochromatic=function(c,e){e=e||6;for(var d=a(c).toHsv(),v=d.h,x=d.s,d=d.v,f=[],g=1/e;e--;)f.push(a({h:v,s:x,v:d})),d=(d+g)%1;return f};a.readability=function(c,e){var d=a(c).toRgb(),v=a(e).toRgb(),x=(299*d.r+587*d.g+114*d.b)/1E3,f=(299*v.r+587*v.g+114*v.b)/1E3,d=
Math.max(d.r,v.r)-Math.min(d.r,v.r)+Math.max(d.g,v.g)-Math.min(d.g,v.g)+Math.max(d.b,v.b)-Math.min(d.b,v.b);return{brightness:Math.abs(x-f),color:d}};a.readable=function(c,e){var d=a.readability(c,e);return 125<d.brightness&&500<d.color};a.mostReadable=function(c,e){for(var d=null,v=0,x=!1,f=0;f<e.length;f++){var g=a.readability(c,e[f]),p=125<g.brightness&&500<g.color,g=g.brightness/125*3+g.color/500;if(p&&!x||p&&x&&g>v||!p&&!x&&g>v)x=p,v=g,d=a(e[f])}return d};var Q=a.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",
aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",
darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",
grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",
lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",
palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",
tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},S=a.hexNames=function(a){var c={},d;for(d in a)a.hasOwnProperty(d)&&(c[a[d]]=d);return c}(Q),T={rgb:RegExp("rgb[\\s|\\(]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))\\s*\\)?"),rgba:RegExp("rgba[\\s|\\(]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))\\s*\\)?"),
hsl:RegExp("hsl[\\s|\\(]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))\\s*\\)?"),hsla:RegExp("hsla[\\s|\\(]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))\\s*\\)?"),hsv:RegExp("hsv[\\s|\\(]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))\\s*\\)?"),
hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};e.tinycolor=a})(this);
(function(){var e=[];(window.CanvasInput=function(a){var c=this;a=a?a:{};c._canvas=a.canvas||null;c._ctx=c._canvas?c._canvas.getContext("2d"):null;c._x=a.x||0;c._y=a.y||0;c._extraX=a.extraX||0;c._extraY=a.extraY||0;c._fontSize=a.fontSize||14;c._fontFamily=a.fontFamily||"Arial";c._fontColor=a.fontColor||"#000";c._placeHolderColor=a.placeHolderColor||"#bfbebd";c._fontWeight=a.fontWeight||"normal";c._fontStyle=a.fontStyle||"normal";c._readonly=a.readonly||!1;c._maxlength=a.maxlength||null;c._width=a.width||
150;c._height=a.height||c._fontSize;c._padding=0<=a.padding?a.padding:5;c._borderWidth=0<=a.borderWidth?a.borderWidth:1;c._borderColor=a.borderColor||"#959595";c._borderRadius=0<=a.borderRadius?a.borderRadius:3;c._backgroundImage=a.backgroundImage||"";c._boxShadow=a.boxShadow||"1px 1px 0px rgba(255, 255, 255, 1)";c._innerShadow=a.innerShadow||"0px 0px 4px rgba(0, 0, 0, 0.4)";c._selectionColor=a.selectionColor||"rgba(179, 212, 253, 0.8)";c._placeHolder=a.placeHolder||"";c._value=a.value||c._placeHolder;
c._onsubmit=a.onsubmit||function(){};c._onkeydown=a.onkeydown||function(){};c._onkeyup=a.onkeyup||function(){};c._onfocus=a.onfocus||function(){};c._onblur=a.onblur||function(){};c._cursor=!1;c._cursorPos=0;c._hasFocus=!1;c._selection=[0,0];c._wasOver=!1;c._renderOnReturn=void 0!==a.renderOnReturn?a.renderOnReturn:!0;c._disableBlur=a.disableBlur||!1;c._tabToClear=a.tabToClear||!1;c.boxShadow(c._boxShadow,!0);c._calcWH();c._renderCanvas=document.createElement("canvas");c._renderCanvas.setAttribute("width",
c.outerW);c._renderCanvas.setAttribute("height",c.outerH);c._renderCtx=c._renderCanvas.getContext("2d");c._shadowCanvas=document.createElement("canvas");c._shadowCanvas.setAttribute("width",c._width+2*c._padding);c._shadowCanvas.setAttribute("height",c._height+2*c._padding);c._shadowCtx=c._shadowCanvas.getContext("2d");"undefined"!==typeof a.backgroundGradient?(c._backgroundColor=c._renderCtx.createLinearGradient(0,0,0,c.outerH),c._backgroundColor.addColorStop(0,a.backgroundGradient[0]),c._backgroundColor.addColorStop(1,
a.backgroundGradient[1])):c._backgroundColor=a.backgroundColor||"#fff";c._canvas&&(c.mousemoveCanvasListener=function(a){a=a||window.event;c.mousemove(a,c)},c._canvas.addEventListener("mousemove",c.mousemoveCanvasListener,!1),c.mousedownCanvasListener=function(a){a=a||window.event;c.mousedown(a,c)},c._canvas.addEventListener("mousedown",c.mousedownCanvasListener,!1),c.mouseupCanvasListener=function(a){a=a||window.event;c.mouseup(a,c)},c._canvas.addEventListener("mouseup",c.mouseupCanvasListener,!1));
c.mouseupWindowListener=function(a){c._hasFocus&&!c._mouseDown&&c.blur()};window.addEventListener("mouseup",c.mouseupWindowListener,!0);c.keydownWindowListener=function(a){a=a||window.event;c._hasFocus&&c.keydown(a,c)};window.addEventListener("keydown",c.keydownWindowListener,!1);c.keyupWindowListener=function(a){a=a||window.event;c._hasFocus&&c._onkeyup(a,c)};window.addEventListener("keyup",c.keyupWindowListener,!1);c.pasteWindowListener=function(a){a=a||window.event;if(c._hasFocus){a=a.clipboardData.getData("text/plain");
var e=c._value.substr(0,c._cursorPos),f=c._value.substr(c._cursorPos);c._value=e+a+f;c._cursorPos+=a.length;c.render()}};window.addEventListener("paste",c.pasteWindowListener,!1);e.push(c);c._inputsIndex=e.length-1;c.render()}).prototype={canvas:function(a){return"undefined"!==typeof a?(this._canvas=a,this._ctx=this._canvas.getContext("2d"),this.render()):this._canvas},x:function(a){return"undefined"!==typeof a?(this._x=a,this.render()):this._x},y:function(a){return"undefined"!==typeof a?(this._y=
a,this.render()):this._y},extraX:function(a){return"undefined"!==typeof a?(this._extraX=a,this.render()):this._extraX},extraY:function(a){return"undefined"!==typeof a?(this._extraY=a,this.render()):this._extraY},fontSize:function(a){return"undefined"!==typeof a?(this._fontSize=a,this.render()):this._fontSize},fontFamily:function(a){return"undefined"!==typeof a?(this._fontFamily=a,this.render()):this._fontFamily},fontColor:function(a){return"undefined"!==typeof a?(this._fontColor=a,this.render()):
this._fontColor},placeHolderColor:function(a){return"undefined"!==typeof a?(this._placeHolderColor=a,this.render()):this._placeHolderColor},fontWeight:function(a){return"undefined"!==typeof a?(this._fontWeight=a,this.render()):this._fontWeight},fontStyle:function(a){return"undefined"!==typeof a?(this._fontStyle=a,this.render()):this._fontStyle},width:function(a){return"undefined"!==typeof a?(this._width=a,this._calcWH(),this._updateCanvasWH(),this.render()):this._width},height:function(a){return"undefined"!==
typeof a?(this._height=a,this._calcWH(),this._updateCanvasWH(),this.render()):this._height},padding:function(a){return"undefined"!==typeof a?(this._padding=a,this._calcWH(),this._updateCanvasWH(),this.render()):this._padding},borderWidth:function(a){return"undefined"!==typeof a?(this._borderWidth=a,this._calcWH(),this._updateCanvasWH(),this.render()):this._borderWidth},borderColor:function(a){return"undefined"!==typeof a?(this._borderColor=a,this.render()):this._borderColor},borderRadius:function(a){return"undefined"!==
typeof a?(this._borderRadius=a,this.render()):this._borderRadius},backgroundColor:function(a){return"undefined"!==typeof a?(this._backgroundColor=a,this.render()):this._backgroundColor},backgroundGradient:function(a){return"undefined"!==typeof a?(this._backgroundColor=this._renderCtx.createLinearGradient(0,0,0,this.outerH),this._backgroundColor.addColorStop(0,a[0]),this._backgroundColor.addColorStop(1,a[1]),this.render()):this._backgroundColor},boxShadow:function(a,c){if("undefined"!==typeof a){var e=
a.split("px ");this._boxShadow={x:"none"===this._boxShadow?0:parseInt(e[0],10),y:"none"===this._boxShadow?0:parseInt(e[1],10),blur:"none"===this._boxShadow?0:parseInt(e[2],10),color:"none"===this._boxShadow?"":e[3]};this.shadowL=0>this._boxShadow.x?Math.abs(this._boxShadow.x)+this._boxShadow.blur:Math.abs(this._boxShadow.blur-this._boxShadow.x);this.shadowR=this._boxShadow.blur+this._boxShadow.x;this.shadowT=0>this._boxShadow.y?Math.abs(this._boxShadow.y)+this._boxShadow.blur:Math.abs(this._boxShadow.blur-
this._boxShadow.y);this.shadowB=this._boxShadow.blur+this._boxShadow.y;this.shadowW=this.shadowL+this.shadowR;this.shadowH=this.shadowT+this.shadowB;this._calcWH();if(!c)return this._updateCanvasWH(),this.render()}else return this._boxShadow},innerShadow:function(a){return"undefined"!==typeof a?(this._innerShadow=a,this.render()):this._innerShadow},selectionColor:function(a){return"undefined"!==typeof a?(this._selectionColor=a,this.render()):this._selectionColor},placeHolder:function(a){return"undefined"!==
typeof a?(this._placeHolder=a,this.render()):this._placeHolder},value:function(a){return"undefined"!==typeof a?(this._value=a,this.focus()):this._value},onsubmit:function(a){if("undefined"!==typeof a)return this._onsubmit=a,this;this._onsubmit()},onkeydown:function(a){if("undefined"!==typeof a)return this._onkeydown=a,this;this._onkeydown()},onkeyup:function(a){if("undefined"!==typeof a)return this._onkeyup=a,this;this._onkeyup()},focus:function(a){var c=this,e;if(!c._readonly){c._hasFocus||c._onfocus(c);
c._selectionUpdated?delete c._selectionUpdated:c._selection=[0,0];c._cursorPos="number"===typeof a?a:c._clipText().length;c._placeHolder===c._value&&(c._value="");c._hasFocus=!0;c._cursor=!0;c._cursorInterval&&clearInterval(c._cursorInterval);c._cursorInterval=setInterval(function(){c._cursor=!c._cursor;c.render()},500);a=navigator.userAgent.toLowerCase();a=0<=a.indexOf("chrome")&&0<=a.indexOf("mobile")&&0<=a.indexOf("android");var n="undefined"!==typeof window.orientation;n&&!a&&document&&document.createElement&&
(e=document.createElement("input"))?(e.type="text",e.style.opacity=0,e.style.position="absolute",e.style.left=c._x+c._extraX+(c._canvas?c._canvas.offsetLeft:0)+"px",e.style.top=c._y+c._extraY+(c._canvas?c._canvas.offsetTop:0)+"px",e.style.width=c._width,e.style.height=0,document.body.appendChild(e),e.focus(),e.addEventListener("blur",function(){c.blur(c)},!1)):n&&c.value(prompt(c._placeHolder)||"");return c.render()}},blur:function(a){a=a||this;a._disableBlur||(a._onblur(a),a._cursorInterval&&clearInterval(a._cursorInterval),
a._hasFocus=!1,a._cursor=!1,a._selection=[0,0],""===a._value&&(a._value=a._placeHolder));return a.render()},disableBlur:function(a){(a||this)._disableBlur=!0},enableBlur:function(a){(a||this)._disableBlur=!1},keydown:function(a,c){var u=a.which,n=a.shiftKey,f=null,g;if(c._hasFocus){c._onkeydown(a,c);if(65===u&&(a.ctrlKey||a.metaKey))return c._selection=[0,c._value.length],a.preventDefault(),c.render();if(17===u||a.metaKey||a.ctrlKey)return c;a.preventDefault();if(8===u)!c._clearSelection()&&0<c._cursorPos&&
(n=c._value.substr(0,c._cursorPos-1),g=c._value.substr(c._cursorPos,c._value.length),c._value=n+g,c._cursorPos--);else if(37===u)0<c._cursorPos&&(c._cursorPos--,c._cursor=!0,c._selection=[0,0]);else if(39===u)c._cursorPos<c._value.length&&(c._cursorPos++,c._cursor=!0,c._selection=[0,0]);else if(13===u)c._onsubmit(a,c);else if(9===u)if(c._tabToClear)c._value="",c._cursorPos=0;else{var h=e[c._inputsIndex+1]?c._inputsIndex+1:0;h!==c._inputsIndex&&(c.blur(),setTimeout(function(){e[h].focus()},10))}else if(f=
c._mapCodeToKey(n,u)){c._clearSelection();if(c._maxlength&&c._maxlength<=c._value.length)return;n=c._value?c._value.substr(0,c._cursorPos):"";g=c._value?c._value.substr(c._cursorPos):"";c._value=n+f+g;c._cursorPos++}return 13==u&&c._renderOnReturn||13!==u?c.render():function(){}}},click:function(a,c){var e=c._mousePos(a),n=e.x,e=e.y;if(c._endSelection)delete c._endSelection,delete c._selectionUpdated;else if(c._canvas&&c._overInput(n,e)||!c._canvas){if(c._mouseDown)return c._mouseDown=!1,c.click(a,
c),c.focus(c._clickPos(n,e))}else return c.blur()},mousemove:function(a,c){var e=c._mousePos(a),n=e.x,f=e.y;(e=c._overInput(n,f))&&c._canvas?(c._canvas.style.cursor="text",c._wasOver=!0):c._wasOver&&c._canvas&&(c._canvas.style.cursor="default",c._wasOver=!1);if(c._hasFocus&&0<=c._selectionStart)if(f=c._clickPos(n,f),n=Math.min(c._selectionStart,f),f=Math.max(c._selectionStart,f),!e)c._selectionUpdated=!0,c._endSelection=!0,delete c._selectionStart,c.render();else if(c._selection[0]!==n||c._selection[1]!==
f)c._selection=[n,f],c.render()},mousedown:function(a,c){var e=c._mousePos(a),n=e.x,e=e.y,f=c._overInput(n,e);c._mouseDown=f;c._hasFocus&&f&&(c._selectionStart=c._clickPos(n,e))},mouseup:function(a,c){var e=c._mousePos(a),n=e.x,e=e.y,f=c._clickPos(n,e)!==c._selectionStart;c._hasFocus&&0<=c._selectionStart&&c._overInput(n,e)&&f?(c._selectionUpdated=!0,delete c._selectionStart,c.render()):delete c._selectionStart;c.click(a,c)},renderCanvas:function(){return this._renderCanvas},cleanup:function(){this._canvas.removeEventListener("mouseup",
this.mouseupCanvasListener,!1);this._canvas.removeEventListener("mousedown",this.mousedownCanvasListener,!1);this._canvas.removeEventListener("mousemove",this.mousemoveCanvasListener,!1);window.removeEventListener("keydown",this.keydownWindowListener,!1);window.removeEventListener("keyup",this.keyupWindowListener,!1);window.removeEventListener("mouseup",this.mouseupWindowListener,!0);window.removeEventListener("paste",this.pasteWindowListener,!1);clearInterval(this._cursorInterval);this._canvas.style.cursor=
"default";for(var a=0;a<e.length;a++)e[a]===this&&e.remove(a)},render:function(){var a=this,c=a._renderCtx,e=a.outerW,n=a.outerH,f=a._borderRadius,g=a._borderWidth,h=a.shadowW,l=a.shadowH;c.clearRect(0,0,c.canvas.width,c.canvas.height);c.shadowOffsetX=a._boxShadow.x;c.shadowOffsetY=a._boxShadow.y;c.shadowBlur=a._boxShadow.blur;c.shadowColor=a._boxShadow.color;0<a._borderWidth&&(c.fillStyle=a._borderColor,a._roundedRect(c,a.shadowL,a.shadowT,e-h,n-l,f),c.fill(),c.shadowOffsetX=0,c.shadowOffsetY=0,
c.shadowBlur=0);a._drawTextBox(function(){c.shadowOffsetX=0;c.shadowOffsetY=0;c.shadowBlur=0;var k=a._clipText(),w=a._padding+a._borderWidth+a.shadowT;if(0<a._selection[1]){var t=a._textWidth(k.substring(0,a._selection[0])),G=a._textWidth(k.substring(a._selection[0],a._selection[1]));c.fillStyle=a._selectionColor;c.fillRect(w+t,w,G,a._height)}c.fillStyle=a._placeHolder===a._value&&""!==a._value?a._placeHolderColor:a._fontColor;a._cursor&&(t=a._textWidth(k.substring(0,a._cursorPos)),c.fillRect(w+t,
w,1,a._height));t=a._padding+a._borderWidth+a.shadowL;w=Math.round(w+a._height/2);c.font=a._fontStyle+" "+a._fontWeight+" "+a._fontSize+"px "+a._fontFamily;c.textAlign="left";c.textBaseline="middle";c.fillText(k,t,w);G=a._innerShadow.split("px ");k="none"===a._innerShadow?0:parseInt(G[0],10);w="none"===a._innerShadow?0:parseInt(G[1],10);t="none"===a._innerShadow?0:parseInt(G[2],10);G="none"===a._innerShadow?"":G[3];if(0<t){var C=a._shadowCtx,B=C.canvas.width,A=C.canvas.height;C.clearRect(0,0,B,A);
C.shadowBlur=t;C.shadowColor=G;C.shadowOffsetX=0;C.shadowOffsetY=w;C.fillRect(-1*e,-100,3*e,100);C.shadowOffsetX=k;C.shadowOffsetY=0;C.fillRect(B,-1*n,100,3*n);C.shadowOffsetX=0;C.shadowOffsetY=w;C.fillRect(-1*e,A,3*e,100);C.shadowOffsetX=k;C.shadowOffsetY=0;C.fillRect(-100,-1*n,100,3*n);a._roundedRect(c,g+a.shadowL,g+a.shadowT,e-2*g-h,n-2*g-l,f);c.clip();c.drawImage(a._shadowCanvas,0,0,B,A,g+a.shadowL,g+a.shadowT,B,A)}a._ctx&&(a._ctx.clearRect(a._x,a._y,c.canvas.width,c.canvas.height),a._ctx.drawImage(a._renderCanvas,
a._x,a._y));return a})},_drawTextBox:function(a){var c=this,e=c._renderCtx,n=c.outerW,f=c.outerH,g=c._borderRadius,h=c._borderWidth,l=c.shadowW,k=c.shadowH;if(""===c._backgroundImage)e.fillStyle=c._backgroundColor,c._roundedRect(e,h+c.shadowL,h+c.shadowT,n-2*h-l,f-2*h-k,g),e.fill(),a();else{var w=new Image;w.src=c._backgroundImage;w.onload=function(){e.drawImage(w,0,0,w.width,w.height,h+c.shadowL,h+c.shadowT,n,f);a()}}},_clearSelection:function(){if(0<this._selection[1]){var a=this._selection[0],
c=this._selection[1];this._value=this._value.substr(0,a)+this._value.substr(c);this._cursorPos=a;this._cursorPos=0>this._cursorPos?0:this._cursorPos;this._selection=[0,0];return!0}return!1},_clipText:function(a){a="undefined"===typeof a?this._value:a;var c=this._textWidth(a)/(this._width-this._padding);return(1<c?a.substr(-1*Math.floor(a.length/c)):a)+""},_textWidth:function(a){var c=this._renderCtx;c.font=this._fontStyle+" "+this._fontWeight+" "+this._fontSize+"px "+this._fontFamily;c.textAlign=
"left";return c.measureText(a).width},_calcWH:function(){this.outerW=this._width+2*this._padding+2*this._borderWidth+this.shadowW;this.outerH=this._height+2*this._padding+2*this._borderWidth+this.shadowH},_updateCanvasWH:function(){var a=this._renderCanvas.width,c=this._renderCanvas.height;this._renderCanvas.setAttribute("width",this.outerW);this._renderCanvas.setAttribute("height",this.outerH);this._shadowCanvas.setAttribute("width",this._width+2*this._padding);this._shadowCanvas.setAttribute("height",
this._height+2*this._padding);this._ctx&&this._ctx.clearRect(this._x,this._y,a,c)},_roundedRect:function(a,c,e,n,f,g){n<2*g&&(g=n/2);f<2*g&&(g=f/2);a.beginPath();a.moveTo(c+g,e);a.lineTo(c+n-g,e);a.quadraticCurveTo(c+n,e,c+n,e+g);a.lineTo(c+n,e+f-g);a.quadraticCurveTo(c+n,e+f,c+n-g,e+f);a.lineTo(c+g,e+f);a.quadraticCurveTo(c,e+f,c,e+f-g);a.lineTo(c,e+g);a.quadraticCurveTo(c,e,c+g,e);a.closePath()},_overInput:function(a,c){var e=a<=this._x+this._extraX+this._width+2*this._padding,n=c>=this._y+this._extraY,
f=c<=this._y+this._extraY+this._height+2*this._padding;return a>=this._x+this._extraX&&e&&n&&f},_clickPos:function(a,c){var e=this._value;this._value===this._placeHolder&&(e="");var e=this._clipText(e),n=0,f=e.length;if(a-(this._x+this._extraX)<this._textWidth(e))for(var g=0;g<e.length;g++)if(n+=this._textWidth(e[g]),n>=a-(this._x+this._extraX)){f=g;break}return f},_mousePos:function(a){var c=a.target,e=document.defaultView.getComputedStyle(c,void 0),n=parseInt(e.paddingLeft,10)||0,f=parseInt(e.paddingLeft,
10)||0,g=parseInt(e.borderLeftWidth,10)||0,e=parseInt(e.borderLeftWidth,10)||0,h=document.body.parentNode.offsetTop||0,l=document.body.parentNode.offsetLeft||0,k=0,w=0;if("unefined"!==typeof c.offsetParent){do k+=c.offsetLeft,w+=c.offsetTop;while(c=c.offsetParent)}return{x:a.pageX-(k+(n+g+l)),y:a.pageY-(w+(f+e+h))}},_mapCodeToKey:function(a,c){for(var e=[8,9,13,16,17,18,20,27,91,92],n="",n=0;n<e.length;n++)if(c===e[n])return;if("boolean"===typeof a&&"number"===typeof c)return e={32:" ",48:")",49:"!",
50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",107:"+",173:"_",189:"_",186:":",187:"+",188:"<",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},n=a?65<=c&&90>=c?String.fromCharCode(c):e[c]:65<=c&&90>=c?String.fromCharCode(c).toLowerCase():96===c?"0":97===c?"1":98===c?"2":99===c?"3":100===c?"4":101===c?"5":102===c?"6":103===c?"7":104===c?"8":105===c?"9":188===c?",":190===c?".":191===c?"/":192===c?"`":220===c?"\\":187===c?"=":189===c||173===c?"-":222===c?"'":186===c?";":219===
c?"[":221===c?"]":String.fromCharCode(c)}}})();
(function(e,a){e.Spinner=a()})(this,function(){function e(a,c){var e=document.createElement(a||"div"),f;for(f in c)e[f]=c[f];return e}function a(a){for(var c=1,e=arguments.length;c<e;c++)a.appendChild(arguments[c]);return a}function c(a,c,e,f){var g=["opacity",c,~~(100*a),e,f].join("-");e=0.01+e/f*100;f=Math.max(1-(1-a)/c*(100-e),a);var h=G.substring(0,G.indexOf("Animation")).toLowerCase();t[g]||(C.insertRule("@"+(h&&"-"+h+"-"||"")+"keyframes "+g+"{0%{opacity:"+f+"}"+e+"%{opacity:"+a+"}"+(e+0.01)+
"%{opacity:1}"+(e+c)%100+"%{opacity:"+a+"}100%{opacity:"+f+"}}",C.cssRules.length),t[g]=1);return g}function u(a,c){var e=a.style,f,g;c=c.charAt(0).toUpperCase()+c.slice(1);for(g=0;g<w.length;g++)if(f=w[g]+c,void 0!==e[f])return f;if(void 0!==e[c])return c}function n(a,c){for(var e in c)a.style[u(a,e)||e]=c[e];return a}function f(a){for(var c=1;c<arguments.length;c++){var e=arguments[c],f;for(f in e)void 0===a[f]&&(a[f]=e[f])}return a}function g(a){for(var c={x:a.offsetLeft,y:a.offsetTop};a=a.offsetParent;)c.x+=
a.offsetLeft,c.y+=a.offsetTop;return c}function h(a,c){return"string"==typeof a?a:a[c%a.length]}function l(a){if("undefined"==typeof this)return new l(a);this.opts=f(a||{},l.defaults,B)}function k(){function c(a,f){return e("<"+a+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',f)}C.addRule(".spin-vml","behavior:url(#default#VML)");l.prototype.lines=function(e,f){function g(){return n(c("group",{coordsize:w+" "+w,coordorigin:-k+" "+-k}),{width:w,height:w})}function l(d,e,P){a(v,a(n(g(),
{rotation:360/f.lines*d+"deg",left:~~e}),a(n(c("roundrect",{arcsize:f.corners}),{width:k,height:f.width,left:f.radius,top:-f.width>>1,filter:P}),c("fill",{color:h(f.color,d),opacity:f.opacity}),c("stroke",{opacity:0}))))}var k=f.length+f.width,w=2*k,d=2*-(f.width+f.length)+"px",v=n(g(),{position:"absolute",top:d,left:d});if(f.shadow)for(d=1;d<=f.lines;d++)l(d,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(d=1;d<=f.lines;d++)l(d);return a(e,v)};l.prototype.opacity=
function(a,c,e,f){a=a.firstChild;f=f.shadow&&f.lines||0;a&&c+f<a.childNodes.length&&(a=(a=(a=a.childNodes[c+f])&&a.firstChild)&&a.firstChild)&&(a.opacity=e)}}var w=["webkit","Moz","ms","O"],t={},G,C=function(){var c=e("style",{type:"text/css"});a(document.getElementsByTagName("head")[0],c);return c.sheet||c.styleSheet}(),B={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:0.25,fps:20,zIndex:2E9,className:"spinner",top:"auto",left:"auto",position:"relative"};
l.defaults={};f(l.prototype,{spin:function(a){this.stop();var c=this,f=c.opts,h=c.el=n(e(0,{className:f.className}),{position:f.position,width:0,zIndex:f.zIndex}),l=f.radius+f.length+f.width,k,w;a&&(a.insertBefore(h,a.firstChild||null),w=g(a),k=g(h),n(h,{left:("auto"==f.left?w.x-k.x+(a.offsetWidth>>1):parseInt(f.left,10)+l)+"px",top:("auto"==f.top?w.y-k.y+(a.offsetHeight>>1):parseInt(f.top,10)+l)+"px"}));h.setAttribute("role","progressbar");c.lines(h,c.opts);if(!G){var d=0,v=(f.lines-1)*(1-f.direction)/
2,x,F=f.fps,P=F/f.speed,p=(1-f.opacity)/(P*f.trail/100),Y=P/f.lines;(function y(){d++;for(var a=0;a<f.lines;a++)x=Math.max(1-(d+(f.lines-a)*Y)%P*p,f.opacity),c.opacity(h,a*f.direction+v,x,f);c.timeout=c.el&&setTimeout(y,~~(1E3/F))})()}return c},stop:function(){var a=this.el;a&&(clearTimeout(this.timeout),a.parentNode&&a.parentNode.removeChild(a),this.el=void 0);return this},lines:function(f,g){function l(a,d){return n(e(),{position:"absolute",width:g.length+g.width+"px",height:g.width+"px",background:a,
boxShadow:d,transformOrigin:"left",transform:"rotate("+~~(360/g.lines*k+g.rotate)+"deg) translate("+g.radius+"px,0)",borderRadius:(g.corners*g.width>>1)+"px"})}for(var k=0,w=(g.lines-1)*(1-g.direction)/2,t;k<g.lines;k++)t=n(e(),{position:"absolute",top:1+~(g.width/2)+"px",transform:g.hwaccel?"translate3d(0,0,0)":"",opacity:g.opacity,animation:G&&c(g.opacity,g.trail,w+k*g.direction,g.lines)+" "+1/g.speed+"s linear infinite"}),g.shadow&&a(t,n(l("#000","0 0 4px #000"),{top:"2px"})),a(f,a(t,l(h(g.color,
k),"0 0 1px rgba(0,0,0,.1)")));return f},opacity:function(a,c,e){c<a.childNodes.length&&(a.childNodes[c].style.opacity=e)}});var A=n(e("group"),{behavior:"url(#default#VML)"});!u(A,"transform")&&A.adj?k():G=u(A,"animation");return l});window.m=window.m||{};
(function(e,a){var c="undefined";(function(a){e.log=a()})(function(){function e(c,f){var g=c[f];if(g.bind===a){if(Function.prototype.bind===a)return n(g,c);try{return Function.prototype.bind.call(c[f],c)}catch(h){return n(g,c)}}else return c[f].bind(c)}function n(a,c){return function(){Function.prototype.apply.apply(a,[c,arguments])}}function f(a){for(var c=0;c<t.length;c++)k[t[c]]=a(t[c])}function g(){return typeof window!==c&&window.document!==a&&window.document.cookie!==a}function h(){try{return typeof window!==
c&&window.localStorage!==a}catch(e){return!1}}function l(a){var c=!1,e,f;for(f in k.levels)if(k.levels.hasOwnProperty(f)&&k.levels[f]===a){e=f;break}if(h())try{window.localStorage.mloglevel=e}catch(l){c=!0}else c=!0;c&&g()&&(window.document.cookie="mloglevel="+e+";")}var k={},w=function(){},t=["trace","debug","info","warn","error"],G=/mloglevel=([^;]+)/;k.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5};k.setLevel=function(g){if("number"===typeof g&&0<=g&&g<=k.levels.SILENT)if(l(g),g===k.levels.SILENT)f(function(){return w});
else{if(typeof console===c)return f(function(a){return function(){typeof console!==c&&(k.setLevel(g),k[a].apply(k,arguments))}}),"No console available for logging";f(function(f){return g<=k.levels[f.toUpperCase()]?typeof console===c?w:console[f]===a?console.log!==a?e(console,"log"):w:e(console,f):w})}else if("string"===typeof g&&k.levels[g.toUpperCase()]!==a)k.setLevel(k.levels[g.toUpperCase()]);else throw"log.setLevel() called with invalid level: "+g;};k.enableAll=function(){k.setLevel(k.levels.TRACE)};
k.disableAll=function(){k.setLevel(k.levels.SILENT)};(function(){var c;h()&&(c=window.localStorage.mloglevel);c===a&&g()&&(c=(G.exec(window.document.cookie)||[])[1]);k.levels[c]===a&&(c="WARN");k.setLevel(k.levels[c])})();return k})})(window.m);window.m=window.m||{};
(function(e,a){function c(a){return(10>a?"0":"")+a}var u={0:["None","U"],1:["Time","sec"],2:["Delay","sec"],3:["Frequency","Hz"],4:["Time code format",""],5:["Distance","m"],6:["Speed","m/s"],7:["Acceleration","m/sec^2"],8:["Jerk","m/sec^3"],9:["Doppler","Hz"],10:["Doppler rate","Hz/sec"],11:["Energy","J"],12:["Power","W"],13:["Mass","g"],14:["Volume","l"],15:["Angular power density","W/ster"],16:["Integrated power density","W/rad"],17:["Spatial power density","W/m^2"],18:["Integrated power density",
"W/m"],19:["Spectral power density","W/MHz"],20:["Amplitude","U"],21:["Real","U"],22:["Imaginary","U"],23:["Phase","rad"],24:["Phase","deg"],25:["Phase","cycles"],26:["10*Log","U"],27:["20*Log","U"],28:["Magnitude","U"],29:["Unknown","U"],30:["Unknown","U"],31:["General dimensionless",""],32:["Counts",""],33:["Angle","rad"],34:["Angle","deg"],35:["Relative power","dB"],36:["Relative power","dBm"],37:["Relative power","dBW"],38:["Solid angle","ster"],40:["Distance","ft"],41:["Distance","nmi"],42:["Speed",
"ft/sec"],43:["Speed","nmi/sec"],44:["Speed","knots=nmi/hr"],45:["Acceleration","ft/sec^2"],46:["Acceleration","nmi/sec^2"],47:["Acceleration","knots/sec"],48:["Acceleration","G"],49:["Jerk","G/sec"],50:["Rotation","rps"],51:["Rotation","rpm"],52:["Angular velocity","rad/sec"],53:["Angular velocity","deg/sec"],54:["Angular acceleration","rad/sec^2"],55:["Angular acceleration","deg/sec^2"],60:["Latitude","deg"],61:["Longitude","deg"],62:["Altitude","ft"],63:["Altitude","m"]};e.Mc={colormap:[{name:"Greyscale",
colors:[{pos:0,red:0,green:0,blue:0},{pos:60,red:50,green:50,blue:50},{pos:100,red:100,green:100,blue:100},{pos:100,red:0,green:0,blue:0},{pos:100,red:0,green:0,blue:0},{pos:100,red:0,green:0,blue:0},{pos:100,red:0,green:0,blue:0}]},{name:"Ramp Colormap",colors:[{pos:0,red:0,green:0,blue:15},{pos:10,red:0,green:0,blue:50},{pos:31,red:0,green:65,blue:75},{pos:50,red:0,green:85,blue:0},{pos:70,red:75,green:80,blue:0},{pos:83,red:100,green:60,blue:0},{pos:100,red:100,green:0,blue:0}]},{name:"Color Wheel",
colors:[{pos:0,red:100,green:100,blue:0},{pos:20,red:0,green:80,blue:40},{pos:30,red:0,green:100,blue:100},{pos:50,red:10,green:10,blue:0},{pos:65,red:100,green:0,blue:0},{pos:88,red:100,green:40,blue:0},{pos:100,red:100,green:100,blue:0}]},{name:"Spectrum",colors:[{pos:0,red:0,green:75,blue:0},{pos:22,red:0,green:90,blue:90},{pos:37,red:0,green:0,blue:85},{pos:49,red:90,green:0,blue:85},{pos:68,red:90,green:0,blue:0},{pos:80,red:90,green:90,blue:0},{pos:100,red:95,green:95,blue:95}]},{name:"Sunset",
colors:[{pos:0,red:10,green:0,blue:23},{pos:18,red:34,green:0,blue:60},{pos:36,red:58,green:20,blue:47},{pos:55,red:74,green:20,blue:28},{pos:72,red:90,green:43,blue:0},{pos:87,red:100,green:72,blue:0},{pos:100,red:100,green:100,blue:76}]}]};e.PIPESIZE=1048576;e.initialize=function(c,g){var h=new BlueHeader(null);h.version="BLUE";h.size=0;h.type=1E3;h.format="SF";h.timecode=0;h.xstart=0;h.xdelta=1;h.xunits=0;h.subsize=1;h.ystart=0;h.ydelta=1;h.yunits=0;g||(g={});for(var l in g)h[l]=g[l];1<h.subsize&&
(h.type=2E3);h["class"]=h.type/1E3;if(2===h["class"]&&g.subsize===a)throw"subsize must be provided with type 2000 files";g.pipe?(h.pipe=!0,h.in_byte=0,h.out_byte=0,h.buf=new ArrayBuffer(g.pipesize||e.PIPESIZE),h.setData(h.buf),h.data_free=h.dview.length):h.setData(c);return h};e.force1000=function(a){2===a["class"]&&(a.size=a.size&&!a.pipe?a.subsize*a.size:0,a.bpe/=a.subsize,a.ape=1)};e.grab=function(c,e,h,l){if(!c.dview)return 0;"C"===c.format[0]&&(h*=2);l=Math.min(e.length,c.dview.length-h);if(e.set===
a)for(var k=0;k<l;k++)e[k]=c.dview[h+k];else e.set(c.dview.subarray(h,h+l));"C"===c.format[0]&&(l/=2);return l};e.filad=function(a,c,e){if(a.data_free<c.length)throw"Pipe full";var l=a.in_byte/a.dview.BYTES_PER_ELEMENT,k=l+c.length;if(k>a.dview.length){var k=a.dview.length-l,n=c.length-k;c.subarray?(a.dview.set(c.subarray(0,k),l),a.dview.set(c.subarray(k,c.length),0)):(a.dview.set(c.slice(0,k),l),a.dview.set(c.slice(k,c.length),0));a.in_byte=n*a.dview.BYTES_PER_ELEMENT}else a.dview.set(c,l),a.in_byte=
k*a.dview.BYTES_PER_ELEMENT%a.buf.byteLength;a.data_free-=c.length;if(a.onwritelisteners)for(c=0;c<a.onwritelisteners.length;c++)if(e)a.onwritelisteners[c]();else window.setTimeout(a.onwritelisteners[c],0)};e.pavail=function(a){return a.dview.length-a.data_free};e.grabx=function(c,e,h,l){var k=c.dview.length-c.data_free;l===a&&(l=0);if(!h)h=Math.min(e.length-l,k);else if(h>e.length-l)throw"m.grabx : nget larger then available buffer space";if(0>h)throw"m.grabx : nget cannot be negative";if(h>k)return 0;
var k=c.out_byte/c.dview.BYTES_PER_ELEMENT,n=k+h;if(n>=c.dview.length){var t=c.dview.length-k,n=n-c.dview.length;e.set(c.dview.subarray(k,c.dview.length),l);e.set(c.dview.subarray(0,n),l+t)}else e.set(c.dview.subarray(k,n),l);c.out_byte=n*c.dview.BYTES_PER_ELEMENT%c.buf.byteLength;c.data_free+=h;return h};e.addPipeWriteListener=function(a,c){a.onwritelisteners||(a.onwritelisteners=[]);-1===a.onwritelisteners.indexOf(c)&&a.onwritelisteners.push(c)};e.units_name=function(a){a=u[a];return a[0]+" ("+
a[1]+")"};e.trim_name=function(a){var c=a.indexOf("]");-1===c&&(c=a.indexOf("/"));-1===c&&(c=a.indexOf(":"));var e=a.substr(c+1,a.length).indexOf(".");0>e&&(e=a.length-c);return a.substr(c+1,c+e+1)};e.label=function(c,g){var h=["Unknown","U"];"string"===typeof c?h=[c,null]:Array.isArray(c)?h=c:(h=u[c],h===a&&(h=["Unknown","U"]));var l=e.mult_prefix(g);return h[1]?h[0]+" ("+l+h[1]+")":h[0]};e.mult_prefix=function(a){var c="?";1==a?c="":10==a?c="da":0.1==a?c="d":100==a?c="h":0.01==a?c="c":1E3==a?c=
"K":0.001==a?c="m":1E6==a?c="M":1E-6==a?c="u":1E9==a?c="G":1E-9==a?c="n":1E12==a?c="T":1E-12==a&&(c="p");return c};var n="F";e.vstype=function(a){n=a;"D"===n||"L"===n||"F"===n||"I"===n||"B"===n||alert("Unsupported vector type")};e.log10=function(c,e){e===a&&(e=1E-20);return Math.log(Math.max(c,e))/Math.log(10)};e.vlog10=function(c,e,h){e===a&&(e=1E-20);h===a&&(h=c);for(var l=0;l<c.length&&!(h.length<=l);l++)h[l]=Math.log(Math.max(c[l],e))/Math.log(10)};e.vlogscale=function(c,e,h,l){e===a&&(e=1E-20);
h===a&&(h=1);l===a&&(l=c);for(var k=0;k<c.length&&!(l.length<=k);k++)l[k]=Math.log(Math.abs(Math.max(c[k],e)))/Math.log(10),l[k]*=h};e.cvmag2logscale=function(c,e,h,l){e===a&&(e=1E-20);h===a&&(h=1);l===a&&(l=c);for(var k=0,n=0;n<l.length;n++){k=2*n+1;if(k>=c.length)break;l[n]=c[k-1]*c[k-1]+c[k]*c[k];l[n]=Math.log(Math.abs(Math.max(l[n],e)))/Math.log(10);l[n]*=h}};e.vsmul=function(c,e,h,l){h===a&&(h=c);l===a&&(l=h.length);l=Math.min(h.length,l);l=Math.min(c.length,l);for(var k=0;k<l&&!(h.length<=k);k++)h[k]=
c[k]*e};e.vmxmn=function(a,c){var e=a[0],l=a[0],k=0,n=0;c=Math.min(c,a.length);for(var t=0;t<c;t++)a[t]>e&&(e=a[t],k=t),a[t]<l&&(l=a[t],n=t);return{smax:e,smin:l,imax:k,imin:n}};e.vmov=function(c,e,h,l,k){k===a&&(k=c.length);k=Math.min(c.length,k);for(var n=0;n<k;n++){var t=n*e,G=n*l;if(t>=c.length)break;if(G>=h.length)break;h[G]=c[t]}};e.vfill=function(c,e,h){h===a&&(h=c.length);h=Math.min(c.length,h);for(var l=0;l<h;l++)c[l]=e};e.vabs=function(c,e,h){h===a&&(h=c.length);e===a&&(e=c);for(var l=0;l<
h;l++)e[l]=Math.abs(c[l])};e.cvmag=function(c,e,h){h===a&&(h=e.length);h=Math.min(e.length,h);for(var l=0;l<h;l++){var k=2*l+1;if(k>=c.length)break;e[l]=Math.sqrt(c[k-1]*c[k-1]+c[k]*c[k])}};e.cvmag2=function(c,e,h){h===a&&(h=e.length);h=Math.min(e.length,h);for(var l=0,k=0;k<h;k++){l=2*k+1;if(l>=c.length)break;e[k]=c[l-1]*c[l-1]+c[l]*c[l]}};e.cvpha=function(c,e,h){h===a&&(h=e.length);h=Math.min(e.length,h);for(var l=0,k=0,n=l=0;n<h;n++){l=2*n+1;if(l>=c.length)break;k=c[l-1];l=c[l];0===k&&0===l&&(k=
1);e[n]=Math.atan2(l,k)}};e.cvphad=function(c,e,h){h===a&&(h=e.length);h=Math.min(e.length,h);for(var l=0,k=0,n=l=0;n<h;n++){l=2*n+1;if(l>=c.length)break;k=c[l-1];l=c[l];0===k&&0===l&&(k=1);e[n]=Math.atan2(l,k)*(180/Math.PI)}};e.trunc=function(a){return a-a%1};e.sign=function(a,c){return 0<=c?Math.abs(a):-Math.abs(a)};e.sec2tod=function(a,e){var h="",h=Date.UTC(1950,0,1);Date.UTC(1949,11,31);var l=new Date,l=new Date(l.getFullYear(),l.getMonth(),l.getDate(),0,0,0,0);0<=a?86400>a?(h=l.getTime()+1E3*
a,l=new Date(h),h=c(l.getHours())+":"+c(l.getMinutes())+":"+c(l.getSeconds())):86400===a?h="24:00:00":31536E3>a?(h=a/86400,h=[0<h?Math.floor(h):Math.ceil(h)],l=new Date(1E3*a+l.getTime()),h=h.toString()+"::"+c(l.getHours())+":"+c(l.getMinutes())+":"+c(l.getSeconds())):(h=Math.floor(1E3*a)+h,l=new Date(h),h=l.getUTCFullYear()+":"+c(l.getUTCMonth()+1)+":"+c(l.getUTCDate())+"::"+c(l.getUTCHours())+":"+c(l.getUTCMinutes())+":"+c(l.getUTCSeconds())):-31536E3<a?(h=a/86400,h=0>=h?Math.ceil(h):Math.floor(h),
l=new Date(Math.abs(1E3*a)+l.getTime()),h=0===h?"-0":h.toString(),h=h+"::"+c(l.getHours())+":"+c(l.getMinutes())+":"+c(l.getSeconds())):(h=Math.floor(1E3*a)+h,l=new Date(h),h=l.getUTCFullYear()+":"+c(l.getUTCMonth()+1)+":"+c(l.getUTCDate())+"::"+c(l.getUTCHours())+":"+c(l.getUTCMinutes())+":"+c(l.getUTCSeconds()));h=0===a%1?h+".000000":h+("."+Math.abs(a%1).toPrecision(6).slice(2,8));if(e){var l=h.indexOf("."),k=-1;-1!==l&&(k=h.substr(l,h.length).indexOf("0"));-1!==k&&(h=h.substr(0,l+k))}return h};
e.sec2tspec=function(a,c,h){c=c||"";if(0<=a&&86400>=a)return e.sec2tod(a,h);a%=86400;return"delta"!==c&&0>=a?e.sec2tod(a+86400,h):"delta"===c&&0>=a?"-"+e.sec2tod(-1*a,h):e.sec2tod(a,h)};e.sec2tod_j1970=function(a){var e="";0<=a&&86400>a?(e=new Date(1E3*a),e=c(e.getHours())+":"+c(e.getMinutes())+":"+c(e.getSeconds())):0>a&&-31536E3<a?(e=new Date(1E3*a),e=(a/86400*-1).toString()+"::"+c(e.getHours())+":"+c(e.getMinutes())+":"+c(e.getSeconds())):(e=new Date(1E3*(a-631152E3)),e=e.getFullYear()+":"+c(e.getMonth())+
":"+c(e.getDate())+"::"+c(e.getHours())+":"+c(e.getMinutes())+":"+c(e.getSeconds()));0!==a%1&&(e+="."+(a%1).toPrecision(6).slice(2,8));return e};e.j1970toj1950=function(c){return c.getTime!==a?c.getTime()/1E3+631152E3:c+631152E3};e.j1950toj1970=function(a){return a-631152E3};e.throttle=function(a,c){var e=(new Date).getTime();return function(){var l=(new Date).getTime();l-e>=a&&(e=l,c.apply(null,arguments))}}})(window.m);window.mx=window.mx||{};
(function(e,a,c){function u(){this.ymax=this.ymin=this.xmax=this.xmin=this.yl=this.xl=this.yo=this.xo=0;this.mode=this.func=c}function n(d){this.root=d;this.parent=document.createElement("div");this.parent.style.position="relative";this.parent.width=d.clientWidth;this.parent.height=d.clientHeight;d.appendChild(this.parent);this.canvas=document.createElement("canvas");this.canvas.style.position="absolute";this.canvas.style.top="0px";this.canvas.style.left="0px";this.canvas.width=d.clientWidth;this.canvas.height=
d.clientHeight;this.parent.appendChild(this.canvas);this.active_canvas=this.canvas;this.wid_canvas=document.createElement("canvas");this.wid_canvas.style.position="absolute";this.wid_canvas.style.top="0px";this.wid_canvas.style.left="0px";this.wid_canvas.style.zIndex=1;this.wid_canvas.width=d.clientWidth;this.wid_canvas.height=d.clientHeight;this.parent.appendChild(this.wid_canvas);this.font=c;this.font_family="Courier New, monospace";this.level=this.text_h=this.text_w=0;this.width=this.parent.width;
this.height=this.parent.height;this.ymrk=this.xmrk=this.ypos=this.xpos=0;this.origin=1;this.stk=[new e.STKSTRUCT];e.setbgfg(this,"black","white");this.warpbox=this.event_cb=c;this.rmode=!1;this.linewidth=1;this.style=c;this.xi=!1;this.l=this.state_mask=this.button_press=this.button_release=0;this.r=this.width;this.t=0;this.b=this.height;this.scrollbar_x=new e.SCROLLBAR;this.scrollbar_y=new e.SCROLLBAR;this.prompt=c;this.pixel=[];this._renderCanvas=document.createElement("canvas")}function f(d,a,c,
e,g,p,f){g<=c?f>c&&0<(e-a)*(f-c)-(p-a)*(g-c)&&(d+=1):f<=c&&0>(e-a)*(f-c)-(p-a)*(g-c)&&(d-=1);return d}function g(d,a){a.animationFrameHandle||(a.animationFrameHandle=requestAnimFrame(e.withWidgetLayer(d,function(){e.erase_window(d);a.animationFrameHandle=c;var x=1.5*d.text_h;a.x=Math.max(a.x,0);a.y=Math.max(a.y,0);a.x=Math.min(a.x,d.width-a.w);a.y=Math.min(a.y,d.height-a.h);var F=a.x+K.GBorder+Math.max(0,K.sidelab),g=a.y+K.GBorder+K.toplab*(x+K.GBorder),p=a.w-2*K.GBorder-Math.abs(K.sidelab);e.widgetbox(d,
a.x,a.y,a.w,a.h,F,g,p,a.h-2*K.GBorder-K.toplab*(x+K.GBorder),a.title);var f=d.wid_canvas.getContext("2d");f.lineWidth=1;f.strokeStyle=d.xwbs;f.beginPath();f.moveTo(F,g-4+0.5);f.lineTo(F+p-1,g-4+0.5);f.stroke();f.strokeStyle=d.xwts;f.beginPath();f.moveTo(F,g-3+0.5);f.lineTo(F+p-1,g-3+0.5);f.stroke();for(var h=0;h<a.items.length;h++){var y=a.items[h],l=g+x*h;"separator"===y.style?(f.fillStyle=d.xwbs,f.fillRect(F,l,p,x),f.beginPath(),f.moveTo(F,l+0.5),f.lineTo(F+p,l+0.5),f.stroke(),f.textBaseline="middle",
f.textAlign="left",f.fillStyle=d.xwfg,f.fillText(" "+y.text+" ",F+2*d.text_w,l+x/2)):(e.LEGACY_RENDER?(f.fillStyle=d.xwlo,f.fillRect(F,l,p,x),f.beginPath(),f.moveTo(F,l+0.5),f.lineTo(F+p,l+0.5),f.stroke(),y.selected&&e.shadowbox(d,F-1,l,p+2,x,1,2,"",0.75)):(f.save(),f.globalAlpha=0.75,f.fillStyle=y.selected?d.xwts:d.xwlo,f.fillRect(F,l,p,x),f.restore(),f.strokeStyle=d.bg,f.beginPath(),f.moveTo(F,l+0.5),f.lineTo(F+p,l+0.5),f.stroke()),f.textBaseline="middle",f.textAlign="left",f.fillStyle=d.xwfg,"checkbox"===
y.style?(f.fillText(" "+y.text+" ",F+2*d.text_w,l+x/2),f.strokeStyle=d.xwfg,f.strokeRect(F+1+d.text_w,l+(x-d.text_w)/2,d.text_w,d.text_w),y.checked&&(f.beginPath(),f.moveTo(F+1+d.text_w,l+(x-d.text_w)/2),f.lineTo(F+1+d.text_w+d.text_w,l+(x-d.text_w)/2+d.text_w),f.stroke(),f.beginPath(),f.moveTo(F+1+d.text_w+d.text_w,l+(x-d.text_w)/2),f.lineTo(F+1+d.text_w,l+(x-d.text_w)/2+d.text_w),f.stroke())):(f.fillText(" "+y.text+" ",F,l+x/2),y.checked&&(f.beginPath(),f.moveTo(F+1,l+d.text_h/4),f.lineTo(F+1+d.text_w-
2,l+d.text_h/4+d.text_h/2),f.lineTo(F+1,l+d.text_h/4+d.text_h),f.lineTo(F+1,l+d.text_h/4),f.fill())))}})))}function h(d,a){e.onWidgetLayer(d,function(){e.erase_window(d)});d.menu=c;d.widget=null;for(var x=0;x<a.items.length;x++){var F=a.items[x];if(F.selected){F.handler?F.handler():F.menu&&(x=F.menu,"function"===typeof F.menu&&(x=F.menu()),x.finalize=a.finalize,e.menu(d,x));break}}!d.menu&&a.finalize&&a.finalize()}function l(d,a){e.onWidgetLayer(d,function(){e.erase_window(d)});d.menu=c;d.widget=
null;!d.menu&&a.finalize&&a.finalize()}function k(d,a,c){var e=!0,f;f=a/d;0<d?f>c.tL?e=!1:f>c.tE&&(c.tE=f):0>d?f<c.tE?e=!1:f<c.tL&&(c.tL=f):0<a&&(e=!1);return e}function w(d,a,c,e,f,p,g,h){0>a&&(a=0);0>c&&(c=0);0>e&&(e=0);0>f&&(f=0);h&&(d.lineWidth=h);g&&(d.strokeStyle=g);1===d.lineWidth%2&&(a===e&&(e=a=Math.floor(a)+0.5),c===f&&(f=c=Math.floor(c)+0.5));if(!p||!p.mode)d.beginPath(),d.moveTo(a,c),d.lineTo(e,f),d.stroke(),d.beginPath();else if("dashed"===p.mode){if(dashOn(d,p.on,p.off))d.beginPath(),
d.moveTo(a,c),d.lineTo(e,f),d.stroke(),dashOff(d);else if(d.beginPath(),c===f)for(f=Math.min(a,e),e=Math.max(a,e);f<e;)d.moveTo(f,c),d.lineTo(f+p.on,c),d.stroke(),f+=p.on+p.off;else if(a===e)for(e=Math.min(c,f),f=Math.max(c,f);e<f;)d.moveTo(a,e),d.lineTo(a,e+p.on),d.stroke(),e+=p.on+p.off;else throw"Only horizontal or vertical dashed lines are supported";d.beginPath()}else if("xor"===p.mode)if("undefined"===typeof Uint8ClampedArray)d.beginPath(),d.moveTo(a,c),d.lineTo(e,f),d.stroke(),d.beginPath();
else{g=p=0;if(c===f)p=Math.abs(e-a),g=h,a=Math.min(a,e);else if(a===e)p=h,g=Math.abs(f-c),c=Math.min(c,f);else throw"Only horizontal and vertical lines can be drawn with XOR";if(0!==p&&0!==g){a=Math.floor(a);c=Math.floor(c);e=d.getImageData(a,c,p,g);f=e.data;p=0;for(h=f.length;p<h;p+=4)f[p]=255-f[p],f[p+1]=255-f[p+1],f[p+2]=255-f[p+2],f[p+3]=255;d.putImageData(e,a,c);d.clearRect(0,0,1,1)}}}function t(d,a,c,e,f){G(d,a,f);c&&(d.strokeStyle=c);e&&(d.fillStyle=e);d.fill();d.closePath()}function G(d,a,
c){if(!(1>a.length)){var e=a[0].x,f=a[0].y;d.lineWidth=c?c:1;d.beginPath();d.moveTo(e,f);for(c=0;c<a.length;c++)e=a[c].x,f=a[c].y,d.lineTo(e,f)}}function C(d){return Math.floor(Math.round(d/100*255))}function B(d,a,c){return"rgb("+Math.round(d)+", "+Math.round(a)+", "+Math.round(c)+")"}function A(d,a){var c,e;if(".000000"===d.substring(5,8))c=4;else for(c=d.length-1;"0"===d[c];)c-=1;for(e=0;" "===d[e]&&(5<c-e+1||a);)e+=1;c=d.substring(e,c+1);-1===c.indexOf(".")&&(c+=".");return c}function E(d){d._animationFrameHandle=
c;var a=d.warpbox;d.active_canvas.getContext("2d");if(a&&d.xpos>=a.xmin&&d.xpos<=a.xmax&&d.ypos>=a.ymin&&d.ypos<=a.ymax){a.xl=d.xpos;a.yl=d.ypos;var x=Math.min(a.xo,a.xl),f=Math.min(a.yo,a.yl),g=Math.abs(a.xl-a.xo),p=Math.abs(a.yl-a.yo);0!==g&&0!==p&&("vertical"===a.mode?(x=d.l,g=d.r-d.l):"horizontal"===a.mode&&(f=d.t,p=d.b-d.t),e.onWidgetLayer(d,function(){e.erase_window(d);e.draw_box(d,"xor",x,f,g,p,a.style.opacity,a.style.fill_color)}))}}function H(d,a,c){return d<a?a:d>c?c:d}function Q(d,a,e,
f,g,p,h,l,y,k,q,s,z){k===c&&(k=0);q===c&&(q=0);s===c&&(s=e.width-k);z===c&&(z=e.height-q);d._renderCanvas.width=e.width;d._renderCanvas.height=e.height;for(var r=d._renderCanvas.getContext("2d"),D=r.createImageData(d._renderCanvas.width,d._renderCanvas.height),M=new Uint8Array(e),I=0;I<e.height;++I)for(var n=0;n<e.width;++n){var N=4*(I*e.width+n);D.data[N]=M[N];D.data[N+1]=M[N+1];D.data[N+2]=M[N+2];D.data[N+3]=255}r.putImageData(D,0,0);a.save();a.globalAlpha=f;g||(a.imageSmoothingEnabled=!1,a.mozImageSmoothingEnabled=
!1,a.webkitImageSmoothingEnabled=!1);a.drawImage(d._renderCanvas,k,q,s,z,p,h,l,y);a.restore()}function S(d,a,e,f,g,p,h,l,y,k,q,s,z){k===c&&(k=0);q===c&&(q=0);s===c&&(s=e.width-k);z===c&&(z=e.height-q);if(32768>e.width&&32768>e.height){d._renderCanvas.width=e.width;d._renderCanvas.height=e.height;var r=d._renderCanvas.getContext("2d"),D=r.createImageData(d._renderCanvas.width,d._renderCanvas.height);e=new Uint8ClampedArray(e);D.data.set(e);r.putImageData(D,0,0)}else 32768>s&&32768>z?(d._renderCanvas.width=
s,d._renderCanvas.height=z,T(d._renderCanvas,e,k,q,s,z)):(d._renderCanvas.width=Math.min(2*l,e.width),d._renderCanvas.height=Math.min(2*y,e.height),T(d._renderCanvas,e,k,q,s,z),s=d._renderCanvas.width,z=d._renderCanvas.height),q=k=0;a.save();a.globalAlpha=f;g||(a.imageSmoothingEnabled=!1,a.mozImageSmoothingEnabled=!1,a.webkitImageSmoothingEnabled=!1);a.drawImage(d._renderCanvas,k,q,s,z,p,h,l,y);a.restore()}function T(d,a,c,e,f,p){var g=new Uint32Array(a);f||(f=a.width);p||(p=a.height);c||(c=0);e||
(e=0);var h=d.width,l=d.height;d=d.getContext("2d");var k=d.createImageData(h,l),q=new ArrayBuffer(k.data.length),s=new Uint8ClampedArray(q),q=new Uint32Array(q);f/=h;p/=l;for(var z=0,r=0,l=z=0;l<q.length;l++)z=Math.round(Math.floor(l%h)*f)+c,r=Math.round(Math.floor(l/h)*p)+e,z=Math.floor(r*a.width+z),q[l]=g[z];k.data.set(s);d.putImageData(k,0,0)}e.XW_INIT=-3;e.XW_DRAW=1;e.XW_EVENT=2;e.XW_UPDATE=3;e.XW_COMMAND=5;e.SB_EXPAND=1;e.SB_SHRINK=2;e.SB_FULL=3;e.SB_STEPINC=4;e.SB_STEPDEC=5;e.SB_PAGEINC=6;
e.SB_PAGEDEC=7;e.SB_DRAG=8;e.SB_WHEELUP=9;e.SB_WHEELDOWN=10;e.L_ArrowLeft=1001;e.L_ArrowRight=1002;e.L_ArrowUp=1003;e.L_ArrowDown=1004;e.L_dashed=801;e.GBorder=3;e.L_RModeOff=900;e.L_RModeOn=901;e.L_PixelSymbol=1;e.L_CircleSymbol=2;e.L_SquareSymbol=3;e.L_PlusSymbol=4;e.L_XSymbol=5;e.L_TriangleSymbol=6;e.L_ITriangleSymbol=7;e.L_HLineSymbol=8;e.L_VLineSymbol=9;e.LEGACY_RENDER=!1;e.STKSTRUCT=function(){this.y2=this.x2=this.y1=this.x1=this.yscl=this.xscl=this.ymax=this.ymin=this.xmax=this.xmin=0};e.SCROLLBAR=
function(){this.repeat_count=this.origin=this.mxevent=this.arrow=this.a2=this.a1=this.soff=this.swmin=this.sw=this.s1=this.h=this.w=this.y=this.x=this.repeat_pause=this.initial_pause=this.dragoutline=this.scale=this.page=this.step=this.trange=this.tmin=this.srange=this.smin=this.action=this.flag=null};e.open=function(d){d=new n(d);d.wid_canvas.oncontextmenu=function(d){d.preventDefault();return!1};this._ctx=d.active_canvas.getContext("2d");d.onmousemove=function(d){return function(a){var f=a.target.getBoundingClientRect();
d.x=a.x||a.clientX;d.y=a.y||a.clientY;d.xpos=a.offsetX===c?a.pageX-f.left-window.scrollX:a.offsetX;d.ypos=a.offsetX===c?a.pageY-f.top-window.scrollY:a.offsetY;d.warpbox&&(d.warpbox.style=(a.ctrlKey||a.metaKey)&&d.warpbox.alt_style!==c?d.warpbox.alt_style:d.warpbox.def_style,e.redraw_warpbox(d));e.widget_callback(d,a)}}(d);d.onmouseup=function(d){return function(a){if(d.warpbox){e.onWidgetLayer(d,function(){e.erase_window(d)});var f=d.warpbox;d.warpbox=c;if((1===a.which||3===a.which)&&f.func){var g=
f.xo,p=f.yo,h=f.xl,l=f.yl;"vertical"===f.mode?(g=d.l,h=d.r):"horizontal"===f.mode&&(p=d.t,l=d.b);f.func(a,g,p,h,l,f.style.return_value,f.mode)}}e.widget_callback(d,a)}}(d);d.onmousedown=function(d){return function(a){a.preventDefault();e.widget_callback(d,a);return!1}}(d);d.onkeydown=function(d){return function(a){if(d.warpbox){var c=getKeyCode(a);17!==c&&224!==c&&91!==c&&93!==c||d.warpbox.style===d.warpbox.alt_style||(d.warpbox.style=d.warpbox.alt_style,e.redraw_warpbox(d))}e.widget_callback(d,a)}}(d);
d.onkeyup=function(d){return function(a){d.warpbox&&(a=getKeyCode(a),17!==a&&224!==a&&91!==a&&93!==a||d.warpbox.style===d.warpbox.def_style||(d.warpbox.style=d.warpbox.def_style,e.redraw_warpbox(d)))}}(d);d.ontouchend=function(d){return function(a){d.onmouseup({which:1})}}(d);d.ontouchmove=function(d){return function(a){var f=d.canvas,g=0,p=0;if(f.offsetParent!==c){do g+=f.offsetLeft,p+=f.offsetTop;while(f=f.offsetParent)}d.xpos=a.targetTouches[0].pageX-g;d.ypos=a.targetTouches[0].pageY-p;e.redraw_warpbox(d)}}(d);
e.enableListeners(d);return d};e.enableListeners=function(d){e.addEventListener(d,"mousemove",d.onmousemove,!1);window.addEventListener("mouseup",d.onmouseup,!1);e.addEventListener(d,"mousedown",d.onmousedown,!1);window.addEventListener("keydown",d.onkeydown,!1);window.addEventListener("keyup",d.onkeyup,!1)};e.disableListeners=function(d){e.removeEventListener(d,"mousemove",d.onmousemove,!1);window.removeEventListener("mouseup",d.onmouseup,!1);e.removeEventListener(d,"mousedown",d.onmousedown,!1);
window.removeEventListener("keydown",d.onkeydown,!1);window.removeEventListener("keyup",d.onkeyup,!1)};e.addEventListener=function(d,a,c,e){return d.wid_canvas.addEventListener(a,c,e)};e.removeEventListener=function(d,a,c,e){return d.wid_canvas.removeEventListener(a,c,e)};e.dispatchEvent=function(d,a){return d.wid_canvas.dispatchEvent(a)};e.onWidgetLayer=function(d,a){e.onCanvas(d,d.wid_canvas,a)};e.onCanvas=function(d,a,c){var e=d.active_canvas;d.active_canvas=a;try{if(c)return c()}finally{d.active_canvas=
e}};e.withWidgetLayer=function(d,a){return function(){e.onWidgetLayer(d,a)}};e.render=function(d,a){if(a){var e=d.active_canvas;e._animationFrameHandle||(e._animationFrameHandle=requestAnimFrame(function(){e._animationFrameHandle=c;a()}))}};e.fullscreen=function(d,a){a===c&&(a=!d.fullscreen);a?(d.fullscreen={position:d.root.style.position,height:d.root.style.height,width:d.root.style.width,left:d.root.style.left,top:d.root.style.top,zIndex:d.root.style.zIndex},d.root.style.position="fixed",d.root.style.height=
"100%",d.root.style.width="100%",d.root.style.left="0px",d.root.style.top="0px",d.root.style.zIndex=16777271):(d.root.style.position=d.fullscreen.position,d.root.style.height=d.fullscreen.height,d.root.style.width=d.fullscreen.width,d.root.style.left=d.fullscreen.left,d.root.style.top=d.fullscreen.top,d.root.style.zIndex=d.fullscreen.zIndex,d.fullscreen=c);e.checkresize(d)};e.checkresize=function(d){var a=d.canvas;return a.height!==d.root.clientHeight||a.width!==d.root.clientWidth?(d.height=d.root.clientHeight,
d.width=d.root.clientWidth,d.canvas.height=d.height,d.canvas.width=d.width,d.wid_canvas.height=d.height,d.wid_canvas.width=d.width,!0):!1};e.invertbgfg=function(d){e.setbgfg(d,d.fg,d.bg,!d.xi)};e.mixcolor=function(d,a,c){d=tinycolor(d).toRgb();a=tinycolor(a).toRgb();var e=1-c;a.r=d.r*e+a.r*c;a.g=d.g*e+a.g*c;a.b=d.b*e+a.b*c;return tinycolor(a).toHexString(!0)};e.linear_gradient=function(d,a,c,e,f,p){var g=d.active_canvas.getContext("2d");d=1/p.length;a=g.createLinearGradient(a,c,e,f);for(c=0;c<p.length-
1;c++)a.addColorStop(d*c,p[c]);a.addColorStop(1,p[p.length-1]);return a};e.setbgfg=function(d,a,c,f){d.bg=tinycolor(a).toHexString();d.fg=tinycolor(c).toHexString();d.xi=tinycolor(f).toHexString();tinycolor.equals(d.bg,"black")&&tinycolor.equals(d.fg,"white")?(d.xwfg=d.fg,d.xwbg="rgb(35%,35%,30%)",d.xwts="rgb(60%,60%,55%)",d.xwbs="rgb(25%,25%,20%)",d.xwms=e.mixcolor(d.xwts,d.xwbs,0.5),d.xwlo="rgb(15%,15%,10%)",d.hi=d.xwts):tinycolor.equals(d.bg,"white")&&tinycolor.equals(d.fg,"black")?(d.xwfg=d.fg,
d.xwbg="rgb(60%,60%,55%)",d.xwts="rgb(80%,80%,75%)",d.xwbs="rgb(40%,40%,35%)",d.xwms=e.mixcolor(d.xwts,d.xwbs,0.5),d.xwlo="rgb(70%,70%,65%)",d.hi=d.xwbs):(a=tinycolor(d.bg).toRgb(),127.5<Math.sqrt(0.299*a.r*a.r+0.587*a.g*a.g+0.114*a.b*a.b)?(d.xwfg="black",d.xwbg="rgb(60%,60%,55%)",d.xwts="rgb(80%,80%,75%)",d.xwbs="rgb(40%,40%,35%)",d.xwms=e.mixcolor(d.xwts,d.xwbs,0.5),d.xwlo="rgb(70%,70%,65%)",d.hi=d.xwts):(d.xwfg="white",d.xwbg="rgb(35%,35%,30%)",d.xwts="rgb(60%,60%,55%)",d.xwbs="rgb(25%,25%,20%)",
d.xwms=e.mixcolor(d.xwts,d.xwbs,0.5),d.xwlo="rgb(15%,15%,10%)",d.hi=d.xwbs))};e.settheme=function(d,a){d.bg=a.bg;d.fg=a.fg;d.xi=a.xi;d.xwfg=a.xwfg;d.xwbg=a.xwbg;d.xwts=a.xwts;d.xwbs=a.xwbs;d.xwlo=a.xwlo;d.hi=a.hi};e.close=function(d){var a=d.wid_canvas;a.removeEventListener("mousemove",d.onmousemove,!1);a.removeEventListener("mouseup",d.onmouseup,!1);d.parent&&d.parent.parentNode&&d.parent.parentNode.removeChild(d.parent)};e.scrollbar=function(d,a,f,g,h,p,l,k,y,n,q){var s,z,r,D=0,M=new e.SCROLLBAR;
s=a.flag!==c?a.flag:a;z=Math.abs(s);r=p-h>g-f?3>d.origin?2:4:d.origin&2?3:1;10>z&&(a=M);if(10>z||0===a.action)e.scroll(d,a,e.XW_INIT,c,q),a.flag=s,a.initial_pause=-1,e.scroll_loc(a,f,h,g-f+1,p-h+1,r,q);a.srange=l.pe-l.ps;switch(z){case 0:f=g=h=1;break;case 1:case 11:f=g=0.9*a.srange;h=2;break;case 2:case 12:f=0.1*a.srange;g=9*f;h=2;break;case 3:case 13:f=1;g=a.srange-1;h=1;break;default:return 0}e.scroll_vals(a,l.ps,a.srange,k,y-k,f,g,h,q);0===s?e.scroll(d,a,e.XW_DRAW,c,c):e.scroll(d,a,e.XW_EVENT,
n,q)&&(l.ps!==a.smin&&(l.ps=a.smin,D+=1),l.pe!==a.smin+a.srange&&(l.pe=a.smin+a.srange,D+=2));return D};e.scroll=function(d,a,f,g,h){var p;if(a===c)return!1;switch(f){case e.XW_INIT:e.scroll_loc(a,0,0,d.width,20,1,h);e.scroll_vals(a,0,10,0,100,1,10,1,h);a.flag=0;a.action=0;a.initial_pause=0.25;a.repeat_pause=0.05;a.mxevent=!0;a.repeat_count=0;break;case e.XW_EVENT:p=0;if(a.mxevent)p=d.button_release?-d.button_release:d.button_press;else if("mousedown"===g.type||"mouseup"===g.type){switch(g.which){case 1:p=
1;break;case 2:p=2;break;case 3:p=3;break;case 4:p=4;break;case 5:p=5}"mouseup"===g.type&&(p=-p)}else if("mousewheel"===g.type||"DOM-MouseScroll"===g.type)g.wheelDelta&&0<g.wheelDelta?p=4:g.wheelDelta&&0>g.wheelDelta&&(p=5);if(0===a.action){if(4===p||5===p)d.xpos=a.x;if(1!==p&&2!==p&&4!==p&&5!==p||d.xpos<a.x||d.ypos<a.y||d.xpos>a.x+a.w||d.ypos>a.y+a.h)return!1}else if(0>p){a.action=a.repeat_count=0;break}a.origin&1?(g=d.xpos-a.x,a.origin&2&&(g=a.w-g)):(g=d.ypos-a.y,2>=a.origin&&(g=a.h-g));if(0===
a.action){a.repeat_count=0;var l=e.scroll_real2pix(a);a.s1=h.s1=l.s1;a.sw=h.sw=l.sw;a.soff=h.soff=g-a.s1;if(0===a.trange)a.smin=h.smin=a.tmin,a.srange=h.srange=0;else switch(p){case 1:a.action=g>a.a1&&g<a.a2?0<a.soff?e.SB_PAGEINC:e.SB_PAGEDEC:0<a.soff?e.SB_STEPINC:e.SB_STEPDEC;break;case 4:a.action=e.SB_WHEELUP;break;case 5:a.action=e.SB_WHEELDOWN;break}}else switch(a.action){case e.SB_WHEELUP:case e.SB_WHEELDOWN:case e.SB_EXPAND:case e.SB_SHRINK:case e.SB_FULL:a.action=a.repeat_count=0}case e.XW_COMMAND:p=
a.smin;g=a.srange;switch(a.action){case e.SB_STEPINC:p+=a.step;break;case e.SB_STEPDEC:p-=a.step;break;case e.SB_PAGEINC:p+=a.page;break;case e.SB_PAGEDEC:p-=a.page;break;case e.SB_FULL:p=a.tmin;g=a.trange;break;case e.SB_EXPAND:g*=a.scale;p=0>=p&&0<=p+a.srange?p*a.scale:p-(g-a.srange)/2;break;case e.SB_SHRINK:g/=a.scale;p=0>p&&0<=p+a.srange?p+g/a.scale:0===p&&0<=p+a.srange?g/a.scale:p+(a.srange-g)/2;break;case e.SB_WHEELUP:p-=a.page;break;case e.SB_WHEELDOWN:p+=a.page}0<a.trange?(p=Math.max(a.tmin,
Math.min(p,a.tmin+a.trange-g)),g=Math.min(g,a.trange)):(p=Math.min(a.tmin,Math.max(p,a.tmin+a.trange-g)),g=Math.max(g,a.trange));a.smin===p&&a.srange===g?a.action!==e.SB_DRAG&&(a.action=a.repeat_count=0):(a.smin=h.smin=p,a.srange=h.srange=g,a.repeat_count++);f===e.XW_COMMAND&&(e.scroll(d,a,e.XW_UPDATE,c),a.action=0);break;case e.XW_DRAW:case e.XW_UPDATE:e.redrawScrollbar(a,d,f)}return!0};e.scroll_loc=function(d,v,f,g,h,p,l){d!==c&&(d.x=l.x=v,d.y=l.y=f,d.w=l.w=g,d.h=l.h=h,d.origin=l.origin=Math.max(1,
Math.min(4,p)),d.origin&1?(d.a2=l.a2=d.w,d.arrow=l.arrow=Math.min(a.trunc((d.w-a.trunc(2*e.GBorder))/3),d.h+e.GBorder)):(d.a2=l.a2=d.h,d.arrow=l.arrow=Math.min(a.trunc((d.h-a.trunc(2*e.GBorder))/3),d.w+e.GBorder)),d.a1=l.a1=d.arrow+e.GBorder,d.a2-=d.arrow+e.GBorder,l.a2-=d.arrow+e.GBorder,d.swmin=l.swmin=Math.min(10,d.a2-d.a1),d.s1=l.s1=0,d.sw=l.sw=0,d.action=l.action=0)};e.scroll_vals=function(d,a,e,f,g,p,h,l,y){d!==c&&(d.smin=y.smin=a,d.srange=y.srange=e,d.tmin=y.tmin=f,d.trange=y.trange=g,d.step=
y.step=p,d.page=y.page=h,d.scale=y.scale=Math.max(l,1))};e.draw_symbol=function(d,c,f,g,h,p,l){for(var k=d.active_canvas.getContext("2d"),y=0,n=0,q=0,s=!1,z=[],n=0;4>n;n++)z[n]={x:0,y:0};n="";s=0>p;y=Math.abs(p);n=2*y;k.fillStyle=c;k.strokeStyle=c;if("function"===typeof h)h(k,l,f,g);else switch(h){case e.L_CircleSymbol:k.beginPath();s?(k.arc(f,g,y,0,360),k.fill()):(k.arc(f,g,y,0,360),k.stroke());break;case e.L_SquareSymbol:s?k.fillRect(f-y,g-y,n,n):k.strokeRect(f-y,g-y,n,n);break;case e.L_PixelSymbol:k.beginPath();
k.arc(f,g,1,0,2*Math.PI,!0);k.fill();break;case e.L_ITriangleSymbol:y=-y;case e.L_TriangleSymbol:n=a.trunc(1.5*y);q=a.trunc(0.8*y);z[1].x=-q;z[1].y=n;z[2].x=2*q;z[2].y=0;z[3].x=-q;z[3].y=-n;d=[];for(n=0;4>n;n++)d[n]={x:0,y:0};s?(d[0].x=f,d[0].y=g-y,d[1].x=d[0].x+z[1].x,d[1].y=d[0].y+z[1].y,d[2].x=d[1].x+z[2].x,d[2].y=d[1].y+z[2].y,d[3].x=d[2].x+z[3].x,d[3].y=d[2].y+z[3].y,t(k,d)):(d[0].x=f,d[0].y=g-y,d[1].x=d[0].x+z[1].x,d[1].y=d[0].y+z[1].y,d[2].x=d[1].x+z[2].x,d[2].y=d[1].y+z[2].y,d[3].x=d[2].x+
z[3].x,d[3].y=d[2].y+z[3].y,G(k,d,void 0),k.stroke(),k.closePath());break;case e.L_PlusSymbol:w(k,f,g+y,f,g-y);w(k,f+y,g,f-y,g);break;case e.L_HLineSymbol:w(k,f+y,g,f-y,g);break;case e.L_VLineSymbol:w(k,f,g+y,f,g-y);break;case e.L_XSymbol:w(k,f-y,g-y,f+y,g+y);w(k,f+y,g-y,f-y,g+y);break;default:n=h,y=a.trunc(d.text_w/2),s&&k.fillText(n.substring(0,2),f-y,g+y)}};e.draw_symbols=function(d,a,c,f,g,p,h,l){for(var k=0;k<g;k++)e.draw_symbol(d,a,c[k],f[k],p,h,k+l)};e.trace=function(d,v,g,h,l,p,n,U,y,X,q){if(g===
c||h===c)throw"mx.trace requires xpoint and ypoint";n===c&&(n=1);U===c&&(U=1);y===c&&(y=0);X===c&&(X=0);q===c&&(q={});if(0>=l)a.log.warn("No points to draw");else if(0===U&&0===y)a.log.warn("No line or symbol to draw");else{var s;q.dashed&&(s={mode:"dashed",on:4,off:4});var z=e.origin(d.origin,4,d.stk[d.level]);if(0!==z.xscl&&0!==z.yscl){var r=z.x1,D=z.y1,M=z.xmin,I=1/z.xscl,O=z.ymin,N=1/z.yscl;q.noclip||e.clip(d,r,D,z.x2-r+1,z.y2-D+1);var t=Math.abs(z.xmax-z.xmin),w=Math.abs(z.ymax-z.ymin),R=Math.min(z.xmin,
z.xmax),z=Math.min(z.ymin,z.ymax),J=R+t,C=z+w,B=4*Math.ceil(2*g.length),G=new Int32Array(new ArrayBuffer(B)),B=new Int32Array(new ArrayBuffer(B)),u=0;if(0===U&&0!==y)for(var A=n-1;A<l;A+=n){var E=g[A],L=h[A],K=E>=R&&E<=J&&L>=z&&L<=C;K&&(G[0]=Math.round((E-M)*I)+r,B[0]=Math.round((L-O)*N)+D,e.draw_symbol(d,v,G[0],B[0],y,X,p+A))}else if(!0===q.vertsym&&0!==y)for(A=n-1;A<l;A+=n)E=g[A],L=h[A],E>=R&&E<=J&&(U=Math.round((E-M)*I)+r,e.draw_line(d,v,U,0,U,d.height),L>=z&&L<=C&&(G[0]=U,B[0]=Math.round((L-O)*
N)+D,e.draw_symbol(d,v,G[0],B[0],y,X,p+A)));else if(!0===q.horzsym&&0!==y)for(A=n-1;A<l;A+=n)E=g[A],L=h[A],L>=z&&L<=C&&(U=Math.round((L-O)*N)+D,e.draw_line(d,v,0,U,d.width,U),E>=R&&E<=J&&(G[0]=Math.round((E-M)*I)+r,B[0]=U,e.draw_symbol(d,v,G[0],B[0],y,X,p+A)));else if(0!==U){var H;if(q&&q.highlight){H=[];for(A=0;A<q.highlight.length;A++)if(!(q.highlight[A].xstart>=J||q.highlight[A].xend<=R)&&(E=Math.max(q.highlight[A].xstart,R),L=Math.min(q.highlight[A].xend,J),E<L)){E=Math.round((E-M)*I)+r;L=Math.round((L-
M)*I)+r;for(t=H.length-1;0<=t;t--)E<=H[t].start&&L>=H[t].end?H.splice(t,1):(E>=H[t].start&&L<=H[t].end?(H.push({start:L,end:H[t].end,color:H[t].color}),H[t].end=E):E<=H[t].start&&L>=H[t].start?H[t].start=L:E<=H[t].end&&L>=H[t].end&&(H[t].end=E),H[t].end<=H[t].start&&H.splice(t,1));H.push({start:E,end:L,color:q.highlight[A].color})}H.push({start:r,color:v});H.sort(function(d,a){return d.start-a.start})}else H=v;var Q,S=(d.stk[d.level].xmax+d.stk[d.level].xmin)/2,T=(d.stk[d.level].ymax+d.stk[d.level].ymin)/
2,E=g[0],L=h[0];Q=f(0,S,T,d.stk[d.level].xmin,d.stk[d.level].ymin,E,L);(K=E>=R&&E<=J&&L>=z&&L<=C)?(G[u]=Math.round((E-M)*I)+r,B[u]=Math.round((L-O)*N)+D,u+=1,0!==y&&e.draw_symbols(d,v,G,B,1,y,X,p)):u=0;for(var V=0,W=!1,A=n;A<=n*(l-1);A+=n)if(t=E,w=L,E=g[A],L=h[A],Q=f(Q,S,T,t,w,E,L),W=E>=R&&E<=J&&L>=z&&L<=C,K&&W)G[u]=Math.round((E-M)*I)+r,B[u]=Math.round((L-O)*N)+D,u+=1;else if(K=W,t-=E,w-=L,0!==t||0!==w){var Z={tL:1,tE:0};k(t,R-E,Z)&&k(-t,E-J,Z)&&k(w,z-L,Z)&&k(-w,L-C,Z)&&(1>Z.tL&&(G[u]=Math.round((E-
M+Z.tL*t)*I)+r,B[u]=Math.round((L-O+Z.tL*w)*N)+D,u+=1),0<Z.tE?(G[u]=Math.round((E-M+Z.tE*t)*I)+r,B[u]=Math.round((L-O+Z.tE*w)*N)+D,u+=1,e.draw_lines(d,H,G.subarray(V,u),B.subarray(V,u),u-V,U,s),0!==y&&2<u-V&&e.draw_symbols(d,v,G.subarray(V+1,u-1),B.subarray(V+1,u-1),u-V-2,y,X,p+A-(u-V-2)),V=u):(G[u]=Math.round((E-M)*I)+r,B[u]=Math.round((L-O)*N)+D,u+=1))}Q=f(Q,S,T,E,L,d.stk[d.level].xmax,d.stk[d.level].ymin);Q=f(Q,S,T,d.stk[d.level].xmax,d.stk[d.level].ymin,d.stk[d.level].xmin,d.stk[d.level].ymin);
0<u-V&&(e.draw_lines(d,H,G.subarray(V,u),B.subarray(V,u),u-V,U,s),W&&(V+=1),0!==y&&1<u-V&&e.draw_symbols(d,v,G.subarray(V-1,u),B.subarray(V-1,u),u-V-1,y,X,A-u+p));q.fillStyle&&(1<u||0!==Q)&&e.fill_trace(d,q.fillStyle,G,B,u)}q.noclip||e.clip(d,0,0,0,0)}}};e.draw_mode=function(d,a,e){d.linewidth=a===c?1:a;d.style=e};e.draw_line=function(d,e,f,g,h,p,l,k){var y=d.active_canvas.getContext("2d");l===c&&(l=d.linewidth);k===c&&(k=d.style);"number"===typeof e&&(d.pixel&&0!==d.pixel.length?(e=Math.max(0,Math.min(d.pixel.length,
e)),e=B(d.pixel[e].red,d.pixel[e].green,d.pixel[e].blue)):(a.log.warn("COLORMAP not initialized, defaulting to foreground"),e=d.fg));w(y,f,g,h,p,k,e,l)};e.rubberline=function(d,a,c,e,f){d=d.active_canvas.getContext("2d");w(d,a,c,e,f,{mode:"xor"},"white",1)};e.fill_trace=function(d,a,c,f,g){var p=d.active_canvas.getContext("2d");Array.isArray(a)?p.fillStyle=e.linear_gradient(d,0,0,0,d.b-d.t,a):p.fillStyle=a;if(1>g)p.fillRect(d.l,d.t,d.r-d.l,d.b-d.t);else if(a){a=c[0];var h=f[0];p.beginPath();h===d.t?
p.lineTo(d.l,d.t):p.lineTo(d.l,d.b);p.lineTo(a,h);for(var l=1;l<g;l++)a=c[l],h=f[l],p.lineTo(a,h);h===d.t&&p.lineTo(d.r,d.t);p.lineTo(d.r,d.b);f[0]===d.t&&p.lineTo(d.l,d.b);p.closePath();p.fill()}};e.draw_lines=function(d,e,f,g,h,p,l){var k=d.active_canvas.getContext("2d");if(!(1>h)){var y=f[0],n=g[0];p===c&&(p=d.linewidth);l===c&&(l=d.style);l&&"dashed"===l.mode&&(dashOn(k,l.on,l.off)||a.log.warn("WARNING: Dashed lines aren't supported on your browser"));k.lineWidth=p;d=0;"string"===typeof e?e=[{start:0,
color:e}]:e instanceof Array||(e.start===c&&(e.start=0),e=[e]);for(p=0;p<e.length;p++)null!=e[p].end&&e[p].end<y?e.remove(p):e[p].start<y&&(d=p);k.strokeStyle=e[d].color;k.beginPath();k.moveTo(y,n);for(p=0;p<h;p++)if(y!==f[p]||n!==g[p]){y=f[p];n=g[p];l=!1;if(0<d&&null!=e[d].end&&e[d].end<y)for(l=!0;null!=e[d].end&&e[d].end<y&&(e.remove(d),d-=1,0!==d););if(d+1<e.length&&e[d+1].start<=y)for(l=!0;d+1<e.length&&e[d+1].start<=y;)d++;k.lineTo(y,n);l&&(k.stroke(),k.strokeStyle=e[d].color,k.beginPath(),k.lineTo(y,
n))}k.stroke();dashOff(k);k.beginPath()}};e.clip=function(d,a,c,e,f){d=d.active_canvas.getContext("2d");0===a&&0===c&&0===e&&0===f?d.restore():(d.save(),d.beginPath(),d.rect(a,c,e,f),d.clip())};e.clear_window=function(d){var a=d.active_canvas.getContext("2d");a.fillStyle=d.bg;a.fillRect(0,0,d.width,d.height)};e.erase_window=function(d){d.active_canvas.getContext("2d").clearRect(0,0,d.width,d.height)};e.rubberbox=function(d,a,c,f,g){e.warpbox(d,d.xpos,d.ypos,d.xpos,d.ypos,0,d.width,0,d.height,a,c,
f,g)};e.warpbox=function(d,a,c,e,f,g,h,l,k,n,q,s,z){s||(s={});d.warpbox=new u;d.warpbox.xo=a;d.warpbox.yo=c;d.warpbox.xl=e;d.warpbox.yl=f;d.warpbox.xmin=g;d.warpbox.xmax=h;d.warpbox.ymin=l;d.warpbox.ymax=k;d.warpbox.func=n;d.warpbox.mode=q;d.warpbox.style=s;d.warpbox.def_style=s;d.warpbox.alt_style=z};e.origin=function(d,a,c){d=Math.max(1,d);a=Math.max(1,a);var f=new e.STKSTRUCT;f.xmin=c.xmin;f.xmax=c.xmax;f.ymin=c.ymin;f.ymax=c.ymax;f.xscl=c.xscl;f.yscl=c.yscl;f.x1=c.x1;f.y1=c.y1;f.x2=c.x2;f.y2=
c.y2;if(d!==a){var g=Math.abs(a-d);d=a+d;if(2===g||5!==d)f.xmin=c.xmax,f.xmax=c.xmin,f.xscl=-c.xscl;if(2===g||5===d)f.ymin=c.ymax,f.ymax=c.ymin,f.yscl=-c.yscl}return f};e.mult=function(d,a){var c=Math.max(Math.abs(d),Math.abs(a));if(0===c)return 1;var e=0.1447648*Math.log(c),e=e|e;1>c&&(e-=1);return 0>e?1/Math.pow(10,-3*e):Math.pow(10,3*e)};e.widget_callback=function(d,a){if(d.prompt&&3===a.which)d.prompt.input.onsubmit();d.widget&&d.widget.callback(a)};e.prompt=function(d,a,f,g,h,p,l,k,n){if(p!==
c&&(h=f(p),!h.valid))throw"Prompt default input value not valid due to '"+h.reason+"'";e.onWidgetLayer(d,function(){var h=d.active_canvas.getContext("2d"),q=h.font.indexOf("px"),s=q+3,q=h.font.substr(0,q),h=h.font.substr(s,h.font.length).toString(),h=new CanvasInput({height:d.text_h,fontFamily:h,fontSize:new Number(q),backgroundColor:d.bg,fontColor:d.fg,borderWidth:0,borderRadius:0,padding:0,boxShadow:"none",innerShadow:"none",width:30*d.text_w,value:p!==c?p.toString():"",disableBlur:!0,renderOnReturn:!1,
tabToClear:!0}),z=function(a,q){return function(){var s=this.value(),z=f(s);z.valid?(d.prompt=c,this.cleanup(),e.onWidgetLayer(d,function(){e.erase_window(d)}),g(s)):(e.message(d,"Value: '"+s+"' isn't valid due to '"+z.reason+"' - RETRY",c,a,q),setTimeout(function(){e.onWidgetLayer(d,function(){e.erase_window(d)});d.widget=null},null!=n?n:4E3))}},s=function(a,d,c){return function(q,s){e.onWidgetLayer(a,function(){var f=(c.length+2)*a.text_w,g=f+31*a.text_w+6,v=2*a.text_h+6;q||(q=a.xpos);s||(s=a.ypos);
var h=Math.max(0,Math.min(q,a.width-g)),p=Math.max(0,Math.min(s,a.height-v)),x=h+3,l=p+3,k=l+1.5*a.text_h,n=x+a.text_w;e.widgetbox(a,h,p,g,v,x,l,0,"");e.text(a,n,k,c);g=k-1.15*a.text_h;d.x(x+a.text_w+f-a.text_w);d.y(g);d.onsubmit(z(h,g-75));d.canvas()?d.render():d.canvas(a.active_canvas)})}}(d,h,a);s(l,k);h.focus();d.prompt={redraw:s,input:h}})};e.floatValidator=function(a,e){return(e!==c&&!1!==e||""!==a)&&isNaN(parseFloat(a))||!isFinite(a)?{valid:!1,reason:"Failed float validation: not a valid floating point number"}:
{valid:!0,reason:""}};e.intValidator=function(a,e){return(e===c||!1===e)&&""===a||parseFloat(a)===parseInt(a,10)&&!isNaN(a)?{valid:!0,reason:""}:{valid:!1,reason:"Failed integer validation: not a valid integer"}};e.message=function(a,c,f,g,h,p){e.onWidgetLayer(a,function(){e.render_message_box(a,c,g,h);a.widget={type:p||"ONESHOT",callback:function(c){if("mousedown"===c.type||"keydown"===c.type)a.widget=null,e.onWidgetLayer(a,function(){e.erase_window(a)})}}})};e.render_message_box=function(a,c,f,
g,h){var p=c.split(/\r\n|\r|\n/g),l=0,k;if(1===p.length){l=Math.min((a.width-6)/a.text_w-2,c.length);if(0>=l)return;for(;40<l&&2.5*a.text_h*c.length<a.height*l;)l-=5;var n=0,t=0,q=0,s=0,z=0,r=0,p=[];for(k=!0;t<c.length;){for(var z=t+l-1,r=z=Math.min(z,c.length-1),D=!1,n=t;n<=z&&!D;n++)switch(c[n]){case ",":case ";":case " ":case ":":r=n;break;case "-":case "/":r!==n-1&&(r=n);break;case "@":case "\n":case "\r":k=!1,D=!0,r=n}n===c.length&&(r=z);D?p.push(c.substring(t,r)):(n=c.substring(t,r+1).replace(/^\s+/,
""),p.push(n));t=r+1;s=Math.max(s,p[q].length)}}else for(q=0;q<p.length;q++)l=Math.min((a.width-6)/a.text_w-2,Math.max(l,p[q].length));s=p.length;6<s&&(k=!1);n=0;q=Math.max(1,a.height/a.text_h);c=Math.min(s,n+q-1);l=(l+2)*a.text_w+6;s=(c-n+1)*a.text_h+6;f||(f=a.xpos);g||(g=a.ypos);f=Math.max(a.l,Math.min(f,a.r-l));q=Math.max(a.t,Math.min(g,a.b-s));g=f+3;r=q+3;e.widgetbox(a,f,q,l,s,g,r,0,"");s=r+a.text_h/3;for(q=g+a.text_w;n<c;)s+=a.text_h,k&&(q=f+l/2-p[n].length*a.text_w/2),e.text(a,q,s,p[n],h),n++};
e.draw_round_box=function(a,e,f,g,h,p,l,k,n){a=a.active_canvas.getContext("2d");n||(n=5);a.beginPath();a.moveTo(f+n,g);a.lineTo(f+h-n,g);a.quadraticCurveTo(f+h,g,f+h,g+n);a.lineTo(f+h,g+p-n);a.quadraticCurveTo(f+h,g+p,f+h-n,g+p);a.lineTo(f+n,g+p);a.quadraticCurveTo(f,g+p,f,g+p-n);a.lineTo(f,g+n);a.quadraticCurveTo(f,g,f+n,g);a.closePath();a.lineWidth=1;a.strokeStyle=e;a.stroke();l!==c&&0<l&&(f=a.globalAlpha,a.globalAlpha=l,a.fillStyle=k?k:e,a.fill(),a.globalAlpha=f)};e.draw_box=function(a,e,f,g,h,
p,l,k){var n=a.active_canvas.getContext("2d");if("xor"!==e)n.lineWidth=1,n.strokeStyle=e,n.strokeRect(f,g,h,p);else if("undefined"===typeof Uint8ClampedArray)n.lineWidth=1,n.strokeStyle=a.fg,n.strokeRect(f,g,h,p);else{f=Math.floor(f);g=Math.floor(g);h=Math.floor(h);p=Math.floor(p);a=a.canvas.getContext("2d");for(var t=a.getImageData(f,g,h,1),q=t.data,s=0;s<t.data.length;s++)q[4*s]=255-q[4*s],q[4*s+1]=255-q[4*s+1],q[4*s+2]=255-q[4*s+2],q[4*s+3]=255;n.putImageData(t,f,g);t=a.getImageData(f,g+p,h,1);
q=t.data;for(s=0;s<t.data.length;s++)q[4*s]=255-q[4*s],q[4*s+1]=255-q[4*s+1],q[4*s+2]=255-q[4*s+2],q[4*s+3]=255;n.putImageData(t,f,g+p);t=a.getImageData(f,g,1,p);q=t.data;for(s=0;s<p;s++)q[4*s]=255-q[4*s],q[4*s+1]=255-q[4*s+1],q[4*s+2]=255-q[4*s+2],q[4*s+3]=255;n.putImageData(t,f,g);t=a.getImageData(f+h,g,1,p);q=t.data;for(s=0;s<p;s++)q[4*s]=255-q[4*s],q[4*s+1]=255-q[4*s+1],q[4*s+2]=255-q[4*s+2],q[4*s+3]=255;n.putImageData(t,f+h,g)}l!==c&&0<l&&(a=n.globalAlpha,n.globalAlpha=l,n.fillStyle=k?k:e,n.fillRect(f+
1,g+1,h-1,p-1),n.globalAlpha=a)};e.set_font=function(a,c){var e=a.canvas.getContext("2d"),f=a.wid_canvas.getContext("2d");if(a.font&&a.font.width===c)e.font=a.font.font,f.font=a.font.font;else{var g=1;do{g+=1;e.font=g+"px "+a.font_family;f.font=g+"px "+a.font_family;var h=e.measureText("M");a.text_w=h.width;a.text_h=g}while(a.text_w<c);a.font={font:g+"px "+a.font_family,width:c}}};e.textline=function(a,c,e,f,g,h){var l=a.active_canvas.getContext("2d");h||(h={});h.color||(h.color=a.fg);h.width||(h.width=
1);w(l,c,e,f,g,h,h.color,h.width)};e.tics=function(a,c,e,f){var g=1,h=a;if(c===a)return{dtic:1,dtic1:a};g=Math.abs(c-a)/e;e=Math.max(g,1E-36);e=Math.log(e)/Math.log(10);0>e?(e=Math.ceil(e),e-=1):e=Math.floor(e);g*=Math.pow(10,-e);e=Math.pow(10,e);h=g*e;f&&5<=h&&5140800>=h?(f=17.5>h?5:37.5>h?15:270>h?60:1050>h?300:2250>h?900:7200>h?3600:16200>h?10800:32400>h?21600:129600>h?43200:518400>h?86400:604800,g=Math.round(h/f)*f):g=1.75>g?e:2.25>g?2*e:3.5>g?2.5*e:7>g?5*e:10*e;0===g&&(g=1);c>=a?(f=Math.floor(0<=
a?a/g+0.995:a/g-0.005),h=f*g):(f=Math.floor(0<=a?a/g+0.005:a/g-0.995),h=f*g,g*=-1);h+g===h&&(g=c-a);return{dtic:g,dtic1:h}};e.drawaxis=function(d,f,g,h,l,p){var k=e.origin(d.origin,1,d.stk[d.level]),n=0,y=0,t=0,q=0,s=0,z=0;h=h===c?30:h;l=l===c?30:l;p.exactbox?(n=Math.floor(k.x1),y=Math.floor(k.y1),t=Math.floor(k.x2),q=Math.floor(k.y2),s=t-n,z=q-y):(n=Math.max(Math.floor(k.x1)-2,0),y=Math.max(Math.floor(k.y1)-2,0),t=Math.min(Math.floor(k.x2)+2,d.width),q=Math.min(Math.floor(k.y2)+2,d.height),s=t-n-
4,z=q-y-4);var r=d.active_canvas.getContext("2d");p.fillStyle?Array.isArray(p.fillStyle)?r.fillStyle=e.linear_gradient(d,0,0,0,q-y,p.fillStyle):r.fillStyle=p.fillStyle:r.fillStyle=d.bg;r.fillRect(n,y,t-n,q-y);p.noaxisbox||(e.textline(d,n,y,t,y),e.textline(d,t,y,t,q),e.textline(d,t,q,n,q),e.textline(d,n,q,n,y));var D={dtic:0,dtic1:0},r={dtic:0,dtic1:0};0>f?(D.dtic1=k.xmin,D.dtic=(k.xmin-k.xmax)/f):D=e.tics(k.xmin,k.xmax,f,p.xtimecode);var M=1;p.xmult?M=p.xmult:p.xtimecode||(M=e.mult(k.xmin,k.xmax));
0>g?(r.dtic1=k.ymin,r.dtic=(k.ymin-k.ymax)/g):r=e.tics(k.ymin,k.ymax,g,p.ytimecode);f=1;p.ymult?f=p.ymult:p.ytimecode||(f=e.mult(k.ymin,k.ymax));var I=!p.noxtlab;g=!p.noytlab;var O=Math.max(0,n-4*d.text_w),N=0,N=p.ontop?Math.min(d.height,Math.floor(q+1.5*d.text_h)):Math.max(d.text_h,Math.floor(y-0.5*d.text_h)),w,u;0<N&&(p.noyplab||(u=p.ylabel instanceof Function?p.ylabel(l,f):p.ylabel!==c?p.ylabel:a.label(l,f)),p.noxplab||(w=p.xlabel instanceof Function?p.ylabel(h,M):p.xlabel!==c?p.xlabel:a.label(h,
M)));w&&u?e.text(d,O,N,u+" vs "+w):w?e.text(d,O,N,w):u&&e.text(d,O,N,u);h=5.5*d.text_w;l=0;l=p.ontop?p.inside?y+1*d.text_h:y-0.2*d.text_h:p.inside?q-0.5*d.text_h:q+1*d.text_h+2;s=k.xmin!==k.xmax?s/(k.xmax-k.xmin):s/1;M=0!==M?1/M:1;w=Math.min(12,Math.round(s*D.dtic)/d.text_w);u=1;var R="";if(I)if(p.xtimecode)R=a.sec2tod(D.dtic1),u=R.length*d.text_w<(t-n)/2;else for(var J,N=D.dtic1;N<=k.xmax;N+=D.dtic){R=e.format_f(N*M,w,w/2);if(R===J){u=0;break}J=R}0===D.dtic&&(D.dtic=k.xmax-D.dtic1+1);O=0;R="";for(N=
D.dtic1;N<=k.xmax;N+=D.dtic)if(J=n+Math.round(s*(N-k.xmin))+2,!(J<n)&&(p.grid&&"y"!==p.grid?(p.gridStyle||(p.gridStyle=e.LEGACY_RENDER?{mode:"dashed",on:1,off:3}:{color:d.xwms,mode:"dashed",on:1,off:3}),e.textline(d,J,q,J,y,p.gridStyle)):(e.textline(d,J,q-2,J,q+2),e.textline(d,J,y-2,J,y+2)),I))if(u){if(R=null,p.xtimecode?J>O&&(R=a.sec2tod(N,!0),O=J+d.text_w*(R.length+1)):(R=e.format_f(N*M,w,w/2),R=A(R,!0)),R){var B=Math.round(R.length/2)*d.text_w;p.inside&&(J=Math.max(n+B,J),J=Math.min(t-B,J));0<=
J-B&&e.text(d,J-B,l,R)}}else N===D.dtic1&&(p.xtimecode?(R=a.sec2tod(N,!0),p.inside&&(J=Math.floor(Math.max(n+h,J))),e.text(d,J-h,l,R+" +\u0394 "+a.sec2tod(D.dtic))):(R=(D.dtic1*M).toString(),p.inside&&(J=Math.floor(Math.max(n+h,J))),e.text(d,J-h,l,R+" +\u0394 "+D.dtic*M)));h=p.yonright?p.inside?Math.min(t-6*d.text_w,d.width-5*d.text_w):Math.min(t+d.text_w,d.width-5*d.text_w):p.inside?Math.max(0,n+d.text_w):Math.max(0,Math.floor(n-(d.l-0.5)*d.text_w));l=0.4*d.text_h;s=k.ymin!==k.ymax?-z/(k.ymax-k.ymin):
-z/1;M=0!==f?1/f:1;z=k.ymax>=k.ymin?function(a){return a<=k.ymax}:function(a){return a>=k.ymax};for(f=r.dtic1;z(f);f+=r.dtic)J=q+Math.round(s*(f-k.ymin))-2,J>q||(p.grid&&"x"!==p.grid?(p.gridStyle||(p.gridStyle={mode:"dashed",on:1,off:3}),e.textline(d,n,J,t,J,p.gridStyle)):(e.textline(d,n-2,J,n+2,J),e.textline(d,t-2,J,t+2,J)),!g||p.inside&&(J<y+d.text_h||J>q-2*d.text_h)||(p.ytimecode?(D=a.sec2tod(f),I=J+l-d.text_h,O=D.indexOf("::"),-1!==O&&(I>y&&I<q&&e.text(d,h,I,D.substring(0,O)),O+=1),e.text(d,h,
Math.min(q,J+l),D.substring(O+1,O+6)),I=J+l+d.text_h,I>y&&I<q&&"00"!==D.substring(O+7,O+9)&&(D+=".00",e.text(d,h,I,D.substring(O+7,O+12)))):(D=e.format_f(f*M,12,6),D=A(D,p.inside),e.text(d,h,Math.min(q,J+l),D))))};e.inrect=function(a,c,e,f,g,h){return a>=e&&a<=e+g&&c>=f&&c<=f+h};var K={GBorder:3,sidelab:0,toplab:1};e.menu=function(a,f){var k=1.5*a.text_h;if(f){if(!a.widget){f.x=a.xpos;f.y=a.ypos;f.val=0;f.h=2*K.GBorder+k*f.items.length+K.toplab*(k+K.GBorder)-1;f.y=f.y-((K.toplab+Math.max(1,f.val)-
0.5)*k+(1+K.toplab)*K.GBorder)+1;for(var n=f.title.length,t=0,p=0;p<f.items.length;p++){var w=f.items[p],n=Math.max(n,w.text.length);"checkbox"===w.style&&(n+=2);"separator"===w.style&&(n+=2);w.checked&&"checkbox"!==w.style&&(t=k*p)}f.y-=t;n=(n+2)*a.text_w;f.w=2*K.GBorder+Math.abs(K.sidelab)+n-1;f.x-=f.w/2;a.menu=f;a.widget={type:"MENU",callback:function(p){var k=f;if(p===c)g(a,k);else if("mousemove"===p.type){k.drag_x!==c&&k.drag_y!==c&&2<Math.abs(a.xpos-k.drag_x)&&2<Math.abs(a.ypos-k.drag_y)&&(k.x+=
a.xpos-k.drag_x,k.y+=a.ypos-k.drag_y,k.drag_x=a.xpos,k.drag_y=a.ypos);var n=k.x+K.GBorder+Math.max(0,K.sidelab),q=k.w-2*K.GBorder-Math.abs(K.sidelab),s=1.5*a.text_h,z=k.y+K.GBorder+K.toplab*(s+K.GBorder);for(p=0;p<k.items.length;p++){var r=z+s*p,D=k.items[p];D.selected=!1;e.inrect(a.xpos,a.ypos,n,r,q,s)&&(D.selected=!0)}g(a,k)}else if("mouseup"===p.type)1===p.which?k.drag_x!==c&&k.drag_y!==c?(k.drag_x=c,k.drag_y=c):h(a,k):3===p.which&&l(a,k);else if("mousedown"===p.type)p.preventDefault(),1===p.which&&
a.xpos>k.x&&a.xpos<k.x+k.w&&a.ypos>k.y&&a.ypos<k.y+1.5*a.text_h&&(k.drag_x=a.xpos,k.drag_y=a.ypos);else if("keydown"===p.type&&a.menu)if(k=a.menu,p.preventDefault(),p=getKeyCode(p),13===p)h(a,k);else if(38===p){for(p=0;p<k.items.length;p++)if(D=k.items[p],D.selected){D.selected=!1;k.items[p-1]!==c&&(k.items[p-1].selected=!0);break}else p===k.items.length-1&&(D.selected=!0);g(a,k)}else if(40===p){for(p=0;p<k.items.length;p++)if(D=k.items[p],D.selected){D.selected=!1;k.items[p+1]!==c&&(k.items[p+1].selected=
!0);break}else p===k.items.length-1&&(k.items[0].selected=!0);g(a,k)}else if(48<=p&&57>=p||65<=p&&90>=p){p=String.fromCharCode(p).toUpperCase();k.keypresses=k.keypresses===c?p:k.keypresses+p;for(p=n=0;p<k.items.length;p++)D=k.items[p],D.selected=!1,D.text&&0===D.text.toUpperCase().indexOf(k.keypresses)&&(0===n&&(D.selected=!0),n++);0===n?(k.keypresses=c,g(a,k)):1===n?h(a,k):g(a,k)}}}}g(a,f)}};e.widgetbox=function(a,c,f,g,h,p,k,l,n,t){e.shadowbox(a,c,f,g,h,1,2,"",0.75);t&&(h=t.length,h=Math.min(h,
g/a.text_w),h=Math.max(h,1),c+=(g-h*a.text_w)/2,f+=3,e.text(a,c,f+(k-f+0.7*a.text_h)/2,t,a.xwfg));0<l&&0<n&&(f=a.active_canvas.getContext("2d"),e.LEGACY_RENDER?(f.fillStyle=a.bg,f.fillRect(p,k,l,n)):(f.save(),f.globalAlpha=0.1,f.fillStyle=a.bg,f.fillRect(p,k,l,n),f.restore()))};e.text=function(a,e,f,g,h){var p=a.active_canvas.getContext("2d");e=Math.max(0,e);f=Math.max(0,f);if(0>e||0>f)throw"On No!";p.textBaseline="bottom";p.textAlign="left";p.font=a.font.font;p.fillStyle=h===c?a.fg:h;p.fillText(g,
e,f)};e.getcolor=function(a,c,e){for(a=0;6>a&&0===c[a+1].pos;a++);for(;e>c[a].pos&&6>a;)a++;if(0===a||e>=c[a].pos)return B(C(c[a].red),C(c[a].green),C(c[a].blue));e=C((e-c[a-1].pos)/(c[a].pos-c[a-1].pos)*100);var f=255-e;return B(c[a].red/100*e+c[a-1].red/100*f,c[a].green/100*e+c[a-1].green/100*f,c[a].blue/100*e+c[a-1].blue/100*f)};e.redraw_warpbox=function(a){a.warpbox&&(a._animationFrameHandle&&cancelAnimFrame(a._animationFrameHandle),a._animationFrameHandle=requestAnimFrame(function(){E(a)}))};
e.format_g=function(a,c,f,g){Math.min(c,f+7);c=Math.abs(a).toString();var h=c.indexOf(".");-1===h&&(c+=".",h=c.length);g=0;var p=c.indexOf("e");-1!==p&&(g=parseInt(c.slice(p+1,c.length),10),c=c.slice(0,p));for(var p=Math.min(f-(c.length-h)+1,f),k=0;k<p;k++)c+="0";if(0!==a)if(1>Math.abs(a))if("0."===c.slice(0,2))for(k=2;k<c.length;k++)if("0"===c[k])g-=1;else{c="0."+c.slice(k,k+f);break}else c=c.slice(0,f+2);else h>f?(g=Math.max(0,h-1),c=c[0]+"."+c.slice(1,f+1)):c=c.slice(0,f+2);0===g?c+="    ":(f=
e.pad(Math.abs(g).toString(),2,"0"),c=0>g?c+"E-"+f:c+"E+"+f);return 0>a?"-"+c:" "+c};e.format_f=function(a,c,f){f=Math.max(Math.min(f,20),0);a=a.toFixed(f).toString();return a=e.pad(a,c+f," ")};e.pad=function(a,c,e){for(;a.length<c;)a=e+a;return a};e.legacy_shadowbox=function(d,c,f,g,h,k,l,n){for(var y=n.length,w=0,q=0,w=0,q=[],s=0;11>s;s++)q[s]={x:0,y:0};s=!(1===l||-1===l);0!==l&&0<e.GBorder&&(w=a.trunc(Math.min(g,h)/3),w=Math.max(1,Math.min(w,e.GBorder)));if(0<w){q[0].x=q[1].x=c;q[8].x=q[9].x=c+
g;q[1].y=q[8].y=f;q[0].y=q[9].y=f+h;switch(k){case e.L_ArrowLeft:q[0].y=q[1].y=f+a.trunc(h/2);c+=2;--g;break;case e.L_ArrowRight:q[8].y=q[9].y=f+a.trunc(h/2);--c;--g;break;case e.L_ArrowUp:q[1].x=q[8].x=c+a.trunc(g/2);f+=2;--h;break;case e.L_ArrowDown:q[0].x=q[9].x=c+a.trunc(g/2),--f,--h}q[2]=q[8];q[10]=q[0];c+=w;f+=w;g-=2*w;h-=2*w}q[4].x=q[5].x=c;q[3].x=q[6].x=c+g;q[3].y=q[4].y=f;q[5].y=q[6].y=f+h;switch(k){case e.L_ArrowLeft:q[4].y=q[5].y=f+a.trunc(h/2);break;case e.L_ArrowRight:q[3].y=q[6].y=f+
a.trunc(h/2);break;case e.L_ArrowUp:q[3].x=q[4].x=c+a.trunc(g/2);break;case e.L_ArrowDown:q[5].x=q[6].x=c+a.trunc(g/2)}q[7]=q[3];k=d.active_canvas.getContext("2d");0<w&&(k.fillStyle=0<l?d.xwts:d.xwbs,t(k,q.slice(0,7)),k.fillStyle=0>l?d.xwts:d.xwbs,t(k,q.slice(5,11)));s&&(k.fillStyle=d.xwbg,t(k,q.slice(3,8)));k.fillStyle=d.xwfg;k.textBaseline="alphabetic";s&&0<y&&(y=Math.min(y,a.trunc(g/d.text_w)),y=Math.max(y,1),w=c+a.trunc((g-y*d.text_w)/2),q=f+a.trunc((h+0.7*d.text_h)/2),k.fillText(n,w,q))};e.sigplot_shadowbox=
function(d,c,f,g,h,k,l,n,y){var w=d.active_canvas.getContext("2d"),q=n.length,s=0>l?d.xwts:d.xwbs;y=y||1;for(var z=[],r=0;11>r;r++)z[r]={x:0,y:0};switch(k){case e.L_ArrowLeft:case e.L_ArrowRight:case e.L_ArrowUp:case e.L_ArrowDown:z=e.chevron(k,c,f,g,h);w.fillStyle=0<l?d.xwts:d.xwbs;t(w,z.slice(0,6));break;default:e.draw_round_box(d,s,c,f,g,h,y,d.xwbg,5,d.xwbs)}w.fillStyle=d.xwfg;w.textBaseline="alphabetic";1!==l&&-1!==l&&0<q&&(q=Math.min(q,a.trunc(g/d.text_w)),q=Math.max(q,1),c+=a.trunc((g-q*d.text_w)/
2),d=f+a.trunc((h+0.7*d.text_h)/2),w.fillText(n,c,d))};e.shadowbox=e.LEGACY_RENDER?e.legacy_shadowbox:e.sigplot_shadowbox;e.chevron=function(d,c,f,g,h,k){var l=Math.min(g,h);k||(k=0.25*l);for(var n=[],t=0;6>t;t++)n[t]={x:0,y:0};var t=a.trunc((g-l)/2+l/4-k/2.828),w=a.trunc((h-l)/2+l/4-k/2.828);switch(d){case e.L_ArrowLeft:n[0].x=c+t;n[0].y=f+a.trunc(l/2);n[1].x=c+t+a.trunc(l/2);n[1].y=f;n[2].x=c+t+a.trunc(l/2+k/1.414);n[2].y=f+a.trunc(k/1.414);n[3].x=c+t+a.trunc(2*k/1.414);n[3].y=f+a.trunc(l/2);n[4].x=
c+t+a.trunc(l/2+k/1.414);n[4].y=f+h-a.trunc(k/1.414);n[5].x=c+t+a.trunc(l/2);n[5].y=f+l;break;case e.L_ArrowRight:n[0].x=c+g-t;n[0].y=f+a.trunc(l/2);n[1].x=c+g-t-a.trunc(l/2);n[1].y=f;n[2].x=c+g-t-a.trunc(l/2+k/1.414);n[2].y=f+a.trunc(k/1.414);n[3].x=c+g-t-a.trunc(2*k/1.414);n[3].y=f+a.trunc(l/2);n[4].x=c+g-t-a.trunc(l/2+k/1.414);n[4].y=f+h-a.trunc(k/1.414);n[5].x=c+g-t-a.trunc(l/2);n[5].y=f+l;break;case e.L_ArrowUp:n[0].x=c+a.trunc(l/2);n[0].y=f+w;n[1].x=c;n[1].y=f+w+a.trunc(l/2);n[2].x=c+a.trunc(k/
1.414);n[2].y=f+w+a.trunc(l/2+k/1.414);n[3].x=c+a.trunc(l/2);n[3].y=f+w+a.trunc(2*k/1.414);n[4].x=c+g-a.trunc(k/1.414);n[4].y=f+w+a.trunc(l/2+k/1.414);n[5].x=c+l;n[5].y=f+w+a.trunc(l/2);break;case e.L_ArrowDown:n[0].x=c+a.trunc(l/2),n[0].y=f+h-w,n[1].x=c,n[1].y=f+h-w-a.trunc(l/2),n[2].x=c+a.trunc(k/1.414),n[2].y=f+h-w-a.trunc(l/2+k/1.414),n[3].x=c+a.trunc(l/2),n[3].y=f+h-w-a.trunc(2*k/1.414),n[4].x=c+g-a.trunc(k/1.414),n[4].y=f+h-w-a.trunc(l/2+k/1.414),n[5].x=c+l,n[5].y=f+h-w-a.trunc(l/2)}return n};
e.ifevent=function(a,e){a.button_press=0;a.button_release=0;a.state_mask=0;var f=e.target.getBoundingClientRect(),g=e.offsetX===c?e.pageX-f.left-window.scrollX:e.offsetX,f=e.offsetX===c?e.pageY-f.top-window.scrollY:e.offsetY;switch(e.type){case "mousedown":a.xpos=H(g,0,a.width);a.ypos=H(f,0,a.height);switch(e.which){case 1:a.button_press=1;break;case 2:a.button_press=2;break;case 3:a.button_press=3;break;case 4:a.button_press=4;break;case 5:a.button_press=5}break;case "mouseup":switch(a.xpos=H(g,
0,a.width),a.ypos=H(f,0,a.height),e.which){case 1:a.button_release=1;break;case 2:a.button_release=2;break;case 3:a.button_release=3;break;case 4:a.button_release=4;break;case 5:a.button_release=5}}};e.scroll_real2pix=function(a){if(0===a.range)return{s1:a.a1,sw:a.a2-a.a1};var c,e;c=(a.a2-a.a1)/a.trange;e=a.a1+Math.floor(0.5+(a.smin-a.tmin)*c);c=e+Math.floor(0.5+a.srange*c);e=e>a.a2-a.swmin?a.a2-a.swmin:Math.max(e,a.a1);c=c<a.a1+a.swmin?a.a1+a.swmin:Math.min(c,a.a2);return{s1:e,sw:Math.max(c-e,a.swmin)}};
e.redrawScrollbar=function(c,f,g){var h,k,l,n,t,w,u,q,s=f.active_canvas.getContext("2d");k=e.scroll_real2pix(c);u=k.s1;q=k.sw;w=u;k=c.x;l=c.y;n=c.w;t=c.h;c.origin&1?(h=l+t/2,c.origin&2&&(w=n-w-q),g===e.XW_DRAW&&(g=c.arrow,e.shadowbox(f,k,l,g,t-1,e.L_ArrowLeft,2,"",0),e.shadowbox(f,k+n-g,l,g-1,t,e.L_ArrowRight,2,"",0)),e.LEGACY_RENDER?(e.draw_line(f,f.fg,k+c.a1,h,k+c.a2,h),e.shadowbox(f,k+w,l,q+1,t,1,2,"",0)):(g=s.createLinearGradient(k+c.a1,0,k+c.a2,0),g.addColorStop(0,f.xwbs),g.addColorStop(0.5,
f.xwts),g.addColorStop(1,f.xwbs),e.draw_line(f,g,k+c.a1,h,k+c.a2,h,1),g=s.createLinearGradient(0,l,0,l+t),g.addColorStop(0.1,f.xwts),g.addColorStop(0.75,f.xwbs),e.draw_round_box(f,f.xwbg,k+w,l,q+1,t,1,g,8,f.xwbs))):(h=k+a.trunc(n/2),2>=c.origin&&(w=t-w-q),g===e.XW_DRAW&&(g=c.arrow,e.shadowbox(f,k,l,n-1,g,e.L_ArrowUp,2,"",0),e.shadowbox(f,k,l+t-g,n-1,g,e.L_ArrowDown,2,"",0)),e.LEGACY_RENDER?(e.draw_line(f,f.fg,h,l+c.a1,h,l+c.a2),e.shadowbox(f,k,l+w,n,q+1,1,2,"",0)):(g=s.createLinearGradient(0,l+c.a1,
0,l+c.a2),g.addColorStop(0,f.xwbs),g.addColorStop(0.5,f.xwts),g.addColorStop(1,f.xwbs),e.draw_line(f,g,h,l+c.a1,h,l+c.a2,1),g=s.createLinearGradient(k,0,k+n,0),g.addColorStop(0.1,f.xwts),g.addColorStop(0.75,f.xwbs),e.draw_round_box(f,f.xwbg,k-1,l+w,n,q+1,1,g,8,f.xwbs)));c.s1=u;c.sw=q};e.real_to_pixel=function(a,c,f,g){a=e.origin(a.origin,4,a.stk[a.level]);if(0===a.xscl||0===a.yscl)return{x:0,y:0};var h=a.x1,k=a.y1,l=a.xmin,n=1/a.xscl,t=a.ymin,w=1/a.yscl,q=!1,s=!1;null!==c&&(q=c>a.xmax||c<a.xmin,g&&
(c=Math.min(c,a.xmax),c=Math.max(c,a.xmin)),c=Math.round((c-l)*n)+h);null!==f&&(s=f>a.ymin||f<a.ymax,g&&(f=Math.min(f,a.ymin),f=Math.max(f,a.ymax)),f=Math.round((f-t)*w)+k);c=Math.round(c);f=Math.round(f);return{x:c,y:f,clipped_x:q,clipped_y:s,clipped:q||s}};e.pixel_to_real=function(a,c,e){c=Math.min(a.r,Math.max(a.l,c));e=Math.min(a.b,Math.max(a.t,e));var f=a.level;return{x:2!==a.origin&&3!==a.origin?a.stk[f].xmin+(c-a.stk[f].x1)*a.stk[f].xscl:a.stk[f].xmin+(a.stk[f].x2-c)*a.stk[f].xscl,y:2<a.origin?
a.stk[f].ymin+(e-a.stk[f].y1)*a.stk[f].yscl:a.stk[f].ymin+(a.stk[f].y2-e)*a.stk[f].yscl}};e.colormap=function(a,c,e){a.pixel=Array(e);for(var f=Array(e),g=100/(Math.max(2,e)-1),h=0;h<e;h++)f[h]=g*h+0.5;for(g=0;6>g&&0===c[g+1].pos;g++);for(h=0;h<e;h++){a.pixel[h]=0;for(var k=f[h];6>g&&Math.floor(k)>c[g].pos;)g++;if(0===g||k>=c[g].pos)a.pixel[h]={red:C(c[g].red),green:C(c[g].green),blue:C(c[g].blue)};else{var k=C((k-c[g-1].pos)/(c[g].pos-c[g-1].pos)*100),l=255-k;a.pixel[h]={red:c[g].red/100*k+c[g-1].red/
100*l,green:c[g].green/100*k+c[g-1].green/100*l,blue:c[g].blue/100*k+c[g-1].blue/100*l}}}};e.colorbar=function(a,c,f,g,h){for(var k=1;k<h;k++)e.draw_line(a,Math.floor(a.pixel.length*(k-1)/h),c,f+h-k,c+g,f+h-k);e.draw_box(a,a.fg,c+0.5,f,g,h)};var W="undefined"===typeof Uint8ClampedArray?Q:S;e.shift_image_rows=function(a,c,e){a=new Uint32Array(c);0<e?(e*=c.width,a.set(a.subarray(0,a.length-e),e)):0>e&&(e=Math.abs(e)*c.width,a.set(a.subarray(e)));return c};e.update_image_row=function(a,c,e,f,g,h,k){f=
new Uint32Array(c,f*c.width*4,c.width);var l=1;h!==g&&(l=a.pixel.length/Math.abs(h-g));h=Math.max(1,e.length/c.width);for(var n=0;n<c.width;n++){var t=Math.floor(n*h),q=e[t];if(1<h)if(1===k){for(var s=1;s<h;s++)q+=e[t+s];q/=h}else if(2===k)for(s=1;s<h;s++)q=Math.min(q,e[t+s]);else if(3===k)for(s=1;s<h;s++)q=Math.max(q,e[t+s]);else if(4===k)q=e[n];else if(5===k)for(s=1;s<h;s++)q=Math.max(Math.abs(q),Math.abs(e[t+s]));t=Math.floor((q-g)*l);t=Math.max(0,Math.min(a.pixel.length-1,t));(t=a.pixel[t])&&
(f[n]=-16777216|t.blue<<16|t.green<<8|t.red)}return f};e.create_image=function(c,f,g,h,k,l,n,t){c.active_canvas.getContext("2d");c.pixel&&0!==c.pixel.length||(a.log.warn("COLORMAP not initialized, defaulting to foreground"),e.colormap(c,a.Mc.colormap[1].colors,16));var w=1;n!==l&&(w=c.pixel.length/Math.abs(n-l));h=Math.ceil(h);k=Math.ceil(k);n=new ArrayBuffer(h*k*4);n.width=h;n.height=k;var u=Math.max(1,g/h),q=new Uint32Array(n);if(f)for(var s=0;s<q.length;s++){var z=(3===c.origin||4===c.origin?Math.floor(s/
h):k-Math.floor(s/h)-1)*g+Math.floor((1===c.origin||4===c.origin?Math.floor(s%h):h-Math.floor(s%h)-1)*u),r=f[z];if(1<u)if(1===t){for(var D=1;D<u;D++)r+=f[z+D];r/=u}else if(2===t)for(D=1;D<u;D++)r=Math.min(r,f[z+D]);else if(3===t)for(D=1;D<u;D++)r=Math.max(r,f[z+D]);else if(4===t)r=f[z];else if(5===t)for(D=1;D<u;D++)r=Math.max(Math.abs(r),Math.abs(f[z+D]));z=Math.floor((r-l)*w);z=Math.max(0,Math.min(c.pixel.length-1,z));(z=c.pixel[z])&&(q[s]=-16777216|z.blue<<16|z.green<<8|z.red)}return n};e.put_image=
function(c,f,g,h,k,l,n,t,w,u,q){w=c.active_canvas.getContext("2d");c.pixel&&0!==c.pixel.length||(a.log.warn("COLORMAP not initialized, defaulting to foreground"),e.colormap(c,a.Mc.colormap[1].colors,16));g=Math.floor(0<k?g*k:-k);h=Math.floor(h*l);l=new ArrayBuffer(g*h*4);l.width=g;l.height=h;k=new Uint32Array(l);for(var s=0;s<k.length;s++){var z=Math.max(0,f[s]),z=Math.min(c.pixel.length-1,z);(z=c.pixel[z])&&(k[s]=-16777216|z.blue<<16|z.green<<8|z.red)}W(c,w,l,u,q,n,t,g,h);return l};e.draw_image=
function(a,c,f,g,h,k,l,n){var t=Math.max(f,a.stk[a.level].xmin),w=Math.min(h,a.stk[a.level].xmax),q=Math.max(g,a.stk[a.level].ymin),s=Math.min(k,a.stk[a.level].ymax);if(!(1>=c.width||0===Math.abs(h-f)||1>=c.height||0===Math.abs(k-g))){h=c.width/(h-f);var z=c.height/(k-g),t=Math.floor(t*h)/h,w=Math.ceil(w*h)/h,q=Math.floor(q*z)/z,s=Math.ceil(s*z)/z,r,D,M,I,O,u;1===a.origin?(M=Math.max(0,Math.floor((k-s)*z)),u=Math.min(c.height-M,Math.floor((s-q)*z)),I=Math.max(0,Math.floor((t-f)*h)),O=Math.min(c.width-
I,Math.floor((w-t)*h)),r=e.real_to_pixel(a,t,s),D=e.real_to_pixel(a,w,q)):2===a.origin?(M=Math.max(0,Math.floor((k-s)*z)),u=Math.min(c.height-M,Math.floor((s-q)*z)),I=Math.max(0,Math.ceil((t-f)*h)),O=Math.min(c.width-I,Math.floor((w-t)*h)),r=e.real_to_pixel(a,w,s),D=e.real_to_pixel(a,t,q)):3===a.origin?(M=Math.max(0,Math.ceil((q-g)*z)),u=Math.min(c.height-M,Math.floor((s-q)*z)),I=Math.max(0,Math.ceil((t-f)*h)),O=Math.min(c.width-I,Math.floor((w-t)*h)),r=e.real_to_pixel(a,w,q),D=e.real_to_pixel(a,
t,s)):4===a.origin&&(M=Math.max(0,Math.ceil((q-g)*z)),u=Math.min(c.height-M,Math.floor((s-q)*z)),I=Math.max(0,Math.floor((t-f)*h)),O=Math.min(c.width-I,Math.floor((w-t)*h)),r=e.real_to_pixel(a,t,q),D=e.real_to_pixel(a,w,s));f=D.x-r.x;D=D.y-r.y;O=Math.max(1,O);u=Math.max(1,u);"number"===typeof n&&(n=(a.r-a.l)/O<=n);g=a.active_canvas.getContext("2d");g.save();g.beginPath();g.rect(a.l,a.t,a.r-a.l,a.b-a.t);g.clip();W(a,g,c,l,n,r.x,r.y,f,D,I,M,O,u);g.restore()}}})(window.mx,window.m);
(function(e,a,c,u){e.Layer1D=function(a){this.plot=a;this.ybuf=this.xbuf=u;this.xmax=this.xmin=this.imin=this.xdelta=this.xstart=this.offset=0;this.name="";this.cx=!1;this.hcb=u;this.size=0;this.display=!0;this.color=0;this.line=3;this.thick=1;this.symbol=0;this.radius=3;this.ysub=this.xsub=this.skip=0;this.modified=this.xdata=!1;this.preferred_origin=this.opacity=1;this.pointbufsize=0;this.ypoint=this.xpoint=this.yptr=this.xptr=null;this.options={}};e.Layer1D.prototype={init:function(a,g){this.hcb=
a;this.hcb.buf_type="D";this.ybufn=this.xbufn=this.size=this.offset=0;this.hcb.pipe?2===a["class"]&&(c.force1000(a),this.size=a.subsize):2===a["class"]?(c.force1000(a),this.size=a.subsize):this.size=a.size;g.framesize&&(this.size=g.framesize);if(!this.size)throw"1D layer could not determine appropriate size";2>=a["class"]&&(this.xsub=-1,this.ysub=1,this.cx="C"===a.format[0]);this.skip=1;this.cx&&(this.skip=2);this.xstart=a.xstart;this.xdelta=a.xdelta;var h=a.xstart+a.xdelta*(this.size-1);this.xmin=
Math.min(a.xstart,h);this.xmax=Math.max(a.xstart,h);this.xlab=a.xunits;this.ylab=a.yunits;if(this.hcb.pipe){this.drawmode="scrolling";this.position=0;this.tle=g.tl;this.ybufn=this.size*Math.max(this.skip*e.PointArray.BYTES_PER_ELEMENT,e.PointArray.BYTES_PER_ELEMENT);this.ybuf=new ArrayBuffer(this.ybufn);var l=this;c.addPipeWriteListener(this.hcb,function(){l._onpipewrite()})}},_onpipewrite:function(){var a=new e.PointArray(this.ybuf),g=this.tle;if(g===u)g=Math.floor(c.pavail(this.hcb))/this.hcb.spa;
else if(c.pavail(this.hcb)<g*this.hcb.spa)return;var h=g*this.hcb.spa;if("lefttoright"===this.drawmode)this.position=0,a.set(a.subarray(0,this.size-h),h);else if("righttoleft"===this.drawmode)this.position=this.size-g,a.set(a.subarray(h),0);else if("scrolling"!==this.drawmode)throw"Invalid draw mode";g=Math.min(g,this.size-this.position);0!==c.grabx(this.hcb,a,g*this.hcb.spa,this.position*this.hcb.spa)&&(this.position=(this.position+g)%this.size,0!==this.plot._Gx.autol&&this.plot.rescale())},get_data:function(a,
g){var h=this.plot._Gx,l=this.hcb,k=this.skip,n;n=2===l["class"]?l.subsize:l.size;var t=0,k=0;h.index?(t=Math.floor(a),k=Math.floor(g+0.5)):0<=l.xdelta?(t=Math.floor((a-l.xstart)/l.xdelta)-1,k=Math.floor((g-l.xstart)/l.xdelta+0.5)):(t=Math.floor((g-l.xstart)/l.xdelta)-1,k=Math.floor((a-l.xstart)/l.xdelta+0.5));t=Math.max(0,t);k=Math.min(n,k);h=Math.max(0,Math.min(k-t+1,h.bufmax));0>l.xdelta&&(t=k-h+1);if(!(t>=this.imin&&t+h<=this.imin+this.size&&this.ybuf!==u||this.modified)&&2>=l["class"]){n=this.offset+
t;k=this.skip;this.ybufn=h*Math.max(k*e.PointArray.BYTES_PER_ELEMENT,e.PointArray.BYTES_PER_ELEMENT);if(this.ybuf===u||this.ybuf.byteLength<this.ybufn)this.ybuf=new ArrayBuffer(this.ybufn);k=new e.PointArray(this.ybuf);h=c.grab(l,k,n,h);this.imin=t;this.xstart=l.xstart+t*this.xdelta;this.size=h}},change_settings:function(a){if(a.index!==u)if(a.index)this.xmin=this.xdelta=this.xstart=1,this.xmax=this.size;else{this.xstart=this.hcb.xstart+this.imin*this.xdelta;this.xdelta=this.hcb.xdelta;var c=this.hcb.xstart+
this.hcb.xdelta*(this.size-1);this.xmin=Math.min(this.hcb.xstart,c);this.xmax=Math.max(this.hcb.xstart,c)}a.drawmode!==u&&(this.drawmode=a.drawmode,this.position=0,this.ybufn=this.size*Math.max(this.skip*e.PointArray.BYTES_PER_ELEMENT,e.PointArray.BYTES_PER_ELEMENT),this.ybuf=new ArrayBuffer(this.ybufn))},reload:function(a,e){if(this.hcb.pipe)throw"reload cannot be used with pipe, use push instead";var h=this.hcb.dview.length!==a.length||e;if(e)for(var l in e)if(this.hcb[l]=e[l],"xstart"===l||"xdelta"===
l)h=!0;this.hcb.setData(a);this.imin=0;this.xstart=u;this.size=0;l=this.xmin;var k=this.xmax;h&&(2===this.hcb["class"]&&c.force1000(this.hcb),h=this.hcb.xstart+this.hcb.xdelta*(this.hcb.size-1),this.xmin=Math.min(this.hcb.xstart,h),this.xmax=Math.max(this.hcb.xstart,h),this.xdelta=this.hcb.xdelta,this.xstart=this.hcb.xstart,k=l=u);return{xmin:l,xmax:k}},push:function(a,g,h){if(g){for(var l in g)this.hcb[l]=g[l],"type"===l&&(this.hcb["class"]=g[l]/1E3);g.subsize&&2===this.hcb["class"]&&(c.force1000(this.hcb),
this.size=this.hcb.subsize,this.position=null,this.ybufn=this.size*Math.max(this.skip*e.PointArray.BYTES_PER_ELEMENT,e.PointArray.BYTES_PER_ELEMENT),this.ybuf=new ArrayBuffer(this.ybufn));l=this.hcb.xstart+this.hcb.xdelta*(this.hcb.size-1);this.xmin=Math.min(this.hcb.xstart,l);this.xmax=Math.max(this.hcb.xstart,l);this.xdelta=this.hcb.xdelta;this.xstart=this.hcb.xstart}c.filad(this.hcb,a,h);return g?!0:!1},prep:function(a,g){var h=this.plot._Gx,l=this.plot._Mx,k=Math.ceil(this.size),n=this.skip;if(0===
k)return{num:0,start:0,end:0};k*e.PointArray.BYTES_PER_ELEMENT>this.pointbufsize&&(this.pointbufsize=k*e.PointArray.BYTES_PER_ELEMENT,this.xptr=new ArrayBuffer(this.pointbufsize),this.yptr=new ArrayBuffer(this.pointbufsize),this.xpoint=new e.PointArray(this.xptr),this.ypoint=new e.PointArray(this.yptr));var t=new e.PointArray(this.ybuf),u=this.xmin,C=this.xmax,B,A,E;if(5===h.cmode||0<this.xsub)0>=k?(u=h.panxmin,C=h.panxmax):5!==h.cmode?this.xpoint=new e.PointArray(this.xbuf):this.cx?c.vmov(t,n,this.xpoint,
1,k):0!==this.line?(E=c.vmxmn(t,k),this.xpoint[0]=E.smax,this.xpoint[1]=E.smin,B=0,k=A=2):this.xpoint=t,0<k&&(E=c.vmxmn(this.xpoint,k),C=E.smax,u=E.smin,B=0,A=k);else if(0<k){E=this.xstart;var H=this.xdelta;A=k;h.index?(B=0,A=k-1):0<=H?(B=Math.max(1,Math.min(A,Math.round((a-E)/H)))-1,A=Math.max(1,Math.min(A,Math.round((g-E)/H)+2))-1):(B=Math.max(1,Math.min(A,Math.round((g-E)/H)-1))-1,A=Math.max(1,Math.min(A,Math.round((a-E)/H)+2))-1);k=A-B+1;0>k&&(c.log.debug("Nothing to plot"),k=0);t=(new e.PointArray(this.ybuf)).subarray(B*
n);E+=H*B;for(var Q=0;Q<k;Q++)this.xpoint[Q]=h.index?this.imin+Q+1:E+Q*H}h.panxmin>h.panxmax?(h.panxmin=u,h.panxmax=C):(h.panxmin=Math.min(h.panxmin,u),h.panxmax=Math.max(h.panxmax,C));if(0>=k)return c.log.debug("Nothing to plot"),{num:k,start:B,end:A};if(this.cx)1===h.cmode?c.cvmag(t,this.ypoint,k):2===h.cmode?25===h.plab?(c.cvpha(t,this.ypoint,k),c.vsmul(this.ypoint,1/(2*Math.PI),this.ypoint,k)):24!==h.plab?c.cvpha(t,this.ypoint,k):c.cvphad(t,this.ypoint,k):3===h.cmode?c.vmov(t,n,this.ypoint,1,
k):6<=h.cmode?c.cvmag2(t,this.ypoint,k):4<=h.cmode&&c.vmov(t.subarray(1),n,this.ypoint,1,k);else if(5===h.cmode)c.vfill(this.ypoint,0,k);else if(1===h.cmode||6<=h.cmode)for(Q=0;Q<k;Q++)this.ypoint[Q]=Math.abs(t[Q]);else for(Q=0;Q<k;Q++)this.ypoint[Q]=t[Q];6<=h.cmode&&(c.vlog10(this.ypoint,h.dbmin,this.ypoint),u=10,7===h.cmode&&(u=20),0<h.lyr.length&&h.lyr[0].cx&&(u/=2),c.vsmul(this.ypoint,u,this.ypoint));E=c.vmxmn(this.ypoint,k);C=E.smax;u=E.smin;n=C-u;0>n&&(C=u,u=C+n,n=-n);1E-20>=n?(u-=1,C+=1):(u-=
0.02*n,C+=0.02*n);0===l.level&&(h.panymin>h.panymax?(h.panymin=u,h.panymax=C):(h.panymin=Math.min(h.panymin,u),h.panymax=Math.max(h.panymax,C)),1<h.autol&&(u=1/Math.max(h.autol,1),h.panymin=h.panymin*u+l.stk[0].ymin*(1-u),h.panymax=h.panymax*u+l.stk[0].ymax*(1-u)));return{num:k,start:B,end:A}},draw:function(){var c=this.plot._Mx,g=this.plot._Gx,h=this.color,l=this.symbol,k=this.radius,n=0,t={};t.fillStyle=g.fillStyle;this.options&&(t.highlight=this.options.highlight,t.noclip=this.options.noclip);
0===this.line?n=0:(n=1,0<this.thick?n=this.thick:0>this.thick&&(n=Math.abs(this.thick),t.dashed=!0),1===this.line&&(t.vertsym=!0),2===this.line&&(t.horzsym=!0));var u=g.segment&&5!==g.cmode&&0<this.xsub&&!0,C=this.xdelta,B,A;this.xdata?(B=this.xmin,A=this.xmax):(B=Math.max(this.xmin,c.stk[c.level].xmin),A=Math.min(this.xmax,c.stk[c.level].xmax),B>=A&&(g.panxmin=Math.min(g.panxmin,this.xmin),g.panxmax=Math.max(g.panxmax,this.xmax)));if(!g.all){var E=(g.bufmax-1)*C;-0<=E?A=Math.min(A,B+E):B=Math.max(B,
A+E)}if(0!==n||0!==l){for(;B<A;)this.hcb.pipe||this.get_data(B,A),E=this.prep(B,A),0<E.num&&!u&&a.trace(c,h,new e.PointArray(this.xptr),new e.PointArray(this.yptr),E.num,E.start,1,n,l,k,t),g.all?0===this.size?B=A:g.index?B+=E.num:0<=C?B+=this.size*C:A+=this.size*C:B=A;this.position&&"scrolling"===this.drawmode&&(g=a.real_to_pixel(c,this.position*this.xdelta,0),g.x>c.l&&g.x<c.r&&a.draw_line(c,"white",g.x,c.t,g.x,c.b))}},add_highlight:function(a){this.options.highlight||(this.options.highlight=[]);
a instanceof Array?this.options.highlight.push.apply(this.options.highlight,a):this.options.highlight.push(a);this.plot.refresh()},remove_highlight:function(a){if(this.options.highlight){for(var c=this.options.highlight.length;c--;)a!==this.options.highlight[c]&&a!==this.options.highlight[c].id||this.options.highlight.splice(c,1);this.plot.refresh()}},get_highlights:function(){return this.options.highlight?this.options.highlight.slice(0):[]},clear_highlights:function(){this.options.highlight&&(this.options.highlight=
u,this.plot.refresh())}};var n=[0,53,27,80,13,40,67,93,7,60,33,87,20,47,73,100];e.Layer1D.overlay=function(f,g,h){var l=f._Gx,k=f._Mx;2===g["class"]&&c.force1000(g);g.buf_type="D";var w=1;2===g["class"]&&0<g.size&&(w=Math.min(g.size/g.subsize,16-l.lyr.length));var t=h.name;delete h.name;for(var G=0;G<w;G++){var C=new e.Layer1D(f);C.init(g,h);C.color=a.getcolor(k,c.Mc.colormap[3].colors,n[l.lyr.length%n.length]);2===g["class"]?(t!==u&&(Array.isArray(t)?C.name=t[G]:(C.name=t,C.name=C.name+"."+a.pad((G+
1).toString(),3,"0"))),C.name||(C.name=g.file_name?c.trim_name(g.file_name):"layer_"+l.lyr.length,C.name=C.name+"."+a.pad((G+1).toString(),3,"0")),C.offset=G*g.subsize):(C.name=t!==u?t:g.file_name?c.trim_name(g.file_name):"layer_"+l.lyr.length,C.offset=0);for(var B in h)C[B]!==u&&(C[B]=h[B]);f.add_layer(C)}}})(window.sigplot=window.sigplot||{},mx,m);
(function(e,a,c,u){e.Layer2D=function(a){this.plot=a;this.xmax=this.xmin=this.imin=this.ydelta=this.ystart=this.xdelta=this.xstart=this.offset=0;this.name="";this.cx=!1;this.hcb=u;this.display=!0;this.color=0;this.line=3;this.thick=1;this.symbol=0;this.radius=3;this.ysub=this.xsub=this.skip=0;this.modified=this.xdata=!1;this.preferred_origin=4;this.opacity=1;this.lpb=u;this.yc=1;this.options={}};e.Layer2D.prototype={init:function(a){var e=this.plot._Gx,g=this.plot._Mx;this.hcb=a;this.hcb.buf_type=
"D";if(this.hcb.pipe){var h=this;this.frame=this.position=0;this.lps=this.hcb.lps||Math.ceil(Math.max(1,g.b-g.t));c.addPipeWriteListener(this.hcb,function(){h._onpipewrite()})}else this.lps=this.hcb.lps||Math.ceil(a.size);this.ybufn=this.xbufn=this.offset=0;this.drawmode="scrolling";2>=a["class"]&&(this.xsub=-1,this.ysub=1,this.cx="C"===a.format[0]);this.skip=1;this.cx&&(this.skip=2);e.index?(this.xmin=this.xdelta=this.xstart=1,this.xmax=a.subsize,this.ymin=this.ydelta=this.ystart=1,this.ymax=this.size):
(this.xstart=a.xstart,this.xdelta=a.xdelta,e=a.xstart+a.xdelta*(a.subsize-1),this.xmin=Math.min(a.xstart,e),this.xmax=Math.max(a.xstart,e),this.ystart=a.ystart,this.ydelta=a.ydelta,e=a.ystart+a.ydelta*(this.lps-1),this.ymin=Math.min(a.ystart,e),this.ymax=Math.max(a.ystart,e));this.xframe=this.hcb.subsize;this.yframe=this.lps*this.hcb.subsize/this.xframe;0===this.lpb&&(this.lpb=this.yframe);if(!this.lpb||0>=this.lpb)this.lpb=16;this.lpb=Math.max(1,this.lpb/this.yc)*this.yc;this.xlab=a.xunits;this.ylab=
a.yunits},_onpipewrite:function(){var n=this.plot._Gx,f=this.plot._Mx;if(!(c.pavail(this.hcb)<this.hcb.subsize*this.hcb.spa)){"scrolling"!==this.drawmode&&(this.hcb.ystart+=this.hcb.ydelta,this.ystart=this.hcb.ystart,this.ymin=this.hcb.ystart-this.hcb.ydelta*this.lps,this.ymax=this.hcb.ystart);if("falling"===this.drawmode)this.position=0,this.img&&a.shift_image_rows(f,this.img,1);else if("rising"===this.drawmode)this.position=this.lps-1,this.img&&a.shift_image_rows(f,this.img,-1);else if("scrolling"===
this.drawmode)this.position>=this.lps&&(this.position=0);else throw"Invalid draw mode";if(0===c.grabx(this.hcb,this.buf,this.hcb.subsize*this.hcb.spa))c.log.error("Internal error");else{var g=new e.PointArray(this.hcb.subsize);this.cx?1===n.cmode?c.cvmag(this.buf,g,g.length):2===n.cmode?25===n.plab?(c.cvpha(this.buf,g,g.length),c.vsmul(g,1/(2*Math.PI),g,g.length)):24!==n.plab?c.cvpha(this.buf,g,g.length):c.cvphad(this.buf,g,g.length):3===n.cmode?c.vmov(this.buf,this.skip,g,1,g.length):4===n.cmode?
c.vmov(this.buf.subarray(1),this.skip,g,1,g.length):5===n.cmode?c.vfill(g,0,g.length):6===n.cmode?c.cvmag2logscale(this.buf,n.dbmin,10,g):7===n.cmode&&c.cvmag2logscale(this.buf,n.dbmin,20,g):1===n.cmode?c.vabs(this.buf,g):2===n.cmode?c.vfill(g,0,g.length):3===n.cmode?c.vmov(this.buf,this.skip,g,1,g.length):4===n.cmode?c.vfill(g,0,g.length):5===n.cmode?c.vfill(g,0,g.length):6===n.cmode?c.vlogscale(this.buf,n.dbmin,10,g):7===n.cmode&&c.vlogscale(this.buf,n.dbmin,20,g);for(var h=g[0],l=g[0],k=0;k<g.length;k++)g[k]<
h&&(h=g[k]),g[k]>l&&(l=g[k]);var w,t;1===n.autol?(w=h,t=l):1<n.autol?(k=1/Math.max(n.autol,1),w=n.zmin*k+h*(1-k),t=n.zmax*k+l*(1-k)):0>n.autol&&(k=1/Math.max(5,1),w=n.zmin*k+h*(1-k),t=n.zmax*k+l*(1-k));0!==(n.autoz&1)&&(n.zmin=w);0!==(n.autoz&2)&&(n.zmax=t);this.img&&a.update_image_row(f,this.img,g,this.position,n.zmin,n.zmax,n.xcompression);this.frame+=1;"scrolling"===this.drawmode&&(this.position=(this.position+1)%this.lps);0===f.level&&(n.panymin=this.ymin,n.panymax=this.ymax,f.stk[0].ymin=this.ymin,
f.stk[0].ymax=this.ymax)}}},get_data:function(){var a=this.hcb;this.buf||(this.hcb.pipe?(this.buf=this.hcb.createArray(null,0,this.hcb.subsize*this.hcb.spa),this.zbuf=new e.PointArray(this.hcb.subsize)):(this.buf=this.hcb.createArray(null,0,this.lps*this.hcb.subsize*this.hcb.spa),this.zbuf=new e.PointArray(this.lps*this.hcb.subsize)));this.hcb.pipe||c.grab(a,this.buf,0,a.subsize)},get_z:function(a,c){return this.zbuf[Math.floor(c/this.hcb.ydelta)*this.hcb.subsize+Math.floor(a/this.hcb.xdelta)]},change_settings:function(a){var c=
this.plot._Gx;a.cmode!==u&&(this.img=u,0!==(c.autoz&1)&&(c.zmin=u),0!==(c.autoz&2)&&(c.zmax=u));if(a.zmin!==u||a.zmax!==u||a.autoz!==u)this.img=u;a.cmap!==u&&(this.img=u);a.drawmode!==u&&(this.drawmode=a.drawmode,this.frame=this.position=0,this.hcb.pipe?(this.buf=this.hcb.createArray(null,0,this.hcb.subsize*this.hcb.spa),this.zbuf=new e.PointArray(this.hcb.subsize)):(this.buf=this.hcb.createArray(null,0,this.lps*this.hcb.subsize*this.hcb.spa),this.zbuf=new e.PointArray(this.lps*this.hcb.subsize)),
this.img=u,this.preferred_origin="falling"===this.drawmode?this.plot._Mx.origin=1:this.plot._Mx.origin=4)},push:function(a,f,g){var h=!1,l=null;if(f){f.timestamp&&(l=f.timestamp,delete f.timestamp);f.subsize&&f.subsize!==this.hcb.subsize&&(this.hcb.subsize=f.subsize,this.hcb.pipe?(this.buf=this.hcb.createArray(null,0,this.hcb.subsize*this.hcb.spa),this.zbuf=new e.PointArray(this.hcb.subsize)):(this.buf=this.hcb.createArray(null,0,this.lps*this.hcb.subsize*this.hcb.spa),this.zbuf=new e.PointArray(this.lps*
this.hcb.subsize)),h=!0);for(var k in f)this.hcb[k]!==f[k]&&(this.hcb[k]=f[k],"type"===k&&(this.hcb["class"]=f[k]/1E3),h=!0);f.lps&&(this.lps=f.lps);h&&(f=this.hcb.xstart+this.hcb.xdelta*(this.hcb.subsize-1),this.xmin=Math.min(this.hcb.xstart,f),this.xmax=Math.max(this.hcb.xstart,f),this.xdelta=this.hcb.xdelta,this.xstart=this.hcb.xstart,this.ystart=this.hcb.ystart,this.ydelta=this.hcb.ydelta,f=this.hcb.ystart+this.hcb.ydelta*(this.lps-1),this.ymin=Math.min(this.hcb.ystart,f),this.ymax=Math.max(this.hcb.ystart,
f))}1!==this.hcb.yunits&&4!==this.hcb.yunits||this.hcb.timecode||!l||(this.hcb.timecode=c.j1970toj1950(l),this.hcb.ystart=0,h=!0);c.filad(this.hcb,a,g);return h},prep:function(e,f){var g=this.plot._Gx,h=this.plot._Mx,l=this.lps,k=this.xmin,w=this.xmax,t,G=this.hcb.subsize;0<g.xcompression&&(G=Math.ceil(h.r-h.l));if(this.hcb.pipe)g.panxmin>g.panxmax?(g.panxmin=k,g.panxmax=w):(g.panxmin=Math.min(g.panxmin,k),g.panxmax=Math.max(g.panxmax,w)),g.panymin>g.panxmax?(g.panymin=this.ymin,g.panymax=this.ymax):
(g.panymin=Math.min(g.panymin,this.ymin),g.panymax=Math.max(g.panymax,this.ymax)),this.img||(g.zmin===u&&(g.zmin=0),g.zmax===u&&(g.zmax=0),this.img=a.create_image(h,null,this.hcb.subsize,G,this.lps,g.zmin,g.zmax,g.xcompression));else{this.get_data(e,f);if(!(5===g.cmode||0<this.xsub)&&0<l){var C=this.xstart,B=this.xdelta,A=l;g.index?(t=0,l-=1):0<=B?(t=Math.max(1,Math.min(A,Math.round((e-C)/B)))-1,l=Math.max(1,Math.min(A,Math.round((f-C)/B)+2))-1):(t=Math.max(1,Math.min(A,Math.round((f-C)/B)-1))-1,
l=Math.max(1,Math.min(A,Math.round((e-C)/B)+2))-1);l=l-t+1;0>l&&(c.log.debug("Nothing to plot"),l=0)}g.panxmin>g.panxmax?(g.panxmin=k,g.panxmax=w):(g.panxmin=Math.min(g.panxmin,k),g.panxmax=Math.max(g.panxmax,w));if(0>=l){c.log.debug("Nothing to plot");return}!(5===g.cmode||0<this.ysub)&&0<l&&(k=this.ystart,w=this.ydelta,A=l,g.index?(t=0,l-=1):0<=w?(t=Math.max(1,Math.min(A,Math.round((e-k)/w)))-1,l=Math.max(1,Math.min(A,Math.round((f-k)/w)+2))-1):(t=Math.max(1,Math.min(A,Math.round((f-k)/w)-1))-1,
l=Math.max(1,Math.min(A,Math.round((e-k)/w)+2))-1),l=l-t+1,0>l&&(c.log.debug("Nothing to plot"),l=0));g.panymin>g.panxmax?(g.panymin=this.ymin,g.panymax=this.ymax):(g.panymin=Math.min(g.panymin,this.ymin),g.panymax=Math.max(g.panymax,this.ymax));this.cx?1===g.cmode?c.cvmag(this.buf,this.zbuf,this.zbuf.length):2===g.cmode?25===g.plab?(c.cvpha(this.buf,this.zbuf,this.zbuf.length),c.vsmul(this.zbuf,1/(2*Math.PI),this.zbuf,this.zbuf.length)):24!==g.plab?c.cvpha(this.buf,this.zbuf,this.zbuf.length):c.cvphad(this.buf,
this.zbuf,this.zbuf.length):3===g.cmode?c.vmov(this.buf,this.skip,this.zbuf,1,this.zbuf.length):4===g.cmode?c.vmov(this.buf.subarray(1),this.skip,this.zbuf,1,this.zbuf.length):5===g.cmode?c.vfill(this.zbuf,0,this.zbuf.length):6===g.cmode?c.cvmag2logscale(this.buf,g.dbmin,10,this.zbuf):7===g.cmode&&c.cvmag2logscale(this.buf,g.dbmin,20,this.zbuf):1===g.cmode?c.vabs(this.buf,this.zbuf):2===g.cmode?c.vfill(this.zbuf,0,this.zbuf.length):3===g.cmode?c.vmov(this.buf,this.skip,this.zbuf,1,this.zbuf.length):
4===g.cmode?c.vfill(this.zbuf,0,this.zbuf.length):5===g.cmode?c.vfill(this.zbuf,0,this.zbuf.length):6===g.cmode?c.vlogscale(this.buf,g.dbmin,10,this.zbuf):7===g.cmode&&c.vlogscale(this.buf,g.dbmin,20,this.zbuf);A=this.zbuf;w=k=0;if(0>=g.autol||this.hcb.pipe){if(0<A.length)for(k=A[0],w=A[0],t=0;t<A.length&&!(t/this.xframe>=this.lpb);t++)A[t]<k&&(k=A[t]),A[t]>w&&(w=A[t]);0!==(g.autoz&1)&&(g.zmin=g.zmin!==u?Math.min(g.zmin,k):k);0!==(g.autoz&2)&&(g.zmax=g.zmax!==u?Math.min(g.zmax,w):w);this.img=a.create_image(h,
this.zbuf,this.hcb.subsize,G,this.lps,g.zmin,g.zmax,g.xcompression)}else if(C=this.hcb.size,B=1/Math.max(g.autol,1),this.img||(this.img=a.create_image(h,this.zbuf,this.hcb.subsize,G,this.lps,g.zmin,g.zmax)),g.zmin=0,g.zmax=0,0<A.length)for(var E=0;E<C;E++){var H=E*this.xframe,k=A[H],w=A[H];for(t=0;t<this.xframe;t++)k=Math.min(A[H+t],k),w=Math.max(A[H+t],w);2!==g.autoz&&k!==u&&(g.zmin=k*B+g.zmin*(1-B));1!==g.autoz&&w!==u&&(g.zmax=w*B+g.zmax*(1-B));a.update_image_row(h,this.img,A.subarray(H,H+this.xframe),
E,g.zmin,g.zmax)}}this.img.cmode=g.cmode;this.img.cmap=g.cmap;this.img.origin=h.origin;if(this.hcb.pipe&&this.frame<this.lps)if(g=new Uint32Array(this.img),"rising"===this.drawmode)for(t=0;t<g.length-this.frame*G;t++)g[t]=0;else for(t=this.frame*G;t<g.length;t++)g[t]=0;return l},draw:function(){var c=this.plot._Mx,e=this.plot._Gx,g=this.hcb;if(this.hcb.pipe){var h=this.hcb.lps||Math.ceil(Math.max(1,c.b-c.t));h!==this.lps&&this.buf&&(this.lps=h,this.position>=this.lps&&(this.position=0),h=g.ystart+
g.ydelta*(this.lps-1),this.ymin=Math.min(g.ystart,h),this.ymax=Math.max(g.ystart,h),this.img=null,this.plot.rescale())}var h=Math.max(this.xmin,c.stk[c.level].xmin),l=Math.min(this.xmax,c.stk[c.level].xmax);if(h>=l)e.panxmin=Math.min(e.panxmin,this.xmin),e.panxmax=Math.max(e.panxmax,this.xmax);else{var k=Math.max(this.ymin,c.stk[c.level].ymin),w=Math.min(this.ymax,c.stk[c.level].ymax),t=Math.abs(l-h)+1,u=Math.abs(w-k)+1,t=Math.floor(t/g.xdelta),u=Math.floor(u/g.ydelta),t=Math.min(t,g.subsize),u=Math.min(u,
g.size),g=a.real_to_pixel(c,h,k),w=a.real_to_pixel(c,l,w),u=(w.y-g.y)/u;e.xe=Math.max(1,Math.round((w.x-g.x)/t));e.ye=Math.max(1,Math.round(u));this.img&&e.cmode===this.img.cmode&&e.cmap===this.img.cmap&&c.origin===this.img.origin||this.prep(h,l);this.img&&a.draw_image(c,this.img,this.xmin,this.ymin,this.xmax,this.ymax,this.opacity,e.rasterSmoothing);null!==this.position&&"scrolling"===this.drawmode&&(e=a.real_to_pixel(c,0,this.position*this.ydelta),e.y>c.t&&e.y<c.b&&a.draw_line(c,"white",c.l,e.y,
c.r,e.y))}}};e.Layer2D.overlay=function(a,f,g){var h=a._Gx;f.buf_type="D";var l=new e.Layer2D(a);l.init(f);l.name=f.file_name?c.trim_name(f.file_name):"layer_"+h.lyr.length;l.change_settings(g);a.add_layer(l)}})(window.sigplot=window.sigplot||{},mx,m);window.sigplot=window.sigplot||{};
(function(e,a,c){function u(){this.yptr=this.xptr=void 0;this.xmax=this.xmin=this.panymax=this.panymin=this.panxmax=this.panxmin=this.xdelta=this.xstart=this.arety=this.aretx=this.ymrk=this.xmrk=this.rety=this.retx=0;this.xmult=void 0;this.ymax=this.ymin=0;this.zmax=this.zmin=this.ymult=void 0;this.pmt=this.pyscl=this.pxscl=this.dbmin=0;this.format=this.note="";this.modsource=this.modlayer=this.pthk=this.pyl=this.py2=this.py1=this.px2=this.px1=this.pb=this.pt=this.pr=this.pl=0;this.modified=!1;this.ydiv=
this.xdiv=this.modmode=0;this.cross=this.expand=this.all=!1;this.grid=!0;this.gridBackground=void 0;this.index=!1;this.legend=this.specs=this.pan=!0;this.xdata=!1;this.show_readout=this.show_y_axis=this.show_x_axis=!0;this.autohide_panbars=this.autohide_readout=this.hide_note=!1;this.panning=void 0;this.panmode=0;this.hold=!1;this.isec=this.nsec=this.iysec=this.sections=0;this.ylabel=this.ylab=this.xlabel=this.xlab=void 0;this.xcompression=0;this.default_rubberbox_action="zoom";this.default_rubberbox_mode=
"box";this.wheelscroll_mode_natural=!0;this.scroll_time_interval=10;this.stillPanning=this.repeatPanning=void 0;this.autol=-1;this.wheelZoom=this.rasterSmoothing=this.lineSmoothing=!1;this.wheelZoomPercent=0.2;this.inContinuousZoom=!1;this.lyr=[];this.HCB=[];this.plugins=[];this.plotData=document.createElement("canvas");this.plotData.valid=!1}function n(d,e){var f=d._Gx,r=d._Mx;if(Array.isArray(e)){var g={name:"Custom",colors:e};"Custom"===c.Mc.colormap[c.Mc.colormap.length-1].name?c.Mc.colormap[c.Mc.colormap.length-
1].colors=e:c.Mc.colormap.push(g);f.cmap=c.Mc.colormap.length-1}else if("string"===typeof e)for(f.cmap=-1,g=0;g<c.Mc.colormap.length;g++){if(c.Mc.colormap[g].name===e){f.cmap=g;break}}else f.cmap=e;0>f.ncolors&&(f.ncolors*=-1,f.cmap=Math.max(1,f.cmap));if(0>f.cmap||f.cmap>c.Mc.colormap.length)f.cmap=2===f.cmode?2:1;a.colormap(r,c.Mc.colormap[f.cmap].colors,f.ncolors)}function f(c,d){var e=c._Mx;a.removeEventListener(e,"mousedown",c.onmousedown,!1);a.menu(e,{title:"SCROLLBAR",refresh:function(){c.refresh()},
finalize:function(){a.addEventListener(e,"mousedown",c.onmousedown,!1);c.refresh()},items:[{text:"Expand Range",handler:function(){P(c,a.SB_EXPAND,d)}},{text:"Shrink Range",handler:function(){P(c,a.SB_SHRINK,d)}},{text:"Expand Full",handler:function(){P(c,a.SB_FULL,d)}}]})}function g(d){var e=d._Gx,f=d._Mx;a.removeEventListener(f,"mousedown",d.onmousedown,!1);for(var r={text:"Cntrls...",menu:{title:"CONTROLS OPTIONS",items:[{text:"Continuous (Disabled)",checked:-2===e.cntrls,handler:function(){d.change_settings({xcnt:-2})}},
{text:"LM Click (Disabled)",checked:-1===e.cntrls,handler:function(){d.change_settings({xcnt:-1})}},{text:"Off",checked:0===e.cntrls,handler:function(){d.change_settings({xcnt:0})}},{text:"LM Click",checked:1===e.cntrls,handler:function(){d.change_settings({xcnt:1})}},{text:"Continuous",checked:2===e.cntrls,handler:function(){d.change_settings({xcnt:2})}}]}},g={text:"CX Mode...",menu:{title:"COMPLEX MODE",items:[{text:"Magnitude",checked:1===e.cmode,handler:function(){d.change_settings({cmode:1})}},
{text:"Phase",checked:2===e.cmode,handler:function(){d.change_settings({cmode:2})}},{text:"Real",checked:3===e.cmode,handler:function(){d.change_settings({cmode:3})}},{text:"Imaginary",checked:4===e.cmode,handler:function(){d.change_settings({cmode:4})}},{text:"IR: Imag/Real",checked:5===e.cmode,handler:function(){d.change_settings({cmode:5})}},{text:"10*Log10",checked:6===e.cmode,handler:function(){d.change_settings({cmode:6})}},{text:"20*Log10",checked:7===e.cmode,handler:function(){d.change_settings({cmode:7})}}]}},
h={text:"Scaling...",menu:{title:"SCALING",items:[{text:"Y Axis",style:"separator"},{text:"Parameters...",checked:0===e.autoy,handler:function(){e.autoy=0;S(d,"Y Axis Min:",a.floatValidator,function(a){parseFloat(a)!==f.stk[f.level].ymin?(""===a&&(a=0),p(d,parseFloat(a),f.stk[f.level].ymax,"Y")):d.refresh()},f.stk[f.level].ymin,void 0,void 0,function(){S(d,"Y Axis Max:",a.floatValidator,function(a){parseFloat(a)!==f.stk[f.level].ymax?(""===a&&(a=0),p(d,f.stk[f.level].ymin,parseFloat(a),"Y")):d.refresh()},
f.stk[f.level].ymax,void 0,void 0,void 0)})}},{text:"Min Auto",checked:1===e.autoy,handler:function(){e.autoy=1}},{text:"Max Auto",checked:2===e.autoy,handler:function(){e.autoy=2}},{text:"Full Auto",checked:3===e.autoy,handler:function(){e.autoy=3}},{text:"X Axis",style:"separator"},{text:"Parameters...",checked:0===e.autox,handler:function(){e.autox=0;S(d,"X Axis Min:",a.floatValidator,function(a){parseFloat(a)!==f.stk[f.level].xmin?(""===a&&(a=0),p(d,parseFloat(a),f.stk[f.level].xmax,"X")):d.refresh()},
f.stk[f.level].xmin,void 0,void 0,function(){S(d,"X Axis Max:",a.floatValidator,function(a){parseFloat(a)!==f.stk[f.level].xmax?(""===a&&(a=0),p(d,f.stk[f.level].xmin,parseFloat(a),"X")):d.refresh()},f.stk[f.level].xmax,void 0,void 0,void 0)})}},{text:"Min Auto",checked:1===e.autox,handler:function(){e.autox=1}},{text:"Max Auto",checked:2===e.autox,handler:function(){e.autox=2}},{text:"Full Auto",checked:3===e.autox,handler:function(){e.autox=3}},{text:"Z Axis",style:"separator"},{text:"Parameters...",
checked:0===e.autoz,handler:function(){e.autoz=0;S(d,"Z Axis Min:",a.floatValidator,function(a){parseFloat(a)!==e.zmin&&(""===a&&(a=0),d.change_settings({zmin:a}))},e.zmin,void 0,void 0,function(){S(d,"Z Axis Max:",a.floatValidator,function(a){parseFloat(a)!==e.zmax&&(""===a&&(a=0),d.change_settings({zmax:a}))},e.zmax,void 0,void 0,void 0)})}},{text:"Min Auto",checked:1===e.autoz,handler:function(){d.change_settings({autoz:1})}},{text:"Max Auto",checked:2===e.autoz,handler:function(){d.change_settings({autoz:2})}},
{text:"Full Auto",checked:3===e.autoz,handler:function(){d.change_settings({autoz:3})}}]}},k={text:"Settings...",menu:{title:"SETTINGS",items:[{text:"ALL Mode",checked:e.all,style:"checkbox",handler:function(){d.change_settings({all:!e.all})}},{text:"Controls...",menu:{title:"CONTROLS OPTIONS",items:[{text:"Continuous (Disabled)",checked:-2===e.cntrls,handler:function(){d.change_settings({xcnt:-2})}},{text:"LM Click (Disabled)",checked:-1===e.cntrls,handler:function(){d.change_settings({xcnt:-1})}},
{text:"Off",checked:0===e.cntrls,handler:function(){d.change_settings({xcnt:0})}},{text:"LM Click",checked:1===e.cntrls,handler:function(){d.change_settings({xcnt:1})}},{text:"Continuous",checked:2===e.cntrls,handler:function(){d.change_settings({xcnt:2})}}]}},{text:"Mouse...",menu:{title:"MOUSE OPTIONS",items:[{text:"LM Drag (Zoom)",checked:"zoom"===e.default_rubberbox_action,handler:function(){e.default_rubberbox_action="zoom"}},{text:"LM Drag (Select)",checked:"select"===e.default_rubberbox_action,
handler:function(){e.default_rubberbox_action="select"}},{text:"LM Drag (Disabled)",checked:null===e.default_rubberbox_action,handler:function(){e.default_rubberbox_action=null}},{text:"RM Drag (Zoom)",checked:"zoom"===e.default_rightclick_rubberbox_action,handler:function(){e.default_rightclick_rubberbox_action="zoom"}},{text:"RM Drag (Select)",checked:"select"===e.default_rightclick_rubberbox_action,handler:function(){e.default_rightclick_rubberbox_action="select"}},{text:"RM Drag (Disabled)",checked:null===
e.default_rightclick_rubberbox_action,handler:function(){e.default_rightclick_rubberbox_action=null}},{text:"Mode...",menu:{title:"MOUSE Mode",items:[{text:"Box",checked:"box"===e.default_rubberbox_mode,handler:function(){e.default_rubberbox_mode="box"}},{text:"Horizontal",checked:"horizontal"===e.default_rubberbox_mode,handler:function(){e.default_rubberbox_mode="horizontal"}},{text:"Vertical",checked:"vertical"===e.default_rubberbox_mode,handler:function(){e.default_rubberbox_mode="vertical"}}]}},
{text:"CROSShairs...",menu:{title:"Crosshairs Mode",items:[{text:"Off",checked:!e.cross,handler:function(){e.cross=!1}},{text:"On",checked:!0===e.cross,handler:function(){e.cross=!0}},{text:"Horizontal",checked:"horizontal"===e.cross,handler:function(){e.cross="horizontal"}},{text:"Vertical",checked:"vertical"===e.cross,handler:function(){e.cross="vertical"}}]}},{text:"Mousewheel Natural Mode",checked:e.wheelscroll_mode_natural,style:"checkbox",handler:function(){d.change_settings({wheelscroll_mode_natural:!e.wheelscroll_mode_natural})}}]}},
{text:"CROSShairs",checked:e.cross,style:"checkbox",handler:function(){d.change_settings({cross:!e.cross})}},{text:"GRID",checked:e.grid,style:"checkbox",handler:function(){d.change_settings({grid:!e.grid})}},{text:"INDEX Mode",checked:e.index,style:"checkbox",handler:function(){d.change_settings({index:!e.index})}},{text:"LEGEND",checked:e.legend,style:"checkbox",handler:function(){d.change_settings({legend:!e.legend})}},{text:"PAN Scrollbars",checked:e.pan,style:"checkbox",handler:function(){d.change_settings({pan:!e.pan})}},
{text:"PHase UNITS...",menu:{title:"PHASE UNITS",items:[{text:"Radians",checked:23===e.plab,handler:function(){d.change_settings({phunits:"R"})}},{text:"Degrees",checked:24===e.plab,handler:function(){d.change_settings({phunits:"D"})}},{text:"Cycles",checked:25===e.plab,handler:function(){d.change_settings({phunits:"C"})}}]}},{text:"SPECS",checked:e.specs,style:"checkbox",handler:function(){d.change_settings({specs:!e.specs})}},{text:"XDIVisions...",handler:function(){S(d,"X Divisions:",function(d){var e=
a.intValidator(d),q=c.trunc(f.width/2);return e.valid&&d>q?{valid:!1,reason:"Exceeds maximum number of divisions ("+q+")."}:e},function(a){parseFloat(a)!==e.xdiv&&(""===a&&(a=1),e.xdiv=parseFloat(a));d.refresh()},e.xdiv,void 0,void 0,void 0)}},{text:"XLABel...",handler:function(){S(d,"X Units:",function(c){console.log("The value is "+c);return a.intValidator(c)},function(a){parseFloat(a)!==e.xlab&&(0>a&&(a=0),e.xlab=parseFloat(a));d.refresh()},e.xlab,void 0,void 0,void 0)}},{text:"YDIVisions...",
handler:function(){S(d,"Y Divisions:",function(d){var e=a.intValidator(d),q=c.trunc(f.height/2);return e.valid&&d>q?{valid:!1,reason:"Exceeds maximum number of divisions ("+q+")."}:e},function(a){parseFloat(a)!==e.ydiv&&(""===a&&(a=1),e.ydiv=parseFloat(a));d.refresh()},e.ydiv,void 0,void 0,void 0)}},{text:"YINVersion",checked:4===f.origin,style:"checkbox",handler:function(){d.change_settings({yinv:4!==f.origin})}},{text:"YLABel...",handler:function(){S(d,"Y Units:",function(c){return a.intValidator(c)},
function(a){parseFloat(a)!==e.ylab&&(0>a&&(a=0),e.ylab=parseFloat(a));d.refresh()},e.ylab,void 0,void 0,void 0)}},{text:"X-axis",checked:e.show_x_axis,style:"checkbox",handler:function(){d.change_settings({show_x_axis:!e.show_x_axis})}},{text:"Y-axis",checked:e.show_y_axis,style:"checkbox",handler:function(){d.change_settings({show_y_axis:!e.show_y_axis})}},{text:"Readout",checked:e.show_readout,style:"checkbox",handler:function(){d.change_settings({show_readout:!e.show_readout})}},{text:"Invert Colors",
checked:f.xi,style:"checkbox",handler:function(){a.invertbgfg(f)}}]}},l={text:"Colormap...",menu:{title:"COLORMAP",items:[]}},n=function(a){d.change_settings({cmap:this.cmap})},t=0;t<c.Mc.colormap.length;t++)l.menu.items.push({text:c.Mc.colormap[t].name,cmap:t,checked:e.cmap===t,handler:n});var v=function(c){return{title:"TRACE OPTIONS",items:[{text:"Dashed...",handler:function(){var f=1;if(void 0!==c)f=Math.abs(d._Gx.lyr[c].thick);else{if(0===e.lyr.length)return;for(var f=Math.abs(d._Gx.lyr[0].thick),
r=0;r<e.lyr.length;r++)if(f!==Math.abs(d._Gx.lyr[r].thick)){f=1;break}}S(d,"Line thickness:",a.intValidator,function(a){if(void 0!==c)d._Gx.lyr[c].line=3,d._Gx.lyr[c].thick=-1*a,d._Gx.lyr[c].symbol=0;else for(var c=0;c<e.lyr.length;c++)d._Gx.lyr[c].line=3,d._Gx.lyr[c].thick=-1*a,d._Gx.lyr[c].symbol=0},f)}},{text:"Dots...",handler:function(){var f=3;if(void 0!==c)f=Math.abs(d._Gx.lyr[c].radius);else{if(0===e.lyr.length)return;for(var r=0;r<e.lyr.length;r++)if(f!==Math.abs(d._Gx.lyr[r].radius)){f=3;
break}}S(d,"Radius/Shape:",a.intValidator,function(a){var f;0>a?(f=3,a=Math.abs(a)):0<a?f=2:(f=1,a=0);if(void 0!==c)d._Gx.lyr[c].line=0,d._Gx.lyr[c].radius=a,d._Gx.lyr[c].symbol=f;else for(var r=0;r<e.lyr.length;r++)d._Gx.lyr[r].line=0,d._Gx.lyr[r].radius=a,d._Gx.lyr[r].symbol=f},f)}},{text:"Solid...",handler:function(){var f=1;if(void 0!==c)f=Math.abs(d._Gx.lyr[c].thick);else{if(0===e.lyr.length)return;for(var f=Math.abs(d._Gx.lyr[0].thick),r=0;r<e.lyr.length;r++)if(f!==Math.abs(d._Gx.lyr[r].thick)){f=
1;break}}S(d,"Line thickness:",a.intValidator,function(a){if(void 0!==c)d._Gx.lyr[c].line=3,d._Gx.lyr[c].thick=a,d._Gx.lyr[c].symbol=0;else for(var f=0;f<e.lyr.length;f++)d._Gx.lyr[f].line=3,d._Gx.lyr[f].thick=a,d._Gx.lyr[f].symbol=0},f)}},{text:"Toggle",style:void 0!==c?"checkbox":void 0,checked:void 0!==c?d._Gx.lyr[c].display:void 0,handler:function(){if(void 0!==c)d._Gx.lyr[c].display=!d._Gx.lyr[c].display;else for(var a=0;a<e.lyr.length;a++)d._Gx.lyr[a].display=!d._Gx.lyr[a].display}},{text:"Symbols...",
menu:{title:"SYMBOLS",items:[{text:"Retain Current"},{text:"None",checked:void 0!==c?0===d._Gx.lyr[c].symbol:void 0,handler:function(){if(void 0!==c)d._Gx.lyr[c].radius=0,d._Gx.lyr[c].symbol=0;else for(var a=0;a<e.lyr.length;a++)d._Gx.lyr[a].radius=0,d._Gx.lyr[a].symbol=0}},{text:"Pixels",checked:void 0!==c?1===d._Gx.lyr[c].symbol:void 0,handler:function(){if(void 0!==c)d._Gx.lyr[c].radius=1,d._Gx.lyr[c].symbol=1;else for(var a=0;a<e.lyr.length;a++)d._Gx.lyr[a].radius=1,d._Gx.lyr[a].symbol=1}},{text:"Circles",
checked:void 0!==c?2===d._Gx.lyr[c].symbol:void 0,handler:function(){if(void 0!==c)d._Gx.lyr[c].radius=4,d._Gx.lyr[c].symbol=2;else for(var a=0;a<e.lyr.length;a++)d._Gx.lyr[a].radius=4,d._Gx.lyr[a].symbol=2}},{text:"Squares",checked:void 0!==c?3===d._Gx.lyr[c].symbol:void 0,handler:function(){if(void 0!==c)d._Gx.lyr[c].radius=4,d._Gx.lyr[c].symbol=3;else for(var a=0;a<e.lyr.length;a++)d._Gx.lyr[a].radius=4,d._Gx.lyr[a].symbol=3}},{text:"Plusses",checked:void 0!==c?4===d._Gx.lyr[c].symbol:void 0,handler:function(){if(void 0!==
c)d._Gx.lyr[c].radius=4,d._Gx.lyr[c].symbol=4;else for(var a=0;a<e.lyr.length;a++)d._Gx.lyr[a].radius=4,d._Gx.lyr[a].symbol=4}},{text:"X's",checked:void 0!==c?5===d._Gx.lyr[c].symbol:void 0,handler:function(){if(void 0!==c)d._Gx.lyr[c].radius=4,d._Gx.lyr[c].symbol=5;else for(var a=0;a<e.lyr.length;a++)d._Gx.lyr[a].radius=4,d._Gx.lyr[a].symbol=5}},{text:"Triangles",checked:void 0!==c?6===d._Gx.lyr[c].symbol:void 0,handler:function(){if(void 0!==c)d._Gx.lyr[c].radius=6,d._Gx.lyr[c].symbol=6;else for(var a=
0;a<e.lyr.length;a++)d._Gx.lyr[a].radius=6,d._Gx.lyr[a].symbol=6}},{text:"Downward Triangles",checked:void 0!==c?7===d._Gx.lyr[c].symbol:void 0,handler:function(){if(void 0!==c)d._Gx.lyr[c].radius=6,d._Gx.lyr[c].symbol=7;else for(var a=0;a<e.lyr.length;a++)d._Gx.lyr[a].radius=6,d._Gx.lyr[a].symbol=7}}]}},{text:"Line Type...",menu:{title:"LINE TYPE",items:[{text:"Retain Current"},{text:"None",checked:void 0!==c?0===d._Gx.lyr[c].line:void 0,handler:function(){if(void 0!==c)d._Gx.lyr[c].line=0;else for(var a=
0;a<e.lyr.length;a++)d._Gx.lyr[a].line=0}},{text:"Verticals",checked:void 0!==c?1===d._Gx.lyr[c].line:void 0,handler:function(){if(void 0!==c)d._Gx.lyr[c].line=1;else for(var a=0;a<e.lyr.length;a++)d._Gx.lyr[a].line=1}},{text:"Horizontals",checked:void 0!==c?2===d._Gx.lyr[c].line:void 0,handler:function(){if(void 0!==c)d._Gx.lyr[c].line=2;else for(var a=0;a<e.lyr.length;a++)d._Gx.lyr[a].line=2}},{text:"Connecting",checked:void 0!==c?3===d._Gx.lyr[c].line:void 0,handler:function(){if(void 0!==c)d._Gx.lyr[c].line=
3;else for(var a=0;a<e.lyr.length;a++)d._Gx.lyr[a].line=3}}]}},{text:"Thickness...",handler:function(){var f=1;void 0!==c&&(f=d._Gx.lyr[c].thick);S(d,"Thickness",a.intValidator,function(a){""===a&&(a=1);a=Math.max(0,a);if(void 0!==c)d._Gx.lyr[c].thick=a;else for(var f=0;f<e.lyr.length;f++)d._Gx.lyr[f].thick=a},f,void 0,void 0,void 0)}},{text:"Opacity...",handler:function(){var f=1;void 0!==c&&(f=d._Gx.lyr[c].opacity);S(d,"Opacity:",a.floatValidator,function(a){""===a&&(a=1);a=Math.max(0,a);a=Math.min(1,
a);if(void 0!==c)d._Gx.lyr[c].opacity=a;else for(var f=0;f<e.lyr.length;f++)d._Gx.lyr[f].opacity=a},f,void 0,void 0,void 0)}}]}},n={text:"Plugins...",menu:{title:"PLUGINS",items:function(){for(var a=[],c=0;c<e.plugins.length;c++){var d=e.plugins[c];d.impl.menu&&("function"===typeof d.impl.menu?a.push(d.impl.menu()):a.push(d.impl.menu))}return a}()}};a.menu(f,{title:"SIG-PLOT",finalize:function(){f.prompt||a.addEventListener(f,"mousedown",d.onmousedown,!1);d.refresh()},items:[{text:"Refresh"},r,g,
h,{text:"View...",menu:{title:"VIEW",items:[{text:"Reset",handler:function(){d.unzoom()}},{text:"Y Axis",style:"separator"},{text:"Expand Range",handler:function(){P(d,a.SB_EXPAND,"YPAN")}},{text:"Shrink Range",handler:function(){P(d,a.SB_SHRINK,"YPAN")}},{text:"Expand Full",handler:function(){P(d,a.SB_FULL,"YPAN")}},{text:"X Axis",style:"separator"},{text:"Expand Range",handler:function(){P(d,a.SB_EXPAND,"XPAN")}},{text:"Shrink Range",handler:function(){P(d,a.SB_SHRINK,"XPAN")}},{text:"Expand Full",
handler:function(){P(d,a.SB_FULL,"XPAN")}}]}},{text:"Grid",handler:function(){d.change_settings({grid:!e.grid})}},k,l,{text:"Traces...",menu:function(){var a=d._Gx,c={title:"TRACE",items:[]};c.items.push({text:"All",menu:v()});for(var e=0;e<a.lyr.length;e++)c.items.push({text:a.lyr[e].name,menu:v(e)});return c}},{text:"Files...",menu:{title:"FILES OPTIONS",items:[{text:"Deoverlay File...",menu:function(){var a=d._Gx,c={title:"DEOVERLAY",items:[]};c.items.push({text:"Deoverlay All",handler:function(){d.deoverlay()}});
for(var e=0;e<a.lyr.length;e++){var s=function(a){return function(){d.deoverlay(a)}}(e);c.items.push({text:a.lyr[e].name,handler:s})}return c}}]}},n,{text:"Keypress Info",handler:function(){a.message(f,Y)}},{text:"Save as...",menu:{title:"SAVE AS",items:[{text:"PNG",handler:function(){var a=d._Mx.active_canvas.toDataURL("image/png"),c=document.createElement("a");c.href=a;c.download="SigPlot."+(new Date).getTime()+".png";c.display="none";document.body.appendChild(c);c.click();document.body.removeChild(c)}},
{text:"JPG",handler:function(){var a=d._Mx.active_canvas.toDataURL("image/jpg"),c=document.createElement("a");c.href=a;c.download="SigPlot."+(new Date).getTime()+".jpg";c.display="none";document.body.appendChild(c);c.click();document.body.removeChild(c)}},{text:"SVG",handler:function(){var a=d._Mx.active_canvas.toDataURL("image/svg"),c=document.createElement("a");c.href=a;c.download="SigPlot."+(new Date).getTime()+".svg";c.display="none";document.body.appendChild(c);c.click();document.body.removeChild(c)}}]}},
{text:"Exit",handler:function(){var c=document.createEvent("Event");c.initEvent("sigplotexit",!0,!0);a.dispatchEvent(f,c)}}]})}function h(c,d){return function(e,f,g,h,k,l,n){var p=c._Mx,t=Math.min(f,h),v=Math.min(g,k),u=Math.abs(h-f),w=Math.abs(k-g),x=!1;e.which===d&&(x="horizontal"===n?2<u:"vertical"===n?2<w:2<u&&2<w);x?void 0===l||"zoom"===l?(c.pixel_zoom(f,g,h,k),c.refresh()):"select"===l&&(f=document.createEvent("Event"),f.initEvent("mtag",!0,!0),g=W(c,t,v),h=W(c,t+u,v+w),f.x=g.x,f.y=g.y,f.xpos=
t,f.ypos=v,f.w=Math.abs(h.x-g.x),f.h=Math.abs(h.y-g.y),f.wpxl=u,f.hpxl=w,f.shift=e.shiftKey,a.dispatchEvent(p,f)):c.mouseup(e)}}function l(d,e){var f=d._Mx,r=d._Gx;r.xmin=void 0===e.xmin?0:e.xmin;r.xmax=void 0===e.xmax?0:e.xmax;var g=void 0!==e.xmin,h=void 0!==e.xmax,l=void 0===e.cmode?"":e.cmode.toUpperCase();r.ylab=e.ylab;r.ylabel=e.ylabel;r.ymin=void 0===e.ymin?0:e.ymin;r.ymax=void 0===e.ymax?0:e.ymax;var p=void 0!==e.ymin,t=void 0!==e.ymax;r.zmin=e.zmin;r.zmax=e.zmax;var v=void 0!==e.zmin,u=void 0!==
e.zmax;void 0!==e.colors&&a.setbgfg(f,e.colors.bg,e.colors.fg,f.xi);void 0!==e.xi&&a.invertbgfg(f);r.forcelab=void 0===e.forcelab?!0:e.forcelab;r.all=void 0===e.all?!1:e.all;r.expand=void 0===e.expand?!1:e.expand;r.xlab=e.xlab;r.xlabel=e.xlabel;r.segment=void 0===e.segment?!1:e.segment;r.plab=24;var w=void 0===e.phunits?"D":e.phunits;"R"===w[0]?r.plab=23:"C"===w[0]&&(r.plab=25);r.xdiv=void 0===e.xdiv?5:e.xdiv;r.ydiv=void 0===e.ydiv?5:e.ydiv;r.xcompression=e.xcmp||0;r.rasterSmoothing=e.smoothing||
!1;f.origin=1;e.yinv&&(f.origin=4);r.pmt=void 0===e.pmt?1:e.pmt;r.bufmax=void 0===e.bufmax?32768:e.bufmax;r.sections=void 0===e.nsec?0:e.nsec;r.anno_type=void 0===e.anno_type?0:e.anno_type;r.xfmt=void 0===e.xfmt?"":e.xfmt;r.yfmt=void 0===e.yfmt?"":e.yfmt;r.index=void 0===e.index?!1:e.index;if(w=r.index||"IN"===l.slice(0,2))g&&1===r.xmin&&(g=!1),h&&1===r.xmin&&(h=!1);r.xdata=!1;r.note="";r.hold=0;r.always_show_marker=e.always_show_marker||!1;c.vstype("D");e.inputs||k(d,!1);var x=l.slice(0,2);if("IN"===
x||"AB"===x||"__"===x)x=l.slice(2,4);r.cmode=0<r.lyr.length&&r.lyr[0].cx?1:3;"MA"===x&&(r.cmode=1);"PH"===x&&(r.cmode=2);"RE"===x&&(r.cmode=3);"IM"===x&&(r.cmode=4);if("LO"===x||"D1"===x)r.cmode=6;if("L2"===x||"D2"===x)r.cmode=7;if("RI"===x||"IR"===x)r.index?alert("Imag/Real mode not permitted in INDEX mode"):r.cmode=5;r.basemode=r.cmode;d.change_settings({cmode:r.cmode});r.dbmin=1E-20;6<=r.cmode&&(l=10,7===r.cmode&&(l=20),"L"===x[0]?(0<r.lyr.length&&r.lyr[0].cx?(r.ymin=Math.max(r.ymin,1E-10),r.ymax=
Math.max(r.ymax,1E-10)):(r.ymin=Math.max(r.ymin,1E-20),r.ymax=Math.max(r.ymax,1E-20)),r.ymin=c.log10(r.ymin)*l,r.ymax=c.log10(r.ymax)*l):0<r.lyr.length&&r.lyr[0].cx?(r.ymin=Math.max(-18*l,r.ymin),r.ymax=Math.max(-18*l,r.ymax),r.dbmin=1E-37):Math.min(r.ymin,r.ymax)<-20*l&&(r.ymin=Math.max(-37*l,r.ymin),r.ymax=Math.max(-37*l,r.ymax),r.dbmin=Math.pow(10,Math.min(r.ymin,r.ymax)/l)));f.level=0;w&&!r.index&&(g&&(r.xmin=r.xstart+r.xdelta*(r.xmin-1)),g&&(r.xmax=r.xstart+r.xdelta*(r.xmax-1)));r.xmult=e.xmult;
r.ymult=e.xmult;r.autox=void 0===e.autox?-1:e.autox;0>r.autox&&(r.autox=0,g||(r.autox+=1),h||(r.autox+=2));r.autoy=void 0===e.autoy?-1:e.autoy;0>r.autoy&&(r.autoy=0,p||(r.autoy+=1),t||(r.autoy+=2));r.autoz=void 0===e.autoz?-1:e.autoz;0>r.autoz&&(r.autoz=0,v||(r.autoz+=1),u||(r.autoz+=2));r.autol=void 0===e.autol?-1:e.autol;g||(r.xmin=void 0);h||(r.xmax=void 0);K(d,{get_data:!0},r.xmin,r.xmax,r.xlab,r.ylab);g||(r.xmin=f.stk[0].xmin);h||(r.xmax=f.stk[0].xmax);p||(r.ymin=f.stk[0].ymin);t||(r.ymax=f.stk[0].ymax);
r.xmin>r.xmax&&(f.stk[0].xmin=r.xmax,r.xmax=r.xmin,r.xmin=f.stk[0].xmin);r.ymin>r.ymax&&(f.stk[0].ymin=r.ymax,r.ymax=r.ymin,r.ymin=f.stk[0].ymin);f.stk[0].xmin=r.xmin;f.stk[0].xmax=r.xmax;f.stk[0].ymin=r.ymin;f.stk[0].ymax=r.ymax;r.panxmin=Math.min(r.panxmin,r.xmin);r.panxmax=Math.max(r.panxmax,r.xmax);r.panymin=Math.min(r.panymin,r.ymin);r.panymax=Math.max(r.panymax,r.ymax);r.xmin=f.stk[0].xmin;r.ymin=f.stk[0].ymin;e.font_family&&(f.font_family=e.font_family);a.set_font(f,Math.min(7,f.width/64));
r.ncolors=void 0===e.ncolors?16:e.ncolors;r.cmap=null;r.cmap=e.cmap?e.cmap:void 0===e.xc?-1:e.xc;n(d,r.cmap);r.cntrls="leftmouse"===e.xcnt?1:"continuous"===e.xcnt?2:void 0===e.xcnt?1:e.xcnt;r.default_rubberbox_mode=void 0===e.rubberbox_mode?"box":e.rubberbox_mode;r.default_rubberbox_action=void 0===e.rubberbox_action?"zoom":e.rubberbox_action;r.default_rightclick_rubberbox_mode=void 0===e.rightclick_rubberbox_mode?"box":e.rightclick_rubberbox_mode;r.default_rightclick_rubberbox_action=void 0===e.rightclick_rubberbox_action?
null:e.rightclick_rubberbox_action;r.cross=void 0===e.cross?!1:e.cross;r.grid=void 0===e.nogrid?!0:!e.nogrid;r.fillStyle=e.fillStyle;r.gridBackground=e.gridBackground;r.gridStyle=e.gridStyle;r.wheelZoom=e.wheelZoom;r.wheelZoomPercent=e.wheelZoomPercent;r.legend=void 0===e.legend?!1:e.legend;r.no_legend_button=void 0===e.no_legend_button?!1:e.no_legend_button;r.legendBtnLocation=null;r.pan=void 0===e.nopan?!0:!e.nopan;r.nomenu=void 0===e.nomenu?!1:e.nomenu;r.modmode=0;r.modlayer=-1;r.modsource=0;r.modified=
e.mod&&0<r.lyr.length;r.nmark=0;r.iabsc=0;r.index&&(r.iabsc=1);r.specs=!e.nospecs;r.scroll_time_interval=void 0===e.scroll_time_interval?r.scroll_time_interval:e.scroll_time_interval;r.autohide_readout=e.autohide_readout;r.autohide_panbars=e.autohide_panbars;r.x_scrollbar_location=e.x_scrollbar_location;r.specs?(r.show_x_axis=!e.noxaxis,r.show_y_axis=!e.noyaxis,r.show_readout=!e.noreadout,r.specs=r.show_x_axis||r.show_y_axis||r.show_readout?!0:!1):(r.show_x_axis=!1,r.show_y_axis=!1,r.show_readout=
!1);r.hide_note=e.hide_note||!1;r.xmrk=0;r.ymrk=0;e.nodragdrop||(a.addEventListener(f,"dragover",function(a){a.preventDefault()},!1),a.addEventListener(f,"drop",function(a){return function(c){var e=c.dataTransfer.files;0<e.length&&(c.preventDefault(),a.load_files(e))}}(d),!1))}function k(a,c){var e=a._Gx,d=a._Mx;if(c){var f=e.HCB[0];e.xstart=f.xstart;e.xdelta=f.xdelta}else e.xstart=0,e.xdelta=1,e.autol=-1;d.origin=1}function w(a){for(var c=a._Gx,e=a._Mx.canvas.getContext("2d"),d,f=0;f<c.plugins.length;)c.plugins[f].impl.refresh&&
(d=c.plugins[f].canvas,d.width!==a._Mx.canvas.width&&(d.width=a._Mx.canvas.width),d.height!==a._Mx.canvas.height&&(d.height=a._Mx.canvas.height),0!==d.height&&0!==d.width&&(d.width!==a._Mx.canvas.width&&(d.width=a._Mx.canvas.width),d.height!==a._Mx.canvas.height&&(d.height=a._Mx.canvas.height),d.getContext("2d").clearRect(0,0,d.width,d.height),c.plugins[f].impl.refresh(d),e.drawImage(d,0,0))),f+=1}function t(a){a=a._Gx;if(0===a.HCB.length)a.note="";else if(void 0===a.HCB[0].plotnote){for(var c=[],
e=0;e<a.HCB.length;e++)a.HCB[e].file_name&&c.push(a.HCB[e].file_name);a.note=c.join("|").toUpperCase()}}function G(c,e){var d=c._Mx,f=c._Gx;if(!(e>=f.lyr.length)&&f.lyr[e].display&&0===f.hold){f.lyr[e].draw();var g=document.createEvent("Event");g.initEvent("lyrdraw",!0,!0);g.index=e;g.name=f.lyr[e].name;g.layer=f.lyr[e];a.dispatchEvent(d,g)}}function C(c){var e=c._Gx;c=c._Mx;e.cross&&(("vertical"===e.cross||!0===e.cross)&&c.xpos>=c.l&&c.xpos<=c.r&&e.cross_xpos!==c.xpos&&(void 0!==e.cross_xpos&&a.rubberline(c,
e.cross_xpos,c.t,e.cross_xpos,c.b),a.rubberline(c,c.xpos,c.t,c.xpos,c.b),e.cross_xpos=c.xpos),("horizontal"===e.cross||!0===e.cross)&&c.ypos>=c.t&&c.ypos<=c.b&&e.cross_ypos!==c.ypos&&(void 0!==e.cross_ypos&&a.rubberline(c,c.l,e.cross_ypos,c.r,e.cross_ypos),a.rubberline(c,c.l,c.ypos,c.r,c.ypos),e.cross_ypos=c.ypos))}function B(c){var e=c._Gx;c=c._Mx;if(null!==e.xmrk&&null!==e.ymrk){var d=a.real_to_pixel(c,e.xmrk,e.ymrk);if(!d.clipped){var f=c.active_canvas.getContext("2d");f.beginPath();f.strokeStyle=
c.xwfg;f.fillStyle=c.xwfg;f.arc(d.x,d.y,2,0,360);f.stroke();f.textBaseline="alphabetic";f.textAlign="left";f.fillStyle=c.fg;f.font=c.font.font;var g="x:"+a.format_g(e.xmrk,6,3,!0);f.fillText(g,d.x+5,d.y-5);g="y:"+a.format_g(e.ymrk,6,3,!0);f.fillText(g,d.x+5,d.y-5+c.text_h)}}}function A(a,c){var e=a._Mx,d=a._Gx;d.xdata=!1;for(var f=0;f<d.lyr.length;f++)d.lyr[f].xdata=5===c?!0:!1,d.lyr[f].xdata&&(d.xdata=!0);if(c!==d.cmode)if(5===c&&d.index)alert("Imag/Real mode not permitted in INDEX mode");else if(0>=
d.lyr.length)d.cmode=c,T(a);else if(0<c){f=d.cmode;d.cmode=c;var g=d.autox,h=d.autoy;d.autox=3;d.autoy=3;if(5===c||5===f)d.panxmin=1,d.panxmax=-1,d.panymin=1,d.panymax=-1,e.level=0,c===d.basemode?(e.stk[0].xmin=d.xmin,e.stk[0].xmax=d.xmax,e.stk[0].ymin=d.ymin,e.stk[0].ymax=d.ymax):5===c||5===d.basemode?K(a,{get_data:!0}):(e.stk[0].xmin=d.xmin,e.stk[0].xmax=d.xmax,K(a,{get_data:!0},d.xmin,d.xmax));else for(c===d.basemode?(d.panymin=1,d.panymax=-1,e.stk[0].ymin=d.ymin,e.stk[0].ymax=d.ymax):K(a,{},e.stk[e.level].xmin,
e.stk[e.level].xmax),f=1;f<=e.level;f++)e.stk[f].ymin=e.stk[0].ymin,e.stk[f].ymax=e.stk[0].ymax;d.autox=g;d.autoy=h;a.refresh()}}function E(c){var e,d=c._Mx,f=c._Gx;if(f.pan&&!d.widget){e=d.level;var g={ps:d.stk[e].ymin,pe:d.stk[e].ymax},h=g.ps!==f.panymin||g.pe!==f.panymax,h=h&&0<d.level;!f.autohide_panbars||h&&c.mouseOnCanvas||f.panning?(a.scrollbar(d,0,f.pyl,f.pyl+f.pthk,d.t,d.b,g,f.panymin,f.panymax,void 0,d.scrollbar_y),d.stk[e].ymin=g.ps,d.stk[e].ymax=g.pe):(g=d.canvas.getContext("2d"),g.fillStyle=
d.bg,g.fillRect(f.pyl,d.t,f.pyl+f.pthk,d.b-d.t));f.pl<d.width&&(g={ps:d.stk[e].xmin,pe:d.stk[e].xmax},h=(h=g.ps!==f.panxmin||g.pe!==f.panxmax)&&(!f.all||0<d.level),!f.autohide_panbars||h&&c.mouseOnCanvas||f.panning?(a.scrollbar(d,0,f.pl,f.pr,f.pt,f.pt+f.pthk,g,f.panxmin,f.panxmax,void 0,d.scrollbar_x),d.stk[e].xmin=g.ps,d.stk[e].xmax=g.pe):(g=d.canvas.getContext("2d"),g.fillStyle=d.bg,g.fillRect(f.pl,f.pt-1,f.pr-f.pl,f.pthk+4)))}}function H(c,e,d,f){var g=c._Mx,h=c._Gx,k,l,n,p;p=new a.SCROLLBAR;l=
new a.SCROLLBAR;var t=!1;k=g.level;0<h.panmode?(p.flag=11,l.flag=11):(p.flag=-12,l.flag=-12);0===d&&(p.action=0,l.action=0);if("Y"===e.substring(0,1)){if(p=g.stk[k].ymin,d=g.stk[k].ymax,n=d-p,"YPAN"===e?(e=g.scrollbar_y,d={ps:p,pe:d},a.scrollbar(g,l,h.pyl,h.pyl+h.pthk,g.t,g.b,d,h.panymin,h.panymax,f,e),p=d.ps,d=d.pe,0!==l.action&&a.scroll(g,l,a.XW_UPDATE,void 0,e)):"YCENTER"===e&&(p-=n*(g.ypos-(g.t+g.b)/2)/(g.b-g.t),d=p+n),p!==g.stk[k].ymin||d!==g.stk[k].ymax)g.stk[k].ymin=p,g.stk[k].ymax=d,h.cmode===
h.basemode&&1===g.level&&(h.ymin=Math.min(h.ymin,p),h.ymax=Math.max(h.ymax,d)),this.inPan=!0,f=document.createEvent("Event"),f.initEvent("ypan",!0,!0),f.level=g.level,f.xmin=g.stk[g.level].xmin,f.ymin=g.stk[g.level].ymin,f.xmax=g.stk[g.level].xmax,f.ymax=g.stk[g.level].ymax,a.dispatchEvent(g,f),this.inPan=!1,c.refresh(),t=!0}else if(l=g.stk[k].xmin,d=g.stk[k].xmax,n=d-l,"XPAN"===e?(e=g.scrollbar_x,d={ps:l,pe:d},a.scrollbar(g,p,h.pl,h.pr,h.pt,h.pt+h.pthk,d,h.panxmin,h.panxmax,f,e),l=d.ps,d=d.pe,0!==
p.action&&a.scroll(g,p,a.XW_UPDATE,void 0,e)):"XCENTER"===e&&(l+=n*(g.xpos-(g.l+g.r)/2)/(g.r-g.l),l!==g.stk[k].xmin&&(d=l+n)),g.stk[k].xmin!==l||g.stk[k].xmax!==d)g.stk[k].xmin=l,g.stk[k].xmax=d,h.xdata||1!==g.level||(h.xmin=g.stk[1].xmin,h.xmax=g.stk[1].xmax),this.inPan=!0,f=document.createEvent("Event"),f.initEvent("xpan",!0,!0),f.level=g.level,f.xmin=g.stk[g.level].xmin,f.ymin=g.stk[g.level].ymin,f.xmax=g.stk[g.level].xmax,f.ymax=g.stk[g.level].ymax,a.dispatchEvent(g,f),this.inPan=!1,c.refresh(),
t=!0;return t}function Q(c,e,d){var f=c._Mx,g=c._Gx,h,k,l;if("XPAN"===e)l=c._Mx.scrollbar_x;else if("YPAN"===e)l=c._Mx.scrollbar_y;else throw"Unable to drag scrollbar - scrollAction is not 'XPAN' or 'YPAN'!!";l.flag=-12;k=f.level;"XPAN"===e?(h=f.stk[k].xmin,k=f.stk[k].xmax):"YPAN"===e?(h=f.stk[k].ymin,k=f.stk[k].ymax):k=h=void 0;var n=l;n.action=a.SB_DRAG;if("YPAN"===e){var t=f.scrollbar_y.trange/f.scrollbar_y.h;4===n.origin&&(t*=-1);d=d.screenY-g.panning.ypos;d*=t;g.panning.ymin-d<g.panymin?(k=g.panymin+
(k-h),h=g.panymin):g.panning.ymax-d>g.panymax?(h=g.panymax-(k-h),k=g.panymax):(h=g.panning.ymin-d,k=g.panning.ymax-d)}else"XPAN"===e&&(t=f.scrollbar_x.trange/f.scrollbar_x.w,3===n.origin&&(t*=-1),d=d.screenX-g.panning.xpos,d*=t,g.panning.xmin+d<g.panxmin?(k=g.panxmin+(k-h),h=g.panxmin):g.panning.xmax+d>g.panxmax?(h=g.panxmax-(k-h),k=g.panxmax):(h=g.panning.xmin+d,k=g.panning.xmax+d));l.smin=h;l.srange=k-h;a.redrawScrollbar(l,f,void 0);p(c,l.smin,l.smin+l.srange,e.slice(0,1));this.inPan=!0;g=document.createEvent("Event");
"XPAN"===e?g.initEvent("xpan",!0,!0):"YPAN"===e&&g.initEvent("ypan",!0,!0);g.level=f.level;g.xmin=f.stk[f.level].xmin;g.ymin=f.stk[f.level].ymin;g.xmax=f.stk[f.level].xmax;g.ymax=f.stk[f.level].ymax;a.dispatchEvent(f,g);this.inPan=!1;l.action=0;c.refresh()}function S(c,e,d,f,g,h,k,l){var n=c._Mx;if(n.prompt)throw"Prompt already exists! Can only have one prompt at a time!";a.disableListeners(n);c.disable_listeners();var p=function(c,e){return function(d){e(d);a.enableListeners(n);c.enable_listeners();
c.refresh();void 0!==l&&l()}},t=function(){c.refresh()};try{a.prompt(n,e,d,p(c,f),t,g,h,k,5E3)}catch(v){console.log("ERROR: Failed to set up prompt due to: "+v)}}function T(e){var d=e._Mx,f=e._Gx,g=d.canvas.getContext("2d");0===f.sections&&(f.isec=0);if(d.warpbox){var h=W(e,d.warpbox.xo,d.warpbox.yo),k=W(e,d.warpbox.xl,d.warpbox.yl);f.aretx=h.x;f.arety=h.y;f.dretx=k.x-h.x;f.drety=k.y-h.y}else f.aretx=f.retx,f.arety=f.rety,f.dretx=f.retx-f.xmrk,f.drety=f.rety-f.ymrk;5===f.cmode&&1===f.iabsc&&(f.iabsc=
2);1===f.iabsc?(f.aretx=Math.round((f.aretx-f.xstart)/f.xdelta),f.index||(f.aretx+=1),f.dretx=Math.round(f.dretx/f.xdelta)):2===f.iabsc&&(0!==f.aretx&&(f.aretx=1/f.aretx),0!==f.arety&&(f.arety=1/f.arety),0!==f.dretx&&(f.dretx=1/f.dretx),0!==f.drety&&(f.drety=1/f.drety));if(f.show_readout&&!d.widget&&(g.fillStyle=d.bg,k=Math.floor(d.height-2.5*d.text_h),g.fillRect(d.text_w,k-1,49*d.text_w,k+1.5*d.text_h),k=Math.floor(d.height-0.5*d.text_h),h=Math.max(f.pr+d.text_w,d.width-2*d.text_w),g.fillStyle=d.bg,
g.fillRect(h,k-d.text_h,d.text_w,d.text_h),!f.autohide_readout||e.mouseOnCanvas||f.panning)){var l;0===f.iabsc&&4===f.ylab?(k=(c.sec2tspec(f.arety)+"                ").substring(0,16),l=(c.sec2tspec(f.drety,"delta")+"                ").substring(0,16)):(k=a.format_g(f.arety,16,9,!0),l=a.format_g(f.drety,16,9));0===f.iabsc&&4===f.xlab?(e=(c.sec2tspec(f.aretx)+"                ").substring(0,16),g=(c.sec2tspec(f.dretx,"delta")+"                ").substring(0,16)):(e=a.format_g(f.aretx,16,9,!0),g=a.format_g(f.dretx,
16,9));l="y: "+k+" dy: "+l+" L="+d.level+" "+y[f.cmode-1];e="x: "+e+" dx: "+g+" "+X[f.iabsc];3===f.iabsc&&(l=0===f.dretx?l.substr(0,20)+"sl: Inf             "+l.substr(40,l.length):l.substr(0,20)+"sl: "+a.format_g(f.drety/f.dretx,16,9)+l.substr(40,l.length));k=Math.floor(d.height-1.5*d.text_h);a.text(d,d.text_w,k,l);k=Math.floor(d.height-0.5*d.text_h);a.text(d,d.text_w,k,e);a.LEGACY_RENDER&&h<d.width&&(0<f.cntrls?a.text(d,h,k,"C"):a.text(d,h,k," "));a.colorbar(d,49*d.text_w-3,d.height-2.5*d.text_h,
d.text_w,2*d.text_h)}}function K(a,c,d,e,f,g){var h=a._Mx;a=a._Gx;c=!0===c.get_data;a.panxmin=1;a.panxmax=-1;a.panymin=1;a.panymax=-1;var k=void 0===d,l=void 0===e;if(0===a.lyr.length)a.panxmin=-1,a.panxmax=1,a.panymin=-1,a.panymax=1;else for(void 0===f&&(a.xlab=a.lyr[0].xlab),void 0===g&&(a.ylab=a.lyr[0].ylab),f=0;f<a.lyr.length;f++)if(k&&(d=a.lyr[f].xmin),l&&(e=a.lyr[f].xmax),a.xlab!==a.lyr[f].xlab&&(a.xlab=0),a.ylab!==a.lyr[f].ylab&&(a.ylab=0),c&&a.lyr[f].get_data(d,e),0<a.autox||0<a.autoy)for(;d<
e;)a.lyr[f].get_data(d,e),g=a.lyr[f].prep(d,e),a.all&&a.expand?0===a.lyr[f].size?d=e:a.index?d+=g:0<=a.lyr[f].xdelta?d+=a.lyr[f].size*a.lyr[f].xdelta:e+=a.lyr[f].size*a.lyr[f].xdelta:d=e;else a.lyr[f].prep(1,-1);f=a.panxmax-a.panxmin;0>f&&(a.panxmax=a.panxmin,a.panxmin=a.panxmax+f,f=-f);1E-20>=f&&(a.panxmin-=1,a.panxmax+=1);0!==(a.autox&1)&&k&&(h.stk[0].xmin=a.panxmin);if(0!==(a.autox&2)&&l&&(h.stk[0].xmax=a.panxmax,!a.all&&!a.xdata))for(f=0;f<a.lyr.length;f++)e=Math.min(a.lyr[f].xmax,h.stk[0].xmax),
g=Math.abs((e-a.lyr[f].xmin)/a.lyr[f].xdelta)-a.bufmax+1,0<g&&(h.stk[0].xmax=e-g*Math.abs(a.lyr[f].xdelta));0!==(a.autoy&1)&&(h.stk[0].ymin=a.panymin);0!==(a.autoy&2)&&(h.stk[0].ymax=a.panymax)}function W(c,d,e){var f=c._Gx;c=a.pixel_to_real(c._Mx,d,e);f.index&&(c.x*=f.xdelta);return c}function d(a,c,d,e,f,g){return a>=d&&a<=d+f&&c>=e&&c<=e+g}function v(a){var d=!1,e=a._Gx,f=a._Mx,g=f.xpos,h=f.ypos,k=" ";if(!a.mouseOnCanvas||!e.pan)return!1;a=h<=e.pt+e.pthk+2;var l=h>e.pt-2,h=h>=f.t&&h<=f.b,n=g>=
e.pl&&g<=e.pr,p=e.show_readout||"bottom"===e.x_scrollbar_location;g>f.r&&h?(k="YPAN",f.xpos=e.pyl+c.trunc(e.pthk/2),d=!0):p&&n&&l?(k="XPAN",f.ypos=e.pt+c.trunc(e.pthk/2),d=!0):!p&&n&&a&&(k="XPAN",f.ypos=e.pt+c.trunc(e.pthk/2),d=!0);return{inPanRegion:d,command:k}}function x(a){var d=!1;a=a._Mx;var e=a.xpos,f=a.ypos,g=a.text_h,h=a.text_w,k=" ";e<a.l-h&&f<=a.b&&f>=a.t?(k="YCENTER",d=!0):f>a.b+c.trunc(0.5*h)&&f<=a.b+c.trunc(c.trunc(3*g)/2)&&e>=a.l&&e<=a.r&&(k="XCENTER",d=!0);return{inCenterRegion:d,
command:k}}function F(c,d){var e,f,g;d.origin&1?(g=c.x-d.x,d.origin&2&&(g=d.w-g)):(g=c.y-d.y,2>=d.origin&&(g=d.h-g));f=a.scroll_real2pix(d);e=f.s1;f=f.sw;return g>=e&&g<=e+f?!0:!1}function P(c,d,e){var f=c._Mx,g;"XPAN"===e?g=f.scrollbar_x:"YPAN"===e&&(g=f.scrollbar_y);g.action=d;g.step=0.1*g.srange;g.page=9*g.step;g.scale=2;a.scroll(f,g,a.XW_COMMAND,void 0,g);p(c,g.smin,g.smin+g.srange,e.slice(0,1));this.inPan=!0;c=document.createEvent("Event");"XPAN"===e?c.initEvent("xpan",!0,!0):"YPAN"===e&&c.initEvent("ypan",
!0,!0);c.level=f.level;c.xmin=f.stk[f.level].xmin;c.ymin=f.stk[f.level].ymin;c.xmax=f.stk[f.level].xmax;c.ymax=f.stk[f.level].ymax;a.dispatchEvent(f,c);this.inPan=!1}function p(a,c,d,e){var f=a._Mx,g=a._Gx,h=f.level;if("X"===e){if(f.stk[h].xmin!==c||f.stk[h].xmax!==d)f.stk[h].xmin=c,f.stk[h].xmax=d,g.xdata||1!==f.level||(g.xmin=f.stk[1].xmin,g.xmax=f.stk[1].xmax),a.refresh()}else"Y"!==e||c===f.stk[h].ymin&&d===f.stk[h].ymax||(f.stk[h].ymin=c,f.stk[h].ymax=d,g.cmode===g.basemode&&1===f.level&&(g.ymin=
Math.min(g.ymin,c),g.ymax=Math.max(g.ymax,d)),a.refresh())}var Y="Keypress Table:\n--------------\n?    - Main help box.\nA    - Toggle display x,y readouts:\n       (absc) -> (index) -> (1/absc) -> (time).\nB    - Toggle LM Drag Mode:\n       (box) -> (horizontal) -> (vertical).\nC    - Toggle controls.\nK    - Show Marker.\nL    - Toggle legend.\nM    - Pops up main menu\nR    - Toggle display specs (x/y readout)\nS    - Toggle display specs and axes.\nT    - Popup box with timecode value at mouse.\nX    - Popup box with X value at mouse.\nY    - Popup box with Y value at mouse.\nF    - Toggle fullscreen.\n";
e.browserIsCompatible=function(){var a=document.createElement("canvas").getContext?!0:!1,c="ArrayBuffer"in window;return a&&c};navigator.userAgent.match(/(iPad|iPhone|iPod)/i)||"undefined"===typeof Float64Array||Float64Array.emulated||!Float64Array.BYTES_PER_ELEMENT?e.PointArray=Float32Array:e.PointArray=Float64Array;e.Plot=function(q,s){if(!e.browserIsCompatible())throw"Browser is not compatible";var k=this._Mx=a.open(q);this._Gx=new u;this._Gx.parent=q;this.mouseOnCanvas=!1;s||(s={});l(this,s);
this._refresh();this.onmousemove=function(c){return function(d){var e=c._Mx,f=c._Gx,g=d.target.getBoundingClientRect(),h=void 0===d.offsetX?d.pageX-g.left-window.scrollX:d.offsetX;d=void 0===d.offsetX?d.pageY-g.top-window.scrollY:d.offsetY;g=W(c,h,d);f.retx=g.x;f.rety=g.y;e.widget||(T(c),g=document.createEvent("Event"),g.initEvent("mmove",!0,!0),g.xpos=h,g.ypos=d,g.x=f.retx,g.y=f.rety,a.dispatchEvent(e,g)&&(f.cross&&(e.warpbox?(void 0!==f.cross_xpos&&a.rubberline(e,f.cross_xpos,e.t,f.cross_xpos,e.b),
void 0!==f.cross_ypos&&a.rubberline(e,e.l,f.cross_ypos,e.r,f.cross_ypos),f.cross_xpos=void 0,f.cross_ypos=void 0):c.mouseOnCanvas&&C(c)),2===f.cntrls&&(g=document.createEvent("Event"),g.initEvent("mtag",!0,!0),g.x=f.retx,g.y=f.rety,g.xpos=h,g.ypos=d,a.dispatchEvent(e,g))))}}(this);this.ontouchmove=function(a){return function(c){c.preventDefault();a.onmousemove(c)}}(this);this.throttledOnMouseMove=c.throttle(this._Gx.scroll_time_interval,this.onmousemove);a.addEventListener(k,"mousemove",this.throttledOnMouseMove,
!1);this.onmouseout=function(a){return function(c){c=a._Gx;var d=a._Mx;a.mouseOnCanvas&&(a.mouseOnCanvas=!1,c.autohide_readout&&T(a),c.autohide_panbars&&E(a),d.prompt&&d.prompt.input.enableBlur())}}(this);a.addEventListener(k,"mouseout",this.onmouseout,!1);this.onmouseover=function(a){return function(c){c=a._Gx;var d=a._Mx;a.mouseOnCanvas=!0;c.autohide_panbars&&E(a);d.prompt&&d.prompt.input.disableBlur()}}(this);a.addEventListener(k,"mouseover",this.onmouseover,!1);this.onmousedown=function(c){return function(e){e.preventDefault();
var q=c._Mx,k=c._Gx;q.widget&&"ONESHOT"===q.widget.type&&(q.widget=null,c.refresh());a.ifevent(q,e);var s=document.createEvent("Event");s.initEvent("mdown",!0,!0);s.xpos=q.xpos;s.ypos=q.ypos;s.x=k.retx;s.y=k.rety;s.which=e.which;if(!a.dispatchEvent(q,s))return!1;var l=v(c);if(l.inPanRegion){if(e.preventDefault()," "!==l.command){var n=null,s=null;"XPAN"===l.command?n=q.scrollbar_x:"YPAN"===l.command&&(n=q.scrollbar_y);if(2===e.which)s={x:q.xpos,y:q.ypos},void 0!==n&&F(s,n)&&f(c,l.command);else if(" "!==
l.command&&(s={x:q.xpos,y:q.ypos},!F(s,n)&&1===e.which)){H(c,l.command,0,e);var p=function(){F({x:q.xpos,y:q.ypos},n)?k.stillPanning&&(window.clearInterval(k.stillPanning),k.repeatPanning=void 0):H(c,l.command,0,e)};k.stillPanning=window.setTimeout(function(){k.repeatPanning=window.setInterval(p,50)},250)}}}else if(1===e.which||3===e.which)if(s=!1,k.legendBtnLocation&&(s=d(q.xpos,q.ypos,k.legendBtnLocation.x,k.legendBtnLocation.y,k.legendBtnLocation.width,k.legendBtnLocation.height)),s)c.change_settings({legend:!k.legend});
else{T(c);var s={opacity:0,return_value:"zoom"},t={opacity:0.4,fill_color:q.hi,return_value:"select"};1===e.which?"zoom"===k.default_rubberbox_action?a.rubberbox(q,h(c,e.which),k.default_rubberbox_mode,s,t):"select"===k.default_rubberbox_action&&a.rubberbox(q,h(c,e.which),k.default_rubberbox_mode,t,s):3===e.which&&("zoom"===k.default_rightclick_rubberbox_action?a.rubberbox(q,h(c,e.which),k.default_rightclick_rubberbox_mode,s,t):"select"===k.default_rightclick_rubberbox_action&&a.rubberbox(q,h(c,e.which),
k.default_rightclick_rubberbox_mode,t,s))}else 2===e.which&&(k.nomenu||g(c));return!1}}(this);this.ontouchstart=function(a){return function(c){c.preventDefault();a.onmousedown({which:1})}}(this);a.addEventListener(k,"mousedown",this.onmousedown,!1);this.docMouseUp=function(a){return function(c){var d=a._Gx;1===c.which&&(d.panning=void 0,a._Mx.scrollbar_x.action=0,a._Mx.scrollbar_y.action=0);d.stillPanning&&(window.clearTimeout(d.stillPanning),d.stillPanning=void 0);d.repeatPanning&&(window.clearInterval(d.repeatPanning),
d.repeatPanning=void 0);return!1}}(this);document.addEventListener("mouseup",this.docMouseUp,!1);this.mouseup=function(c){return function(d){d.preventDefault();var e=c._Gx,f=c._Mx;a.ifevent(c._Mx,d);var g=document.createEvent("Event");g.initEvent("mup",!0,!0);g.xpos=f.xpos;g.ypos=f.ypos;g.x=e.retx;g.y=e.rety;g.which=d.which;if((g=a.dispatchEvent(f,g))&&!(f.warpbox||f.widget||f.prompt))if(1===d.which)g=x(c),g.inCenterRegion?" "!==g.command&&H(c,g.command,0,d):1===e.cntrls&&(e.xmrk=e.retx,e.ymrk=e.rety,
g=document.createEvent("Event"),g.initEvent("mtag",!0,!0),g.x=e.xmrk,g.y=e.ymrk,g.xpos=d.x||d.clientX,g.ypos=d.y||d.clientY,g.w=void 0,g.h=void 0,g.shift=d.shiftKey,a.dispatchEvent(f,g),(e.always_show_marker||e.show_marker)&&c.redraw());else if(2===d.which){if(e.nomenu&&(g=document.createEvent("Event"),g.initEvent("showmenu",!0,!0),g.x=d.x||d.clientX,g.y=d.y||d.clientY,g=a.dispatchEvent(f,g))){d.stopPropagation&&d.stopPropagation();d.cancelBubble=!0;a.removeEventListener(f,"mousedown",c.onmousedown,
!1);var h=function(){try{var d=document.createEvent("Event");d.initEvent("hidemenu",!0,!0);a.dispatchEvent(f,d)&&a.addEventListener(f,"mousedown",c.onmousedown,!1)}finally{document.removeEventListener("mouseup",h,!1)}};document.addEventListener("mouseup",h,!1)}}else 3===d.which&&(d.preventDefault(),c.unzoom(1),c.refresh())}}(this);this.ontouchend=function(a){return function(a){a.preventDefault()}}(this);a.addEventListener(k,"mouseup",this.mouseup,!1);this.mouseclick=function(c){return function(d){d.preventDefault();
var e=c._Gx,f=c._Mx;a.ifevent(c._Mx,d);var g=document.createEvent("Event");g.initEvent("mclick",!0,!0);g.xpos=f.xpos;g.ypos=f.ypos;g.x=e.retx;g.y=e.rety;g.which=d.which;a.dispatchEvent(f,g);return!1}}(this);a.addEventListener(k,"click",this.mouseclick,!1);this.mousedblclick=function(c){return function(d){d.preventDefault();var e=c._Gx,f=c._Mx;a.ifevent(c._Mx,d);var g=document.createEvent("Event");g.initEvent("mdblclick",!0,!0);g.xpos=f.xpos;g.ypos=f.ypos;g.x=e.retx;g.y=e.rety;g.which=d.which;a.dispatchEvent(f,
g);return!1}}(this);a.addEventListener(k,"dblclick",this.mousedblclick,!1);this.dragMouseDownHandler=function(a){return function(c){var d=a._Mx,e=a._Gx,f=v(a);if(f.inPanRegion&&(c.preventDefault()," "!==f.command)){var g;"XPAN"===f.command?g=d.scrollbar_x:"YPAN"===f.command&&(g=d.scrollbar_y);var h={x:d.xpos,y:d.ypos};void 0!==g&&F(h,g)&&1===c.which&&(e.panning={axis:f.command,xpos:c.screenX,ypos:c.screenY,xmin:d.stk[d.level].xmin,xmax:d.stk[d.level].xmax,ymin:d.stk[d.level].ymin,ymax:d.stk[d.level].ymax})}}}(this);
window.addEventListener("mousedown",this.dragMouseDownHandler,!1);this.dragMouseMoveHandler=function(a){return function(c){var d=a._Gx;if(void 0!==d.panning)try{Q(a,d.panning.axis,c)}catch(e){console.log("Error: "+e)}}}(this);this.throttledDragOnMouseMove=c.throttle(this._Gx.scroll_time_interval,this.dragMouseMoveHandler);window.addEventListener("mousemove",this.throttledDragOnMouseMove,!1);this.dragMouseUpHandler=function(a){return function(c){var d=a._Gx;1===c.which&&(d.panning=void 0)}}(this);
window.addEventListener("mouseup",this.dragMouseUpHandler,!1);this.onresize=function(c){return function(d){a.checkresize(c._Mx)&&c.refresh()}}(this);this.wheelHandler=function(d){var e=d._Mx,f=d._Gx,g=c.throttle(100,function(c){var g;"XPAN"===c.command?g=e.scrollbar_x:"YPAN"===c.command&&(g=e.scrollbar_y);g.action=f.wheelscroll_mode_natural?0>event.deltaY?a.SB_WHEELDOWN:a.SB_WHEELUP:0>event.deltaY?a.SB_WHEELUP:a.SB_WHEELDOWN;g.step=0.1*g.srange;g.page=9*g.step;a.scroll(e,g,a.XW_COMMAND,void 0,g);
p(d,g.smin,g.smin+g.srange,c.command.slice(0,1))}),h=c.throttle(100,function(){var a=f.wheelZoomPercent||0.2;f.wheelscroll_mode_natural?0<event.deltaY&&(a*=-1):0>event.deltaY&&(a*=-1);"x"===f.wheelZoom?d.percent_zoom(a,1,!0):"y"===f.wheelZoom?d.percent_zoom(1,a,!0):d.percent_zoom(a,a,!0)});return function(c){a.ifevent(e,c);var q=v(d);d.mouseOnCanvas&&(c.preventDefault(),q.inPanRegion?g(q):f.wheelZoom&&h())}}(this);window.addWheelListener(window,this.wheelHandler,!1);window.addEventListener("resize",
this.onresize,!1);s.nokeypress||(this.onkeypress=function(d){return function(e){var f=d._Mx,h=d._Gx;if(d.mouseOnCanvas&&(!f.widget||"MENU"!==f.widget.type))if(f.widget&&"ONESHOT"===f.widget.type)f.widget=null,d.refresh();else{var q=getKeyCode(e),k=document.createEvent("Event");k.initEvent("plotkeypress",!0,!0);k.keyCode=q;k.shiftKey=e.shiftKey;k.ctrlKey=e.ctrlKey;k.altKey=e.altKey;k.metaKey=e.metaKey;if(k=a.dispatchEvent(f,k))97===q?(h.iabsc=(h.iabsc+1)%4,T(d)):108===q?d.change_settings({legend:!h.legend}):
103===q?d.change_settings({grid:!h.grid}):98===q||2===q?f.warpbox&&(f.warpbox.mode="box"===f.warpbox.mode?"horizontal":"horizontal"===f.warpbox.mode?"vertical":"box",a.redraw_warpbox(f)):99===q?d.change_settings({xcnt:-1*h.cntrls}):114===q?d.change_settings({show_readout:!h.show_readout}):115===q?d.change_settings({specs:!h.specs}):120===q?(e=d._Gx,f=d._Mx,h=e.aretx.toString(),1===e.iabsc?a.message(f,"INDEX = "+h):2===e.iabsc?a.message(f,"1/X = "+h):a.message(f,"X = "+h)):121===q?(e=d._Gx,f=d._Mx,
h=e.arety.toString(),2===e.iabsc?a.message(f,"1/Y = "+h):a.message(f,"Y = "+h)):122===q?(e=d._Gx,f=d._Mx,e.zmin&&e.zmax&&(h="",h=1===e.lyr.length?"Z = "+e.lyr[0].get_z(e.retx,e.rety).toString():"TODO",a.message(f,h))):116===q?(e=d._Gx,f=d._Mx,0<e.lyr.length&&(h=e.lyr[0].hcb,1!==h["class"]||1!==h.xunits&&4!==h.xunits?2!==h["class"]||1!==h.yunits&&4!==h.yunits?a.message(f,"Time = UNK"):a.message(f,"Time = "+c.sec2tod(h.timecode+e.rety),!0):a.message(f,"Time = "+c.sec2tod(h.timecode+e.retx),!0))):109===
q?h.nomenu||(k=document.createEvent("Event"),k.initEvent("showmenu",!0,!0),k.x=f.x,k.y=f.y,(k=a.dispatchEvent(f,k))&&g(d)):63===q?a.message(f,"To zoom, press and drag the left mouse (LM) over the region of interest and release. To unzoom, press right mouse (RM).  Press the middle mouse (MM) button or press the by selecting 'Keypress Info' from the main menu."):102===q?(a.fullscreen(f),d.refresh()):9===q&&e.ctrlKey?d.change_settings({invert:null}):107===q&&(h.show_marker=!h.show_marker,d.redraw())}}}(this),
setKeypressHandler(this.onkeypress));return this};e.Plot.prototype={add_plugin:function(a,c){void 0===c&&(c=Number.MAX_VALUE);if(0>=c)throw"Invalid plugin zorder";a.init(this);var d=document.createElement("canvas");d.width=this._Mx.canvas.width;d.height=this._Mx.canvas.height;this._Gx.plugins.push({impl:a,zorder:c,canvas:d});this._Gx.plugins.sort(function(a,c){return a.zorder-c.zorder});this.refresh()},remove_plugin:function(a){for(var c=this._Gx.plugins.length;c--;)this._Gx.plugins[c].impl===a&&
(a.dispose&&a.dispose(),this._Gx.plugins[c].canvas.parentNode&&this._Gx.plugins[c].canvas.parentNode.removeElement(this._Gx.plugins[c].canvas),this._Gx.plugins.splice(c,1));this._Gx.plugins.sort(function(a,c){return a.zorder-c.zorder});this.refresh()},addListener:function(c,d){a.addEventListener(this._Mx,c,d,!1)},removeListener:function(c,d){a.removeEventListener(this._Mx,c,d,!1)},change_settings:function(c){for(var d=this._Gx,e=this._Mx,f=0;f<d.lyr.length;f++)d.lyr[f].change_settings(c);void 0!==
c.grid&&(d.grid=null===c.grid?!d.grid:c.grid);void 0!==c.gridBackground&&(d.gridBackground=c.gridBackground);void 0!==c.gridStyle&&(d.gridStyle=c.gridStyle);void 0!==c.wheelZoom&&(d.wheelZoom=c.wheelZoom);void 0!==c.wheelZoomPercent&&(d.wheelZoomPercent=c.wheelZoomPercent);void 0!==c.autol&&(d.autol=c.autol);void 0!==c.index&&c.index!==d.index&&(d.index=null===c.index?!d.index:c.index,d.index&&1!==d.iabsc?d.iabsc=1:d.index||1!==d.iabsc||(d.iabsc=0),K(this,{get_data:!1},void 0,void 0),this.unzoom());
void 0!==c.all&&(d.all=null===c.all?!d.all:c.all);void 0!==c.show_x_axis&&(d.show_x_axis=null===c.show_x_axis?!d.show_x_axis:c.show_x_axis,d.specs=d.show_x_axis||d.show_y_axis||d.show_readout);void 0!==c.show_y_axis&&(d.show_y_axis=null===c.show_y_axis?!d.show_y_axis:c.show_y_axis,d.specs=d.show_x_axis||d.show_y_axis||d.show_readout);void 0!==c.show_readout&&(d.show_readout=null===c.show_readout?!d.show_readout:c.show_readout,d.specs=d.show_x_axis||d.show_y_axis||d.show_readout);void 0!==c.specs&&
(d.specs=null===c.specs?!d.specs:c.specs,d.specs?(d.show_x_axis=!0,d.show_y_axis=!0,d.show_readout=!0):(d.show_x_axis=!1,d.show_y_axis=!1,d.show_readout=!1));void 0!==c.xcnt&&(d.cntrls="leftmouse"===c.xcnt?1:"continuous"===c.xcnt?2:"disable"===c.xcnt&&0<d.cntrls?-1*d.cntrls:"enable"===c.xcnt&&0>d.cntrls?-1*d.cntrls:c.xcnt);void 0!==c.legend&&(d.legend=null===c.legend?!d.legend:c.legend);void 0!==c.pan&&(d.pan=null===c.pan?!d.pan:c.pan);void 0!==c.cross&&(d.cross=null===c.cross?!d.cross:c.cross,d.cross?
(d.cross_xpos=void 0,d.cross_ypos=void 0,!e.warpbox&&this.mouseOnCanvas&&C(this)):(void 0!==d.cross_xpos&&a.rubberline(e,d.cross_xpos,e.t,d.cross_xpos,e.b),void 0!==d.cross_ypos&&a.rubberline(e,e.l,d.cross_ypos,e.r,d.cross_ypos),d.cross_xpos=void 0,d.cross_ypos=void 0));void 0!==c.cmode&&A(this,c.cmode);if(void 0!==c.phunits){var g=c.phunits,f=this._Gx,h=this._Mx,k=f.plab;"R"===g?k=23:"D"===g&&(k=24);"C"===g&&(k=25);if(k!==f.plab&&(g=[Math.PI,180,0.5],g=g[k-23]/g[f.plab-23],f.plab=k,2===f.cmode)){for(k=
0;k<=h.level;k++)h.stk[k].ymin*=g,h.stk[k].ymax*=g,h.stk[k].yscl*=g;f.panymin*=g;f.panymax*=g;this.refresh()}}void 0!==c.rubberbox_action&&(d.default_rubberbox_action=c.rubberbox_action);void 0!==c.rubberbox_mode&&(d.default_rubberbox_mode=c.rubberbox_mode);void 0!==c.rightclick_rubberbox_action&&(d.default_rightclick_rubberbox_action=c.rightclick_rubberbox_action);void 0!==c.rightclick_rubberbox_mode&&(d.default_rightclick_rubberbox_mode=c.rightclick_rubberbox_mode);void 0!==c.wheelscroll_mode_natural&&
(d.wheelscroll_mode_natural=c.wheelscroll_mode_natural);void 0!==c.colors&&(c.colors.fg||(c.colors.fg=e.fg),c.colors.bg||(c.colors.bg=e.bg),a.setbgfg(e,c.colors.bg,c.colors.fg,e.xi));void 0!==c.cmap&&(d.cmap=null===c.cmap?2===d.cmode?2:1:c.cmap,n(this,d.cmap));void 0!==c.yinv&&(e.origin=c.yinv?4:1);void 0!==c.rasterSmoothing&&(d.rasterSmoothing=null===c.rasterSmoothing?!d.rasterSmoothing:c.rasterSmoothing);void 0!==c.fillStyle&&(d.fillStyle=c.fillStyle);void 0!==c.invert&&(null===c.invert?a.invertbgfg(e):
!0===c.invert?a.setbgfg(this,"white","black"):a.setbgfg(this,"black","white"));void 0!==c.nomenu&&(d.nomenu=null===c.nomenu?!d.nomenu:c.nomenu);void 0!==c.ymax&&(null===c.ymax?(d.autoy|=2,d.panymax=void 0,K(this,{}),d.ymax=d.panymax):(d.autoy&=13,d.ymax=c.ymax,p(this,e.stk[0].ymin,c.ymax,"Y")));void 0!==c.ymin&&(null===c.ymin?(d.autoy|=1,d.panymin=void 0,K(this,{}),d.ymin=d.panymin):(d.autoy&=14,d.ymin=c.ymin,p(this,c.ymin,e.stk[0].ymax,"Y")));void 0!==c.autoy&&(d.autoy=c.autoy,0!==(d.autoy&1)&&(d.ymin=
void 0),0!==(d.autoy&2)&&(d.ymax=void 0));void 0!==c.xmin&&p(this,c.xmin,e.stk[0].xmax,"X");void 0!==c.xmax&&p(this,e.stk[0].xmin,c.xmax,"X");void 0!==c.zmin&&(d.zmin=c.zmin,d.autoz&=2);void 0!==c.zmax&&(d.zmax=c.zmax,d.autoz&=1);void 0!==c.autoz&&(d.autoz=c.autoz,0!==(d.autoz&1)&&(d.zmin=void 0),0!==(d.autoz&2)&&(d.zmax=void 0));void 0!==c.note&&(d.note=c.note);this.refresh();void 0!==c.pan&&T(this)},reread:function(){for(var c=this._Gx,d=[],e=0;e<c.lyr.length;e++)d[e]=c.lyr[e];e=c.HCB.slice();this.deoverlay();
for(var f=0;f<e.length;f++)this.overlay_bluefile(e[f]);for(e=0;e<c.lyr.length;e++)c.lyr[e].symbol=d[e].symbol,c.lyr[e].radius=d[e].radius;this.refresh();c=document.createEvent("Event");c.initEvent("reread",!0,!0);a.dispatchEvent(this._Mx,c)},cleanup:function(){},reload:function(a,c,d,e){var f=this._Mx,g=this._Gx;0>a||a>=g.lyr.length||void 0===g.lyr[a].reload||(a=g.lyr[a].reload(c,d),0===f.level&&K(this,{get_data:!1},a.xmin,a.xmax),e?this._refresh():this.refresh())},rescale:function(){0===this._Mx.level&&
K(this,{get_data:!1},void 0,void 0);this.refresh()},push:function(a,c,d,e,f){var g=this._Mx,h=this._Gx;0>a||a>=h.lyr.length||void 0===h.lyr[a].push||(a=h.lyr[a].push(c,d,e),0===g.level&&a&&K(this,{get_data:!1}),f?this._refresh():this.refresh())},overlay_array:function(a,d,e){c.log.debug("Overlay array");a=c.initialize(a,d);return this.overlay_bluefile(a,e)},overlay_pipe:function(a,d){c.log.debug("Overlay pipe");a||(a={});a.pipe=!0;var e=c.initialize(null,a);return this.overlay_bluefile(e,d)},overlay_websocket:function(a,
d,e){c.log.debug("Overlay websocket: "+a);a=new WebSocket(a,"plot-data");a.binaryType="arraybuffer";var f=this;d||(d={});d.pipe=!0;var g=c.initialize(null,d);g.ws=a;var h=this.overlay_bluefile(g,e);a.onopen=function(a){};a.onmessage=function(a){return function(a){a.data instanceof ArrayBuffer?(a=g.createArray(a.data),f.push(h,a)):"string"===typeof a.data&&(f._Gx.lyr[h].hcb||c.log.warning("Couldn't find header for layer "+h),a=JSON.parse(a.data),f.push(h,[],a))}}(a);return h},overlay_href:function(a,
d,e){c.log.debug("Overlay href: "+a);try{this.show_spinner();var f=function(a,c){return function(d){try{if(d){var f=a.overlay_bluefile(d,e);c&&c(d,f)}else alert("Failed to load data")}finally{a.hide_spinner()}}}(this,d);(new BlueFileReader).read_http(a,f)}catch(g){console.log(g),alert("Failed to load data"),this.hide_spinner()}},show_spinner:function(){this._Gx.spinner||(U.color=this._Mx.xwfg,this._Gx.spinner=(new Spinner(U)).spin(this._Gx.parent))},hide_spinner:function(){this._Gx.spinner&&this._Gx.spinner.stop();
this._Gx.spinner=void 0},add_layer:function(c){var d=this._Gx,e=this._Mx,f=document.createEvent("Event");f.initEvent("lyradd",!0,!0);f.index=d.lyr.length;f.name=c.name;f.layer=c;a.dispatchEvent(e,f)&&d.lyr.push(c)},get_layer:function(a){var c=this._Gx;return 0<=a&&a<c.lyr.length?c.lyr[a]:null},overlay_bluefile:function(a,d){c.log.debug("Overlay bluefile: "+a.file_name);var f=this._Mx,g=this._Gx;d=d||{};var h=0===g.HCB.length;g.HCB.push(a);1===g.HCB.length&&k(this,!0);var l=g.lyr.length;void 0===d.layerType?
1===a["class"]?e.Layer1D.overlay(this,a,d):2===a["class"]&&e.Layer2D.overlay(this,a,d):"1D"===d.layerType?e.Layer1D.overlay(this,a,d):"2D"===d.layerType?e.Layer2D.overlay(this,a,d):d.layerType.overlay(this,a,d);A(this,g.cmode);if(h||d.expand)if(0===g.HCB.length)k(this,!1);else{g.basemode=g.cmode;var n,p;0===(g.autox&&1)&&(n=g.xmin);0===(g.autox&&2)&&(p=g.xmin);K(this,{get_data:!0},n,p);f.level=0;0!==(g.autox&&1)&&(g.xmin=f.stk[0].xmin);0!==(g.autox&&2)&&(g.xmax=f.stk[0].xmax);0!==(g.autoy&&1)&&(g.ymin=
f.stk[0].ymin);0!==(g.autoy&&2)&&(g.ymax=f.stk[0].ymax);f.resize=!0;f.origin=g.lyr[0].preferred_origin?g.lyr[0].preferred_origin:1}else for(f=l;f<g.lyr.length;f++)G(this,f);t(this);this.refresh();return g.HCB.length-1},load_files:function(a,c){for(var d=function(a){return function(d){a.overlay_bluefile(d,c)}}(this),e=0;e<a.length;e++){var f=a[e];(new BlueFileReader).read(f,d)}},deoverlay:function(a){var c=this._Gx;if(0<c.HCB.length)if(void 0===a)for(a=c.HCB.length-1;0<=a;a--)this.remove_layer(a);
else if(0>a){a=c.HCB.length+a;if(0>a)return;this.remove_layer(a)}else a<c.HCB.length&&this.remove_layer(a);0===c.lyr.length&&(k(this,!1),K(this,{}))},remove_layer:function(c){var d=this._Gx,e="",f=null;if(0<=c&&c<d.HCB.length){e=d.HCB[c].file_name;f=d.HCB[c];for(d.HCB[c]=null;c<d.HCB.length-1;c++)d.HCB[c]=d.HCB[c+1];d.HCB.length-=1}for(c=d.lyr.length-1;0<=c;c--)if(d.lyr[c].hcb===f){var g=c,h=this._Gx,k=this._Mx,l=document.createEvent("Event");l.initEvent("lyrdel",!0,!0);l.index=g;l.name=h.lyr[g].name;
l.layer=h.lyr[g];if(a.dispatchEvent(k,l)){h.lyr[g].ybufn=0;h.lyr[g].ybuf=null;if(g<h.lyr.length-1)for(;g<h.lyr.length-1;g++)h.lyr[g]=h.lyr[g+1];h.lyr.length-=1;0<h.HCB.length&&(h.panxmin=1,h.panxmax=-1,h.panymin=1,h.panymax=-1)}}t(this);this.refresh();d=document.createEvent("Event");d.initEvent("file_deoverlayed",!0,!0);""!==e&&(d.fileName=e);a.dispatchEvent(this._Mx,d)},pixel_zoom:function(a,c,d,e,f){a=W(this,a,c);d=W(this,d,e);this.zoom(a,d,f)},percent_zoom:function(a,c,d){var e=this._Mx,f=this._Gx,
g=0;1>Math.abs(a)&&(g=Math.abs(e.stk[e.level].xmax-e.stk[e.level].xmin),g=g*a/2);a=0;1>Math.abs(c)&&(a=Math.abs(e.stk[e.level].ymax-e.stk[e.level].ymin),a=a*c/2);c={x:Math.max(e.stk[e.level].xmin+g,f.panxmin),y:Math.max(e.stk[e.level].ymin+a,f.panymin)};e={x:Math.min(e.stk[e.level].xmax-g,f.panxmax),y:Math.min(e.stk[e.level].ymax-a,f.panymax)};this.zoom(c,e,d)},zoom:function(c,d,e){var f=this._Mx,g=this._Gx;if(!(9<=f.level)){void 0===c.x&&(c.x=f.stk[f.level].xmin);void 0===c.y&&(c.y=f.stk[f.level].ymin);
void 0===d.x&&(d.x=f.stk[f.level].xmax);void 0===d.y&&(d.y=f.stk[f.level].ymax);if(d.x<c.x){var h=d.x;d.x=c.x;c.x=h}d.y<c.y&&(h=d.y,d.y=c.y,c.y=h);h={};h.xscl=f.stk[f.level].xscl;h.yscl=f.stk[f.level].yscl;h.xmin=c.x;h.xmax=d.x;h.ymin=c.y;h.ymax=d.y;g.index&&(h.xmin=Math.min(h.xmin/g.xdelta),h.xmax=Math.min(h.xmax/g.xdelta));e&&g.inContinuousZoom?f.stk[f.level]=h:(f.stk.push(h),f.level=f.stk.length-1);g.inContinuousZoom=e;this.inZoom=!0;c=document.createEvent("Event");c.initEvent("zoom",!0,!0);c.level=
f.level;c.inContinuousZoom=g.inContinuousZoom;c.xmin=f.stk[f.level].xmin;c.ymin=f.stk[f.level].ymin;c.xmax=f.stk[f.level].xmax;c.ymax=f.stk[f.level].ymax;a.dispatchEvent(f,c);this.inZoom=!1;this.refresh()}},unzoom:function(c){var d=this._Mx,e=this._Gx;if(0!==d.level){c||(c=d.stk.length);for(;0<c&&0!==d.level;)d.stk.pop(),d.level=d.stk.length-1,c-=1;0===d.level&&this.rescale();e.inContinuousZoom=!1;this.inZoom=!0;c=document.createEvent("Event");c.initEvent("unzoom",!0,!0);c.level=d.level;c.xmin=d.stk[d.level].xmin;
c.ymin=d.stk[d.level].ymin;c.xmax=d.stk[d.level].xmax;c.ymax=d.stk[d.level].ymax;a.dispatchEvent(d,c);this.inZoom=!1;this.refresh()}},mimic:function(a,c){var d=this;if(!c)throw"mimic must be called with at least one event mask";c.zoom?a.addListener("zoom",function(a){d.inZoom||d.zoom({x:a.xmin,y:a.ymin},{x:a.xmax,y:a.ymax},a.inContinuousZoom)}):c.xzoom?a.addListener("zoom",function(a){d.inZoom||d.zoom({x:a.xmin,y:void 0},{x:a.xmax,y:void 0},a.inContinuousZoom)}):c.yzoom&&a.addListener("zoom",function(a){d.inZoom||
d.zoom({x:void 0,y:a.ymin},{x:void 0,y:a.ymax},a.inContinuousZoom)});c.unzoom&&a.addListener("unzoom",function(a){d.inZoom||a.level<d._Mx.level&&d.unzoom(d._Mx.level-a.level)});(c.pan||c.xpan)&&a.addListener("xpan",function(a){d.inPan||p(d,a.xmin,a.xmax,"X")});(c.pan||c.ypan)&&a.addListener("ypan",function(a){d.inPan||p(d,a.ymin,a.ymax,"Y")})},redraw:function(){var a=this._Gx,c=this._Mx,d=c.canvas.getContext("2d");a.plotData.valid?(d.drawImage(a.plotData,c.l-1,c.t-1,c.r-c.l+2,c.b-c.t+2,c.l-1,c.t-
1,c.r-c.l+2,c.b-c.t+2),w(this),a.cross_xpos=void 0,a.cross_ypos=void 0,!c.warpbox&&this.mouseOnCanvas&&C(this),(a.always_show_marker||a.show_marker)&&B(this)):this.refresh()},refresh:function(){var c=this;a.render(this._Mx,function(){c._refresh()})},enable_listeners:function(){var c=this._Mx;a.addEventListener(c,"mousedown",this.onmousedown,!1);a.addEventListener(c,"mousemove",this.throttledOnMouseMove,!1);window.addEventListener("mouseup",c.onmouseup,!1);window.addEventListener("keydown",c.onkeydown,
!1);window.addEventListener("keyup",c.onkeyup,!1);window.addEventListener("resize",this.onresize,!1);document.addEventListener("mouseup",this.docMouseUp,!1);a.addEventListener(c,"mouseup",this.mouseup,!1);window.addEventListener("mousedown",this.dragMouseDownHandler,!1);window.addEventListener("mousemove",this.throttledDragOnMouseMove,!1);window.addEventListener("mouseup",this.dragMouseUpHandler,!1);window.addEventListener("wheel",this.wheelHandler,!1);window.addEventListener("mousewheel",this.wheelHandler,
!1);window.addEventListener("DOMMouseScroll",this.wheelHandler,!1);window.addEventListener("keypress",this.onkeypress,!1)},disable_listeners:function(){var c=this._Mx;a.removeEventListener(c,"mousedown",this.onmousedown,!1);a.removeEventListener(c,"mousemove",this.throttledOnMouseMove,!1);a.removeEventListener(c,"mouseup",this.mouseup,!1);window.removeEventListener("mouseup",c.onmouseup,!1);window.removeEventListener("keydown",c.onkeydown,!1);window.removeEventListener("keyup",c.onkeyup,!1);window.removeEventListener("resize",
this.onresize,!1);document.removeEventListener("mouseup",this.docMouseUp,!1);window.removeEventListener("mousedown",this.dragMouseDownHandler,!1);window.removeEventListener("mousemove",this.throttledDragOnMouseMove,!1);window.removeEventListener("mouseup",this.dragMouseUpHandler,!1);window.removeEventListener("wheel",this.wheelHandler,!1);window.removeEventListener("mousewheel",this.wheelHandler,!1);window.removeEventListener("DOMMouseScroll",this.wheelHandler,!1);window.removeEventListener("keypress",
this.onkeypress,!1)},checkresize:function(){a.checkresize(this._Mx)&&this.refresh()},_refresh:function(){var d=this._Mx,e=this._Gx;d.canvas.getContext("2d");if(!e.hold){a.set_font(d,Math.min(8,d.width/64));e.pthk=1.5*d.text_w;if(e.specs){var f=!1;4===e.ylab&&(f=!0);!0===e.show_y_axis?(d.l=6*d.text_w,f&&(31536E3<=Math.abs(d.stk[0].ymin)||31536E3<=Math.abs(d.stk[0].ymax))&&(d.l=11*d.text_w)):d.l=1;d.r=!0===e.pan?d.width-(e.pthk+2*d.text_w):d.width-5;e.show_readout?(d.t=2*d.text_h,d.b=e.show_x_axis?
d.height-4*d.text_h:d.height-3*d.text_h):"bottom"===e.x_scrollbar_location?(d.t=2*d.text_h,d.b=e.pan?e.show_x_axis?d.height-3*d.text_h:d.height-2*d.text_h:e.show_x_axis?d.height-2*d.text_h:d.height-5):(d.t=e.pan?e.pthk+2*d.text_w:1,d.b=e.show_x_axis?d.height-3*d.text_h/2:d.height-2);e.pl=e.show_readout?50*d.text_w:"bottom"===e.x_scrollbar_location?d.l:35*d.text_w;e.pr=Math.max(e.pl+9*d.text_w,d.r);e.pt=e.show_readout?e.show_x_axis?d.b+d.text_h+(d.height-d.b-d.text_h-e.pthk)/2:d.b+(d.height-d.b-e.pthk)/
2:"bottom"===e.x_scrollbar_location?e.show_x_axis?d.b+d.text_h+(d.height-d.b-d.text_h-e.pthk)/2:d.b+(d.height-d.b-e.pthk)/2:(d.t-e.pthk)/2;e.lbtn=d.text_h+d.text_w+2}else e.pan?(d.t=e.pthk+2*d.text_w,d.r=d.width-(e.pthk+d.text_w)):(d.t=1,d.r=d.width-2),d.b=d.height-2,d.l=1,e.pl=d.l,e.pr=d.r,e.pt=(d.t-e.pthk)/2,e.lbtn=0;e.pyl=d.r+(d.width-d.r-e.pthk)/2+1;f=d.level;d.stk[f].x1=d.l;d.stk[f].y1=d.t;d.stk[f].x2=d.r;d.stk[f].y2=d.b;d.stk[f].xscl=(d.stk[f].xmax-d.stk[f].xmin)/(d.r-d.l);d.stk[f].yscl=(d.stk[f].ymax-
d.stk[f].ymin)/(d.b-d.t);f=W(this,d.xpos,d.ypos);e.retx=f.x;e.rety=f.y;if(0===e.panning||0!==e.panning)e.plotData.valid=!1,a.clear_window(d);var f=e.xlab,g=e.ylab;void 0===f&&(f=30);e.index&&(f=0);void 0===g&&(g=0<e.lyr.length&&e.lyr[0].cx,1===e.cmode?g=28:2===e.cmode?g=e.plab:3===e.cmode&&g?g=21:4===e.cmode?g=22:5===e.cmode?(g=22,f=21):g=6===e.cmode?26:7===e.cmode?27:0);if(e.specs){if(0===e.sections){var h={grid:e.grid};2===e.panning&&(h.noxtlab=!0);e.show_x_axis||(h.noxtics=!0,h.noxtlab=!0,h.noxplab=
!0);e.show_y_axis||(h.noytics=!0,h.noytlab=!0,h.noyplab=!0);!e.specs||e.show_readout||e.pan||(h.noyplab=!0,h.noxplab=!0);e.gridBackground&&(h.fillStyle=e.gridBackground);e.gridStyle&&(h.gridStyle=e.gridStyle);e.xmult&&(h.xmult=e.xmult);e.ymult&&(h.ymult=e.ymult);4===f&&(h.xtimecode=!0);4===g&&(h.ytimecode=!0);void 0!==e.xlabel&&(h.xlabel=e.xlabel);void 0!==e.ylabel&&(h.ylabel=e.ylabel);a.drawaxis(d,e.xdiv,e.ydiv,f,g,h)}f=e.lbtn-2;e.show_readout&&e.pan&&!e.no_legend_button?(e.legend?(e.legendBtnLocation=
{x:d.width-e.lbtn,y:2,width:f,height:f},a.shadowbox(d,d.width-e.lbtn,2,f,f,1,-2,"L")):(e.legendBtnLocation={x:d.width-e.lbtn,y:2,width:f,height:f},a.shadowbox(d,d.width-e.lbtn,2,f,f,1,2,"L")),T(this)):e.legendBtnLocation=null}else e.grid&&0<=e.sections&&(h={grid:!0,noaxisbox:!0,noxtics:!0,noxtlab:!0,noxplab:!0,noytics:!0,noytlab:!0,noyplab:!0},a.drawaxis(d,e.xdiv,e.ydiv,f,g,h));for(f=0;f<e.lyr.length;f++)G(this,f);f=this._Mx;g=this._Gx;g.show_readout&&!g.hide_note&&a.text(f,f.width-g.lbtn-(g.note.length+
1)*f.text_w,f.text_h,g.note);E(this);if(g.legend){for(var f=this._Mx,g=this._Gx,h=f.canvas.getContext("2d"),k=0,l=0,n=0,p=0,t=0,v=0,u=0,x=k=0,y=0,p=f.text_w,u=23*p,k=(g.lyr.length+1)*f.text_h,t=f.r-u,v=f.t,l=t+2,n=v+2,x=u-5,y=k-5,A=0,k=u=0;k<g.lyr.length;k++){var F=h.measureText(g.lyr[k].name).width;F>A&&(A=F)}98<A&&(u=A-98,x+=u,l-=u);h.strokeStyle=f.fg;h.fillStyle=f.bg;h.fillRect(l,n,x,y);h.strokeRect(l,n,x,y);for(k=0;k<g.lyr.length;k++)l=t+4*p,n=v+k*f.text_h+f.text_h,k===g.modlayer&&a.text(f,t+
p-u,n+Math.floor(f.text_w/2),"**"),g.lyr[k].display&&(y=g.lyr[k].color,0<g.lyr[k].line&&(x=c.sign(Math.min(p,Math.abs(g.lyr[k].thick)),g.lyr[k].thick),0>x||x===a.L_dashed?a.draw_line(f,y,l-u,n-3,l+2*p-u,n-3,Math.abs(x),{mode:"dashed",on:4,off:4}):a.draw_line(f,y,l-u,n-3,l+2*p-u,n-3,Math.abs(x))),0<g.lyr[k].symbol&&(x=0>g.lyr[k].radius?-c.trunc(0.6*p):Math.min(g.lyr[k].radius,c.trunc(0.6*p)),a.draw_symbol(f,y,l+p-u,n-3,g.lyr[k].symbol,x))),l+=3*p,n+=0.3*f.text_h,a.text(f,l-u,n,g.lyr[k].name)}d.r>d.l&&
d.b>d.t&&(e.plotData.width=d.canvas.width,e.plotData.height=d.canvas.height,e.plotData.getContext("2d").drawImage(d.canvas,0,0),e.plotData.valid=!0);w(this);e.cross_xpos=void 0;e.cross_ypos=void 0;!d.warpbox&&this.mouseOnCanvas&&C(this);(e.always_show_marker||e.show_marker)&&B(this)}}};var U={lines:13,length:7,width:4,radius:10,corners:1,rotate:0,color:"#FFF",speed:1,trail:60,shadow:!1,hwaccel:!1,className:"spinner",zIndex:2E9,top:"auto",left:"auto"},y="Ma Ph Re Im IR Lo L2".split(" "),X=["(absc)",
"(indx)","(1/ab)","(dydx)"]})(window.sigplot,window.mx,window.m);
