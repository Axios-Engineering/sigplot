/*

 File: tinycolor.js
 TinyColor v0.9.15+
 https://github.com/bgrins/TinyColor
 2013-02-24, Brian Grinstead, MIT License

 File: CanvasInput.js
  CanvasInput v1.0.10
  http://goldfirestudios.com/blog/108/CanvasInput-HTML5-Canvas-Text-Input

  (c) 2013, James Simpson of GoldFire Studios
  goldfirestudios.com

  (c) 2013, Axios, Inc.
  Modifications made by Axios, Inc.
  axiosengineering.com

  MIT License

 File: spin.js
 Copyright (c) 2011-2013 Felix Gnass
 Licensed under the MIT license

 File: sigplot.layer1d.js

 Licensed to the LGS Innovations (LGS) under one
 or more contributor license agreements.  See the NOTICE file
 distributed with this work for additional information
 regarding copyright ownership.  LGS licenses this file
 to you under the Apache License, Version 2.0 (the
 "License"); you may not use this file except in compliance
 with the License.  You may obtain a copy of the License at
  
   http://www.apache.org/licenses/LICENSE-2.0
  
 Unless required by applicable law or agreed to in writing,
 software distributed under the License is distributed on an
 "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 KIND, either express or implied.  See the License for the
 specific language governing permissions and limitations
 under the License.

 File: sigplot.layer2d.js

 Licensed to the LGS Innovations (LGS) under one
 or more contributor license agreements.  See the NOTICE file
 distributed with this work for additional information
 regarding copyright ownership.  LGS licenses this file
 to you under the Apache License, Version 2.0 (the
 "License"); you may not use this file except in compliance
 with the License.  You may obtain a copy of the License at
  
   http://www.apache.org/licenses/LICENSE-2.0
  
 Unless required by applicable law or agreed to in writing,
 software distributed under the License is distributed on an
 "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 KIND, either express or implied.  See the License for the
 specific language governing permissions and limitations
 under the License.

 File: license.js

 Licensed to the LGS Innovations (LGS) under one
 or more contributor license agreements.  See the NOTICE file
 distributed with this work for additional information
 regarding copyright ownership.  LGS licenses this file
 to you under the Apache License, Version 2.0 (the
 "License"); you may not use this file except in compliance
 with the License.  You may obtain a copy of the License at
  
   http://www.apache.org/licenses/LICENSE-2.0
  
 Unless required by applicable law or agreed to in writing,
 software distributed under the License is distributed on an
 "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 KIND, either express or implied.  See the License for the
 specific language governing permissions and limitations
 under the License.

 Portions of SigPlot may utilize the following open-source software:

   loglevel.js          - MIT License; Copyright (c) 2014, Tim Perry
   typedarray.js        - MIT License; Copyright (c) 2010, Linden Research, Inc.
   tinycolor.js         - MIT License; Copyright (c) 2013, Brian Grinstead
   CanvasInput.js       - MIT License; Copyright (c) 2013, James Simpson of GoldFire Studios
   spin.js              - MIT License; Copyright (c) 2011-2013 Felix Gnass
   Array.remove         - MIT License; Copyright (c) 2007, John Resig
   Firefox subarray fix - Public Domain; Copyright (c) 2011, Ryan Berdeen

 File: typedarray.js
 $LicenseInfo:firstyear=2010&license=mit$

 Copyright (c) 2010, Linden Research, Inc.

 Permission is hereby granted, free of charge, to any person obtaining a copy
 of this software and associated documentation files (the "Software"), to deal
 in the Software without restriction, including without limitation the rights
 to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 copies of the Software, and to permit persons to whom the Software is
 furnished to do so, subject to the following conditions:

 The above copyright notice and this permission notice shall be included in
 all copies or substantial portions of the Software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 THE SOFTWARE.
 $/LicenseInfo$

 Copyright (c) 2013, Michael Ihde - Added big-endian/little-endian support

 File: common.js

 Licensed to the LGS Innovations (LGS) under one
 or more contributor license agreements.  See the NOTICE file
 distributed with this work for additional information
 regarding copyright ownership.  LGS licenses this file
 to you under the Apache License, Version 2.0 (the
 "License"); you may not use this file except in compliance
 with the License.  You may obtain a copy of the License at
  
   http://www.apache.org/licenses/LICENSE-2.0
  
 Unless required by applicable law or agreed to in writing,
 software distributed under the License is distributed on an
 "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 KIND, either express or implied.  See the License for the
 specific language governing permissions and limitations
 under the License.


 File: bluefile.js

 Licensed to the LGS Innovations (LGS) under one
 or more contributor license agreements.  See the NOTICE file
 distributed with this work for additional information
 regarding copyright ownership.  LGS licenses this file
 to you under the Apache License, Version 2.0 (the
 "License"); you may not use this file except in compliance
 with the License.  You may obtain a copy of the License at
  
   http://www.apache.org/licenses/LICENSE-2.0
  
 Unless required by applicable law or agreed to in writing,
 software distributed under the License is distributed on an
 "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 KIND, either express or implied.  See the License for the
 specific language governing permissions and limitations
 under the License.


 File: m.js

 Licensed to the LGS Innovations (LGS) under one
 or more contributor license agreements.  See the NOTICE file
 distributed with this work for additional information
 regarding copyright ownership.  LGS licenses this file
 to you under the Apache License, Version 2.0 (the
 "License"); you may not use this file except in compliance
 with the License.  You may obtain a copy of the License at
  
   http://www.apache.org/licenses/LICENSE-2.0
  
 Unless required by applicable law or agreed to in writing,
 software distributed under the License is distributed on an
 "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 KIND, either express or implied.  See the License for the
 specific language governing permissions and limitations
 under the License.

 File: mx.js

 Licensed to the LGS Innovations (LGS) under one
 or more contributor license agreements.  See the NOTICE file
 distributed with this work for additional information
 regarding copyright ownership.  LGS licenses this file
 to you under the Apache License, Version 2.0 (the
 "License"); you may not use this file except in compliance
 with the License.  You may obtain a copy of the License at
  
   http://www.apache.org/licenses/LICENSE-2.0
  
 Unless required by applicable law or agreed to in writing,
 software distributed under the License is distributed on an
 "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 KIND, either express or implied.  See the License for the
 specific language governing permissions and limitations
 under the License.

 File: sigplot.js

 Licensed to the LGS Innovations (LGS) under one
 or more contributor license agreements.  See the NOTICE file
 distributed with this work for additional information
 regarding copyright ownership.  LGS licenses this file
 to you under the Apache License, Version 2.0 (the
 "License"); you may not use this file except in compliance
 with the License.  You may obtain a copy of the License at
  
   http://www.apache.org/licenses/LICENSE-2.0
  
 Unless required by applicable law or agreed to in writing,
 software distributed under the License is distributed on an
 "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 KIND, either express or implied.  See the License for the
 specific language governing permissions and limitations
 under the License.
*/
var ArrayBuffer,ArrayBufferView,Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,DataView;
(function(){function d(){document&&document.createTextNode("").splitText(1);throw new RangeError("INDEX_SIZE_ERR");}function a(e){if(Object.getOwnPropertyNames&&Object.defineProperty){var r=Object.getOwnPropertyNames(e),t;for(t=0;t<r.length;t+=1)Object.defineProperty(e,r[t],{value:e[r[t]],writable:!1,enumerable:!1,configurable:!1})}}function c(e){function r(t){Object.defineProperty(e,t,{get:function(){return e._getter(t)},set:function(r){e._setter(t,r)},enumerable:!0,configurable:!1})}if(Object.defineProperty){var t;
for(t=0;t<e.length;t+=1)r(t)}}function x(e){return[e&255]}function p(e){return H(e[0],8)}function f(e){return[e&255]}function g(e){return v(e[0],8)}function h(e){return[e>>8&255,e&255]}function k(e){return H(e[0]<<8|e[1],16)}function l(e){return[e>>8&255,e&255]}function D(e){return v(e[0]<<8|e[1],16)}function w(e){return[e>>24&255,e>>16&255,e>>8&255,e&255]}function C(e){return H(e[0]<<24|e[1]<<16|e[2]<<8|e[3],32)}function A(e){return[e>>24&255,e>>16&255,e>>8&255,e&255]}function u(e){return v(e[0]<<
24|e[1]<<16|e[2]<<8|e[3],32)}function z(e){var r=[];for(e=e.join("");e.length;)r.push(parseInt(e.substring(0,8),2)),e=e.substring(8);return r}function J(e){var r=[],t,s;for(t=e.length;t;t-=1)for(b=e[t-1],s=8;s;s-=1)r.push(b%2?1:0),b>>=1;r.reverse();return r}function Q(e){return[e&255]}function S(e){return H(e[0],8)}function U(e){return[e&255]}function F(e){return v(e[0],8)}function V(e){return[e&255,e>>8&255]}function e(e){return H(e[1]<<8|e[0],16)}function s(e){return[e&255,e>>8&255]}function y(e){return v(e[1]<<
8|e[0],16)}function G(e){return[e&255,e>>8&255,e>>16&255,e>>24&255]}function O(e){return H(e[3]<<24|e[2]<<16|e[1]<<8|e[0],32)}function n(e){return[e&255,e>>8&255,e>>16&255,e>>24&255]}function R(e){return v(e[3]<<24|e[2]<<16|e[1]<<8|e[0],32)}function T(e){var r=[];for(e=e.join("");e.length;)r.push(parseInt(e.substring(e.length-8,e.length),2)),e=e.substring(0,e.length-8);return r}function B(e){var r=[],t,s;for(t=0;t<e.length;t++)for(b=e[t],s=8;s;s-=1)r.push(b%2?1:0),b>>=1;r.reverse();return r}function H(e,
r){var t=32-r;return e<<t>>t}function v(e,r){var t=32-r;return e<<t>>>t}function r(e,r,t){var s=(1<<r-1)-1,q,a,c;isNaN(e)?(a=(1<<s)-1,s=Math.pow(2,t-1),q=0):Infinity===e||-Infinity===e?(a=(1<<s)-1,s=0,q=0>e?1:0):0===e?(s=a=0,q=-Infinity===1/e?1:0):(q=0>e,e=Math.abs(e),e>=Math.pow(2,1-s)?(c=Math.min(Math.floor(Math.log(e)/Math.LN2),s),a=c+s,s=Math.round(e*Math.pow(2,t-c)-Math.pow(2,t))):(a=0,s=Math.round(e/Math.pow(2,1-s-t))));for(e=[];t;t-=1)e.push(s%2?1:0),s=Math.floor(s/2);for(t=r;t;t-=1)e.push(a%
2?1:0),a=Math.floor(a/2);e.push(q?1:0);e.reverse();return $(e)}function t(e,r,t){var s=[],q,a,s=aa(e);q=s.join("");e=(1<<r-1)-1;s=parseInt(q.substring(0,1),2)?-1:1;a=parseInt(q.substring(1,1+r),2);q=parseInt(q.substring(1+r),2);return a===(1<<r)-1?0!==q?NaN:Infinity*s:0<a?s*Math.pow(2,a-e)*(1+q/Math.pow(2,t)):0!==q?s*Math.pow(2,-(e-1))*(q/Math.pow(2,t)):0>s?-0:0}function E(e){return t(e,11,52)}function q(e){return r(e,11,52)}function N(e){return t(e,8,23)}function P(e){return r(e,8,23)}var I={ToInt32:function(e){return e>>
0},ToUint32:function(e){return e>>>0}};Object.prototype.__defineGetter__&&!Object.defineProperty&&(Object.defineProperty=function(e,r,t){t.hasOwnProperty("get")&&e.__defineGetter__(r,t.get);t.hasOwnProperty("set")&&e.__defineSetter__(r,t.set)});var L=window.BIG_ENDIAN_ARRAYBUFFERS?x:Q,M=window.BIG_ENDIAN_ARRAYBUFFERS?p:S,ba=window.BIG_ENDIAN_ARRAYBUFFERS?f:U,ca=window.BIG_ENDIAN_ARRAYBUFFERS?g:F,K=window.BIG_ENDIAN_ARRAYBUFFERS?h:V,Y=window.BIG_ENDIAN_ARRAYBUFFERS?k:e,W=window.BIG_ENDIAN_ARRAYBUFFERS?
l:s,da=window.BIG_ENDIAN_ARRAYBUFFERS?D:y,ea=window.BIG_ENDIAN_ARRAYBUFFERS?w:G,fa=window.BIG_ENDIAN_ARRAYBUFFERS?C:O,ga=window.BIG_ENDIAN_ARRAYBUFFERS?A:n,ha=window.BIG_ENDIAN_ARRAYBUFFERS?u:R,$=window.BIG_ENDIAN_ARRAYBUFFERS?z:T,aa=window.BIG_ENDIAN_ARRAYBUFFERS?J:B;ArrayBuffer||function(){function e(r,t,s){var q;q=function(e,r,t){var s,y,E;if(arguments.length&&"number"!==typeof arguments[0])if("object"===typeof arguments[0]&&arguments[0].constructor===q)for(s=arguments[0],this.length=s.length,
this.byteLength=this.length*this.BYTES_PER_ELEMENT,this.buffer=new ArrayBuffer(this.byteLength),y=this.byteOffset=0;y<this.length;y+=1)this._setter(y,s._getter(y));else if("object"!==typeof arguments[0]||arguments[0]instanceof ArrayBuffer)if("object"===typeof arguments[0]&&arguments[0]instanceof ArrayBuffer){this.buffer=e;this.byteOffset=I.ToUint32(r);this.byteOffset>this.buffer.byteLength&&d();if(this.byteOffset%this.BYTES_PER_ELEMENT)throw new RangeError("ArrayBuffer length minus the byteOffset is not a multiple of the element size.");
3>arguments.length?(this.byteLength=this.buffer.byteLength-this.byteOffset,this.byteLength%this.BYTES_PER_ELEMENT&&d(),this.length=this.byteLength/this.BYTES_PER_ELEMENT):(this.length=I.ToUint32(t),this.byteLength=this.length*this.BYTES_PER_ELEMENT);this.byteOffset+this.byteLength>this.buffer.byteLength&&d()}else throw new TypeError("Unexpected argument type(s)");else for(s=arguments[0],this.length=I.ToUint32(s.length),this.byteLength=this.length*this.BYTES_PER_ELEMENT,this.buffer=new ArrayBuffer(this.byteLength),
y=this.byteOffset=0;y<this.length;y+=1)E=s[y],this._setter(y,Number(E));else{this.length=I.ToInt32(arguments[0]);if(0>t)throw new RangeError("ArrayBufferView size is not a small enough positive integer.");this.byteLength=this.length*this.BYTES_PER_ELEMENT;this.buffer=new ArrayBuffer(this.byteLength);this.byteOffset=0}this.constructor=q;a(this);c(this)};q.prototype=new ArrayBufferView;q.prototype.BYTES_PER_ELEMENT=r;q.prototype.emulated=!0;q.prototype._pack=t;q.prototype._unpack=s;q.BYTES_PER_ELEMENT=
r;q.prototype._getter=function(e){if(1>arguments.length)throw new SyntaxError("Not enough arguments");e=I.ToUint32(e);if(!(e>=this.length)){var r=[],t,s;t=0;for(s=this.byteOffset+e*this.BYTES_PER_ELEMENT;t<this.BYTES_PER_ELEMENT;t+=1,s+=1)r.push(this.buffer._bytes[s]);return this._unpack(r)}};q.prototype.get=q.prototype._getter;q.prototype._setter=function(e,r){if(2>arguments.length)throw new SyntaxError("Not enough arguments");e=I.ToUint32(e);if(!(e>=this.length)){var t=this._pack(r),s,q;s=0;for(q=
this.byteOffset+e*this.BYTES_PER_ELEMENT;s<this.BYTES_PER_ELEMENT;s+=1,q+=1)this.buffer._bytes[q]=t[s]}};q.prototype.set=function(e,r){if(1>arguments.length)throw new SyntaxError("Not enough arguments");var t,s,q,a,y,c;if("object"===typeof arguments[0]&&arguments[0].constructor===this.constructor)if(t=arguments[0],s=I.ToUint32(arguments[1]),s+t.length>this.length&&d(),c=this.byteOffset+s*this.BYTES_PER_ELEMENT,s=t.length*this.BYTES_PER_ELEMENT,t.buffer===this.buffer){q=[];a=0;for(y=t.byteOffset;a<
s;a+=1,y+=1)q[a]=t.buffer._bytes[y];for(a=0;a<s;a+=1,c+=1)this.buffer._bytes[c]=q[a]}else for(a=0,y=t.byteOffset;a<s;a+=1,y+=1,c+=1)this.buffer._bytes[c]=t.buffer._bytes[y];else if("object"===typeof arguments[0]&&"undefined"!==typeof arguments[0].length)for(t=arguments[0],q=I.ToUint32(t.length),s=I.ToUint32(arguments[1]),s+q>this.length&&d(),a=0;a<q;a+=1)y=t[a],this._setter(s+a,Number(y));else throw new TypeError("Unexpected argument type(s)");};q.prototype.subarray=function(e,r){e=I.ToInt32(e);r=
I.ToInt32(r);1>arguments.length&&(e=0);2>arguments.length&&(r=this.length);0>e&&(e=this.length+e);0>r&&(r=this.length+r);var t=this.length;e=0>e?0:e>t?t:e;t=this.length;t=(0>r?0:r>t?t:r)-e;0>t&&(t=0);return new this.constructor(this.buffer,e*this.BYTES_PER_ELEMENT,t)};return q}ArrayBuffer=function(e){e=I.ToInt32(e);if(0>e)throw new RangeError("ArrayBuffer size is not a small enough positive integer.");this.byteLength=e;this._bytes=[];this._bytes.length=e;for(e=0;e<this.byteLength;e+=1)this._bytes[e]=
0;a(this)};ArrayBuffer.isNative=!1;ArrayBufferView=function(){};Int8Array=Int8Array||e(1,L,M);Uint8Array=Uint8Array||e(1,ba,ca);Int16Array=Int16Array||e(2,K,Y);Uint16Array=Uint16Array||e(2,W,da);Int32Array=Int32Array||e(4,ea,fa);Uint32Array=Uint32Array||e(4,ga,ha);Float32Array=Float32Array||e(4,P,N);Float64Array=Float64Array||e(8,q,E)}();DataView||function(){function e(r,t){return"function"===typeof r.get?r.get(t):r[t]}function r(t){return function(r,q){r=I.ToUint32(r);r+t.BYTES_PER_ELEMENT>this.byteLength&&
d();r+=this.byteOffset;var a=new Uint8Array(this.buffer,r,t.BYTES_PER_ELEMENT),y=[],c;for(c=0;c<t.BYTES_PER_ELEMENT;c+=1)y.push(e(a,c));Boolean(q)===Boolean(s)&&y.reverse();return e(new t((new Uint8Array(y)).buffer),0)}}function t(r){return function(t,q,a){t=I.ToUint32(t);t+r.BYTES_PER_ELEMENT>this.byteLength&&d();q=new r([q]);q=new Uint8Array(q.buffer);var y=[],c;for(c=0;c<r.BYTES_PER_ELEMENT;c+=1)y.push(e(q,c));Boolean(a)===Boolean(s)&&y.reverse();(new Uint8Array(this.buffer,t,r.BYTES_PER_ELEMENT)).set(y)}}
var s=function(){var r=new Uint16Array([4660]),r=new Uint8Array(r.buffer);return 18===e(r,0)}();DataView=function(e,r,t){if(!("object"===typeof e&&e instanceof ArrayBuffer))throw new TypeError("TypeError");this.buffer=e;this.byteOffset=I.ToUint32(r);this.byteOffset>this.buffer.byteLength&&d();this.byteLength=3>arguments.length?this.buffer.byteLength-this.byteOffset:I.ToUint32(t);this.byteOffset+this.byteLength>this.buffer.byteLength&&d();a(this)};ArrayBufferView&&(DataView.prototype=new ArrayBufferView);
DataView.prototype.getUint8=r(Uint8Array);DataView.prototype.getInt8=r(Int8Array);DataView.prototype.getUint16=r(Uint16Array);DataView.prototype.getInt16=r(Int16Array);DataView.prototype.getUint32=r(Uint32Array);DataView.prototype.getInt32=r(Int32Array);DataView.prototype.getFloat32=r(Float32Array);DataView.prototype.getFloat64=r(Float64Array);DataView.prototype.setUint8=t(Uint8Array);DataView.prototype.setInt8=t(Int8Array);DataView.prototype.setUint16=t(Uint16Array);DataView.prototype.setInt16=t(Int16Array);
DataView.prototype.setUint32=t(Uint32Array);DataView.prototype.setInt32=t(Int32Array);DataView.prototype.setFloat32=t(Float32Array);DataView.prototype.setFloat64=t(Float64Array)}()})();window.ArrayBuffer&&!ArrayBuffer.prototype.slice&&(ArrayBuffer.prototype.slice=function(d,a){var c=new Uint8Array(this);void 0===a&&(a=c.length);for(var x=new ArrayBuffer(a-d),p=new Uint8Array(x),f=0;f<p.length;f++)p[f]=c[f+d];return x});
Array.prototype.remove=function(d,a){var c=this.slice((a||d)+1||this.length);this.length=0>d?this.length+d:d;return this.push.apply(this,c)};window.requestAnimFrame=function(d){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){return window.setTimeout(a,1E3/60)}}();
window.cancelAnimFrame=function(d){return window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCanelAnimationFrame||function(a){window.clearTimeout(a)}}();function dashOn(d,a,c){return d.setLineDash?(d.setLineDash([a,c]),!0):void 0!==d.mozDash?(d.mozDash=[a,c],!0):d.webkitLineDash&&0===d.webkitLineDash.length?(d.webkitLineDash=[a,c],!0):!1}
function dashOff(d){d.setLineDash?d.setLineDash([]):d.mozDash?d.mozDash=null:d.webkitLineDash&&(d.webkitLineDash=[])}function getKeyCode(d){d=window.event||d;return d=d.charCode||d.keyCode}function setKeypressHandler(d){window.addEventListener?window.addEventListener("keypress",d,!1):window.attachEvent&&window.attachEvent("onkeypress",d)}Array.isArray||(Array.isArray=function(d){return"[object Array]"===Object.prototype.toString.call(d)});
window.Float64Array||(window.Float64Array=function(){return window.Float64Array||function(d,a,c){if(!(d instanceof ArrayBuffer))throw"Invalid type";var x=new DataView(d),p=[];d=(d.byteLength-a)/8;p.length=void 0===c?d:Math.min(c,d);for(c=0;c<p.length;c++)p[c]=x.getFloat64(8*c+a,!0);p.subarray=function(a,c){return p.slice(a,c)};return p}}());
(function(){var d=function(){};window.console||(window.console={log:d,info:d,warn:d,debug:d,error:d});if((new Int8Array([0,1,0])).subarray(1).subarray(1)[0]){var a=function(a,d){0===arguments.length?(a=0,d=this.length):(0>a&&(a+=this.length),a=Math.max(0,Math.min(this.length,a)),1===arguments.length?d=this.length:(0>d&&(d+=this.length),d=Math.max(a,Math.min(this.length,d))));return new this.constructor(this.buffer,this.byteOffset+a*this.BYTES_PER_ELEMENT,d-a)};[Int8Array,Uint8Array,Int16Array,Uint16Array,
Int32Array,Uint32Array,Float32Array,Float64Array].forEach(function(c){c.prototype.subarray=a})}})();
(function(d,a){function c(a,c,k,l){a[p](x+c,"wheel"===f?k:function(a){!a&&(a=d.event);var c={originalEvent:a,target:a.target||a.srcElement,type:"wheel",deltaMode:"MozMousePixelScroll"===a.type?0:1,deltaX:0,delatZ:0,preventDefault:function(){a.preventDefault?a.preventDefault():a.returnValue=!1}};"mousewheel"===f?(c.deltaY=-0.025*a.wheelDelta,a.wheelDeltaX&&(c.deltaX=-0.025*a.wheelDeltaX)):c.deltaY=a.detail;return k(c)},l||!1)}var x="",p,f;d.addEventListener?p="addEventListener":(p="attachEvent",x=
"on");f="onwheel"in a.createElement("div")?"wheel":void 0!==a.onmousewheel?"mousewheel":"DOMMouseScroll";d.addWheelListener=function(a,d,k){c(a,f,d,k);"DOMMouseScroll"===f&&c(a,"MozMousePixelScroll",d,k)}})(window,document);function update(d,a){for(var c in a){var x=a[c];"object"===typeof x?update(d[c],x):d[c]=x}return d}
(function(d){function a(a){a=new Uint8Array(a);if(C)return String.fromCharCode.apply(null,a);for(var c="",d=0;d<a.length;d++)c+=String.fromCharCode(a[d]);return c}function c(a){return 0<=a&&31>a?1<<a:c[a]||(c[a]=Math.pow(2,a))}function x(c,g){this.options={ext_header_type:"dict"};d.update(this.options,g);this.file_name=this.file=null;this.offset=0;this.buf=c;if(null!=this.buf){var f=new DataView(this.buf);this.version=a(this.buf.slice(0,4));this.headrep=a(this.buf.slice(4,8));this.datarep=a(this.buf.slice(8,
12));var h="EEEI"===this.headrep,k="EEEI"===this.datarep;this.ext_start=f.getInt32(24,h);this.ext_size=f.getInt32(28,h);this.type=f.getUint32(48,h);this["class"]=this.type/1E3;this.format=a(this.buf.slice(52,54));this.timecode=f.getFloat64(56,h);1===this["class"]?(this.xstart=f.getFloat64(256,h),this.xdelta=f.getFloat64(264,h),this.xunits=f.getInt32(272,h),this.yunits=f.getInt32(296,h),this.subsize=1):2===this["class"]&&(this.xstart=f.getFloat64(256,h),this.xdelta=f.getFloat64(264,h),this.xunits=
f.getInt32(272,h),this.subsize=f.getInt32(276,h),this.ystart=f.getFloat64(280,h),this.ydelta=f.getFloat64(288,h),this.yunits=f.getInt32(296,h));this.data_start=f.getFloat64(32,h);this.data_size=f.getFloat64(40,h);var f=this.data_start,l=this.data_start+this.data_size;this.ext_size&&(this.ext_header=this.unpack_keywords(this.buf,this.ext_size,512*this.ext_start,h));this.setData(this.buf,f,l,k)}}function p(a){var c=document.createElement("a");c.href=a;for(var d=c.protocol.replace(":",""),f=c.hostname,
g=c.port,h=c.search,k={},e=c.search.replace(/^\?/,"").split("&"),s=e.length,y=0,G;y<s;y++)e[y]&&(G=e[y].split("="),k[G[0]]=G[1]);return{source:a,protocol:d,host:f,port:g,query:h,params:k,file:(c.pathname.match(/\/([^\/?#]+)$/i)||[null,""])[1],hash:c.hash.replace("#",""),path:c.pathname.replace(/^([^\/])/,"/$1"),relative:(c.href.match(/tps?:\/\/[^\/]+(.+)/)||[null,""])[1],segments:c.pathname.replace(/^\//,"").split("/")}}function f(a,c,d){d=d||1024;var f=0,g=new ArrayBuffer(a.length),h=new Uint8Array(g),
k=function(){for(var e=f+d;f<e;f++)h[f]=a.charCodeAt(f)&255;f>=a.length?c(g):setTimeout(k,0)};setTimeout(k,0)}function g(a){this.options=a}navigator.userAgent.match(/(iPad|iPhone|iPod)/i);var h=function(){var a=new ArrayBuffer(4),c=new Uint32Array(a),a=new Uint8Array(a);c[0]=3735928559;if(239===a[0])return"LE";if(222===a[0])return"BE";throw Error("unknown endianness");}(),k={S:1,C:2,V:3,Q:4,M:9,X:10,T:16,U:1,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9},l={P:0.125,A:1,O:1,B:1,I:2,L:4,X:8,F:4,D:8},D={P:null,
A:null,O:Uint8Array,B:Int8Array,I:Int16Array,L:Int32Array,X:null,F:Float32Array,D:Float64Array},w={P:null,A:null,O:"getUint8",B:"getInt8",I:"getInt16",L:"getInt32",X:function(a,d,f){var g,h,k=Math.pow(2,53);f?(g=4,h=0):(g=0,h=4);g=a.getInt32(d+g,f);a=a.getInt32(d+h,f)+c(32)*g;return a>=k?(window.console.info("Int is bigger than JS can represent."),Infinity):a},F:"getFloat32",D:"getFloat64"},C=!0;try{var A=new Uint8Array(new ArrayBuffer(4));A[0]=66;A[1]=76;A[2]=85;A[3]=69;"BLUE"!==String.fromCharCode.apply(null,
A)&&(C=!1)}catch(u){C=!1}x.prototype={setData:function(a,c,d,f){1===this["class"]?(this.spa=k[this.format[0]],this.bps=l[this.format[1]],this.bpa=this.spa*this.bps,this.ape=1,this.bpe=this.ape*this.bpa):2===this["class"]&&(this.spa=k[this.format[0]],this.bps=l[this.format[1]],this.bpa=this.spa*this.bps,this.ape=this.subsize,this.bpe=this.ape*this.bpa);void 0===f&&(f="LE"===h);if("LE"===h&&!f)throw"Not supported "+h+" "+f;if("BE"===h&&this.littleEndianData)throw"Not supported "+h+" "+f;a?(this.dview=
c&&d?this.createArray(a,c,(d-c)/this.bps):this.createArray(a),this.size=this.dview.length/(this.spa*this.ape)):this.dview=this.createArray(null,null,this.size)},unpack_keywords:function(c,d,f,g){var h,k,l,e,s,y,G=[],O={},n={},R=0;c=c.slice(f,c.length);var T=new DataView(c);for(c=a(c);R<d;)y=R+8,f=T.getUint32(R,g),h=T.getInt16(R+4,g),k=T.getInt8(R+6,g),l=c.slice(R+7,R+8),h=f-h,s=y+h,k=c.slice(s,s+k),"A"===l?e=c.slice(y,y+h):w[l]?e="string"===typeof w[l]?T[w[l]](y,g):w[l](T,y,g):window.console.info("Unsupported keyword format "+
l+" for tag "+k),"undefined"===typeof O[k]?O[k]=1:(O[k]++,k=""+k+O[k]),n[k]=e,G.push({tag:k,value:e}),R+=f;c=["dict","json",{},"XMTable","JSON","DICT"];for(var B in c)if(c[B]===this.options.ext_header_type)return n;return G},createArray:function(a,c,d){var f=D[this.format[1]];if(void 0===f)throw"unknown format "+this.format[1];void 0===c&&(c=0);void 0===d&&(d=a.length||a.byteLength/l[this.format[1]]);return a?new f(a,c,d):new f(d)}};g.prototype={readheader:function(a,c){var d=this,f=new FileReader,
g=a.webkitSlice(0,512);f.onloadend=function(a){return function(g){g.target.error?c(null):(g=new x(f.result,d.options),g.file=a,c(g))}}(a);f.readAsArrayBuffer(g)},read:function(a,c){var d=this,f=new FileReader;f.onloadend=function(a){return function(g){g.target.error?c(null):(g=new x(f.result,d.options),g.file=a,g.file_name=a.name,c(g))}}(a);f.readAsArrayBuffer(a)},read_http:function(a,c){var d=this,g=new XMLHttpRequest;g.open("GET",a,!0);g.responseType="arraybuffer";g.overrideMimeType("text/plain; charset=x-user-defined");
g.onload=function(h){if(4!==g.readyState||200!==g.status&&0!==g.status)c(null);else if(h=null,g.response){h=g.response;h=new x(h,d.options);p(a);var k=p(a);h.file_name=k.file;c(h)}else g.responseText&&f(g.responseText,function(f){f=new x(f,d.options);p(a);var e=p(a);f.file_name=e.file;c(f)})};g.onerror=function(a){c(null)};g.send(null)}};d.BlueHeader=d.BlueHeader||x;d.BlueFileReader=d.BlueFileReader||g})(this);
(function(d){function a(d,e){d=d?d:"";e=e||{};if("object"==typeof d&&d.hasOwnProperty("_tc_id"))return d;var s=c(d),y=s.r,G=s.g,O=s.b,n=s.a,R=u(100*n)/100,T=e.format||s.format;1>y&&(y=u(y));1>G&&(G=u(G));1>O&&(O=u(O));return{ok:s.ok,format:T,_tc_id:C++,alpha:n,toHsv:function(){var e=f(y,G,O);return{h:360*e.h,s:e.s,v:e.v,a:n}},toHsvString:function(){var e=f(y,G,O),s=u(360*e.h),a=u(100*e.s),e=u(100*e.v);return 1==n?"hsv("+s+", "+a+"%, "+e+"%)":"hsva("+s+", "+a+"%, "+e+"%, "+R+")"},toHsl:function(){var e=
x(y,G,O);return{h:360*e.h,s:e.s,l:e.l,a:n}},toHslString:function(){var e=x(y,G,O),s=u(360*e.h),a=u(100*e.s),e=u(100*e.l);return 1==n?"hsl("+s+", "+a+"%, "+e+"%)":"hsla("+s+", "+a+"%, "+e+"%, "+R+")"},toHex:function(e){return g(y,G,O,e)},toHexString:function(e){return"#"+g(y,G,O,e)},toRgb:function(){return{r:u(y),g:u(G),b:u(O),a:n}},toRgbString:function(){return 1==n?"rgb("+u(y)+", "+u(G)+", "+u(O)+")":"rgba("+u(y)+", "+u(G)+", "+u(O)+", "+R+")"},toPercentageRgb:function(){return{r:u(100*h(y,255))+
"%",g:u(100*h(G,255))+"%",b:u(100*h(O,255))+"%",a:n}},toPercentageRgbString:function(){return 1==n?"rgb("+u(100*h(y,255))+"%, "+u(100*h(G,255))+"%, "+u(100*h(O,255))+"%)":"rgba("+u(100*h(y,255))+"%, "+u(100*h(G,255))+"%, "+u(100*h(O,255))+"%, "+R+")"},toName:function(){return 0===n?"transparent":U[g(y,G,O,!0)]||!1},toFilter:function(s){var c=g(y,G,O),d=c,r=Math.round(255*parseFloat(n)).toString(16),t=r,E=e&&e.gradientType?"GradientType = 1, ":"";s&&(s=a(s),d=s.toHex(),t=Math.round(255*parseFloat(s.alpha)).toString(16));
return"progid:DXImageTransform.Microsoft.gradient("+E+"startColorstr=#"+k(r)+c+",endColorstr=#"+k(t)+d+")"},toString:function(e){var s=!!e;e=e||this.format;var a=!1,s=!s&&1>n&&0<n&&("hex"===e||"hex6"===e||"hex3"===e||"name"===e);"rgb"===e&&(a=this.toRgbString());"prgb"===e&&(a=this.toPercentageRgbString());if("hex"===e||"hex6"===e)a=this.toHexString();"hex3"===e&&(a=this.toHexString(!0));"name"===e&&(a=this.toName());"hsl"===e&&(a=this.toHslString());"hsv"===e&&(a=this.toHsvString());return s?this.toRgbString():
a||this.toHexString()}}}function c(a){var e={r:0,g:0,b:0},s=1,c=!1,d=!1;if("string"==typeof a)a:{a=a.replace(D,"").replace(w,"").toLowerCase();var f=!1;if(S[a])a=S[a],f=!0;else if("transparent"==a){a={r:0,g:0,b:0,a:0,format:"name"};break a}var n;a=(n=F.rgb.exec(a))?{r:n[1],g:n[2],b:n[3]}:(n=F.rgba.exec(a))?{r:n[1],g:n[2],b:n[3],a:n[4]}:(n=F.hsl.exec(a))?{h:n[1],s:n[2],l:n[3]}:(n=F.hsla.exec(a))?{h:n[1],s:n[2],l:n[3],a:n[4]}:(n=F.hsv.exec(a))?{h:n[1],s:n[2],v:n[3]}:(n=F.hex6.exec(a))?{r:parseInt(n[1],
16),g:parseInt(n[2],16),b:parseInt(n[3],16),format:f?"name":"hex"}:(n=F.hex3.exec(a))?{r:parseInt(n[1]+""+n[1],16),g:parseInt(n[2]+""+n[2],16),b:parseInt(n[3]+""+n[3],16),format:f?"name":"hex"}:!1}if("object"==typeof a){if(a.hasOwnProperty("r")&&a.hasOwnProperty("g")&&a.hasOwnProperty("b"))e=a.g,c=a.b,e={r:255*h(a.r,255),g:255*h(e,255),b:255*h(c,255)},c=!0,d="%"===String(a.r).substr(-1)?"prgb":"rgb";else if(a.hasOwnProperty("h")&&a.hasOwnProperty("s")&&a.hasOwnProperty("v")){a.s=l(a.s);a.v=l(a.v);
var d=a.h,f=a.s,e=a.v,d=6*h(d,360),f=h(f,100),e=h(e,100),c=A.floor(d),g=d-c,d=e*(1-f);n=e*(1-g*f);f=e*(1-(1-g)*f);c%=6;e={r:255*[e,n,d,d,f,e][c],g:255*[f,e,e,n,d,d][c],b:255*[d,d,f,e,e,n][c]};c=!0;d="hsv"}else a.hasOwnProperty("h")&&a.hasOwnProperty("s")&&a.hasOwnProperty("l")&&(a.s=l(a.s),a.l=l(a.l),e=p(a.h,a.s,a.l),c=!0,d="hsl");a.hasOwnProperty("a")&&(s=a.a)}s=parseFloat(s);if(isNaN(s)||0>s||1<s)s=1;return{ok:c,format:a.format||d,r:z(255,J(e.r,0)),g:z(255,J(e.g,0)),b:z(255,J(e.b,0)),a:s}}function x(a,
e,s){a=h(a,255);e=h(e,255);s=h(s,255);var c=J(a,e,s),d=z(a,e,s),f,n=(c+d)/2;if(c==d)f=d=0;else{var g=c-d,d=0.5<n?g/(2-c-d):g/(c+d);switch(c){case a:f=(e-s)/g+(e<s?6:0);break;case e:f=(s-a)/g+2;break;case s:f=(a-e)/g+4}f/=6}return{h:f,s:d,l:n}}function p(a,e,s){function c(e,s,a){0>a&&(a+=1);1<a&&(a-=1);return a<1/6?e+6*(s-e)*a:0.5>a?s:a<2/3?e+(s-e)*(2/3-a)*6:e}a=h(a,360);e=h(e,100);s=h(s,100);if(0===e)s=e=a=s;else{var d=0.5>s?s*(1+e):s+e-s*e,f=2*s-d;s=c(f,d,a+1/3);e=c(f,d,a);a=c(f,d,a-1/3)}return{r:255*
s,g:255*e,b:255*a}}function f(a,e,s){a=h(a,255);e=h(e,255);s=h(s,255);var c=J(a,e,s),d=z(a,e,s),f,n=c-d;if(c==d)f=0;else{switch(c){case a:f=(e-s)/n+(e<s?6:0);break;case e:f=(s-a)/n+2;break;case s:f=(a-e)/n+4}f/=6}return{h:f,s:0===c?0:n/c,v:c}}function g(a,e,s,c){a=[k(u(a).toString(16)),k(u(e).toString(16)),k(u(s).toString(16))];return c&&a[0].charAt(0)==a[0].charAt(1)&&a[1].charAt(0)==a[1].charAt(1)&&a[2].charAt(0)==a[2].charAt(1)?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0):a.join("")}function h(a,
e){var s=a;"string"==typeof s&&-1!=s.indexOf(".")&&1===parseFloat(s)&&(a="100%");s="string"===typeof a&&-1!=a.indexOf("%");a=z(e,J(0,parseFloat(a)));s&&(a=parseInt(a*e,10)/100);return 1E-6>A.abs(a-e)?1:a%e/parseFloat(e)}function k(a){return 1==a.length?"0"+a:""+a}function l(a){1>=a&&(a=100*a+"%");return a}var D=/^[\s,#]+/,w=/\s+$/,C=0,A=Math,u=A.round,z=A.min,J=A.max,Q=A.random;a.fromRatio=function(c,e){if("object"==typeof c){var s={},y;for(y in c)c.hasOwnProperty(y)&&(s[y]="a"===y?c[y]:l(c[y]));
c=s}return a(c,e)};a.equals=function(c,e){return c&&e?a(c).toRgbString()==a(e).toRgbString():!1};a.random=function(){return a.fromRatio({r:Q(),g:Q(),b:Q()})};a.desaturate=function(c,e){e=0===e?0:e||10;var s=a(c).toHsl();s.s-=e/100;s.s=z(1,J(0,s.s));return a(s)};a.saturate=function(c,e){e=0===e?0:e||10;var s=a(c).toHsl();s.s+=e/100;s.s=z(1,J(0,s.s));return a(s)};a.greyscale=function(c){return a.desaturate(c,100)};a.lighten=function(c,e){e=0===e?0:e||10;var s=a(c).toHsl();s.l+=e/100;s.l=z(1,J(0,s.l));
return a(s)};a.darken=function(c,e){e=0===e?0:e||10;var s=a(c).toHsl();s.l-=e/100;s.l=z(1,J(0,s.l));return a(s)};a.complement=function(c){c=a(c).toHsl();c.h=(c.h+180)%360;return a(c)};a.triad=function(c){var e=a(c).toHsl(),s=e.h;return[a(c),a({h:(s+120)%360,s:e.s,l:e.l}),a({h:(s+240)%360,s:e.s,l:e.l})]};a.tetrad=function(c){var e=a(c).toHsl(),s=e.h;return[a(c),a({h:(s+90)%360,s:e.s,l:e.l}),a({h:(s+180)%360,s:e.s,l:e.l}),a({h:(s+270)%360,s:e.s,l:e.l})]};a.splitcomplement=function(c){var e=a(c).toHsl(),
s=e.h;return[a(c),a({h:(s+72)%360,s:e.s,l:e.l}),a({h:(s+216)%360,s:e.s,l:e.l})]};a.analogous=function(c,e,s){e=e||6;s=s||30;var y=a(c).toHsl();s=360/s;c=[a(c)];for(y.h=(y.h-(s*e>>1)+720)%360;--e;)y.h=(y.h+s)%360,c.push(a(y));return c};a.monochromatic=function(c,e){e=e||6;for(var s=a(c).toHsv(),y=s.h,d=s.s,s=s.v,f=[],n=1/e;e--;)f.push(a({h:y,s:d,v:s})),s=(s+n)%1;return f};a.readability=function(c,e){var s=a(c).toRgb(),y=a(e).toRgb(),d=(299*s.r+587*s.g+114*s.b)/1E3,f=(299*y.r+587*y.g+114*y.b)/1E3,s=
Math.max(s.r,y.r)-Math.min(s.r,y.r)+Math.max(s.g,y.g)-Math.min(s.g,y.g)+Math.max(s.b,y.b)-Math.min(s.b,y.b);return{brightness:Math.abs(d-f),color:s}};a.readable=function(c,e){var s=a.readability(c,e);return 125<s.brightness&&500<s.color};a.mostReadable=function(c,e){for(var s=null,y=0,d=!1,f=0;f<e.length;f++){var n=a.readability(c,e[f]),g=125<n.brightness&&500<n.color,n=n.brightness/125*3+n.color/500;if(g&&!d||g&&d&&n>y||!g&&!d&&n>y)d=g,y=n,s=a(e[f])}return s};var S=a.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",
aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",
darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",
grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",
lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",
palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",
tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},U=a.hexNames=function(a){var e={},s;for(s in a)a.hasOwnProperty(s)&&(e[a[s]]=s);return e}(S),F={rgb:RegExp("rgb[\\s|\\(]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))\\s*\\)?"),rgba:RegExp("rgba[\\s|\\(]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))\\s*\\)?"),
hsl:RegExp("hsl[\\s|\\(]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))\\s*\\)?"),hsla:RegExp("hsla[\\s|\\(]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))\\s*\\)?"),hsv:RegExp("hsv[\\s|\\(]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))\\s*\\)?"),
hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};d.tinycolor=a})(this);
(function(){var d=[];(window.CanvasInput=function(a){var c=this;a=a?a:{};c._canvas=a.canvas||null;c._ctx=c._canvas?c._canvas.getContext("2d"):null;c._x=a.x||0;c._y=a.y||0;c._extraX=a.extraX||0;c._extraY=a.extraY||0;c._fontSize=a.fontSize||14;c._fontFamily=a.fontFamily||"Arial";c._fontColor=a.fontColor||"#000";c._placeHolderColor=a.placeHolderColor||"#bfbebd";c._fontWeight=a.fontWeight||"normal";c._fontStyle=a.fontStyle||"normal";c._readonly=a.readonly||!1;c._maxlength=a.maxlength||null;c._width=a.width||
150;c._height=a.height||c._fontSize;c._padding=0<=a.padding?a.padding:5;c._borderWidth=0<=a.borderWidth?a.borderWidth:1;c._borderColor=a.borderColor||"#959595";c._borderRadius=0<=a.borderRadius?a.borderRadius:3;c._backgroundImage=a.backgroundImage||"";c._boxShadow=a.boxShadow||"1px 1px 0px rgba(255, 255, 255, 1)";c._innerShadow=a.innerShadow||"0px 0px 4px rgba(0, 0, 0, 0.4)";c._selectionColor=a.selectionColor||"rgba(179, 212, 253, 0.8)";c._placeHolder=a.placeHolder||"";c._value=a.value||c._placeHolder;
c._onsubmit=a.onsubmit||function(){};c._onkeydown=a.onkeydown||function(){};c._onkeyup=a.onkeyup||function(){};c._onfocus=a.onfocus||function(){};c._onblur=a.onblur||function(){};c._cursor=!1;c._cursorPos=0;c._hasFocus=!1;c._selection=[0,0];c._wasOver=!1;c._renderOnReturn=void 0!==a.renderOnReturn?a.renderOnReturn:!0;c._disableBlur=a.disableBlur||!1;c._tabToClear=a.tabToClear||!1;c.boxShadow(c._boxShadow,!0);c._calcWH();c._renderCanvas=document.createElement("canvas");c._renderCanvas.setAttribute("width",
c.outerW);c._renderCanvas.setAttribute("height",c.outerH);c._renderCtx=c._renderCanvas.getContext("2d");c._shadowCanvas=document.createElement("canvas");c._shadowCanvas.setAttribute("width",c._width+2*c._padding);c._shadowCanvas.setAttribute("height",c._height+2*c._padding);c._shadowCtx=c._shadowCanvas.getContext("2d");"undefined"!==typeof a.backgroundGradient?(c._backgroundColor=c._renderCtx.createLinearGradient(0,0,0,c.outerH),c._backgroundColor.addColorStop(0,a.backgroundGradient[0]),c._backgroundColor.addColorStop(1,
a.backgroundGradient[1])):c._backgroundColor=a.backgroundColor||"#fff";c._canvas&&(c.mousemoveCanvasListener=function(a){a=a||window.event;c.mousemove(a,c)},c._canvas.addEventListener("mousemove",c.mousemoveCanvasListener,!1),c.mousedownCanvasListener=function(a){a=a||window.event;c.mousedown(a,c)},c._canvas.addEventListener("mousedown",c.mousedownCanvasListener,!1),c.mouseupCanvasListener=function(a){a=a||window.event;c.mouseup(a,c)},c._canvas.addEventListener("mouseup",c.mouseupCanvasListener,!1));
c.mouseupWindowListener=function(a){c._hasFocus&&!c._mouseDown&&c.blur()};window.addEventListener("mouseup",c.mouseupWindowListener,!0);c.keydownWindowListener=function(a){a=a||window.event;c._hasFocus&&c.keydown(a,c)};window.addEventListener("keydown",c.keydownWindowListener,!1);c.keyupWindowListener=function(a){a=a||window.event;c._hasFocus&&c._onkeyup(a,c)};window.addEventListener("keyup",c.keyupWindowListener,!1);c.pasteWindowListener=function(a){a=a||window.event;if(c._hasFocus){a=a.clipboardData.getData("text/plain");
var d=c._value.substr(0,c._cursorPos),f=c._value.substr(c._cursorPos);c._value=d+a+f;c._cursorPos+=a.length;c.render()}};window.addEventListener("paste",c.pasteWindowListener,!1);d.push(c);c._inputsIndex=d.length-1;c.render()}).prototype={canvas:function(a){return"undefined"!==typeof a?(this._canvas=a,this._ctx=this._canvas.getContext("2d"),this.render()):this._canvas},x:function(a){return"undefined"!==typeof a?(this._x=a,this.render()):this._x},y:function(a){return"undefined"!==typeof a?(this._y=
a,this.render()):this._y},extraX:function(a){return"undefined"!==typeof a?(this._extraX=a,this.render()):this._extraX},extraY:function(a){return"undefined"!==typeof a?(this._extraY=a,this.render()):this._extraY},fontSize:function(a){return"undefined"!==typeof a?(this._fontSize=a,this.render()):this._fontSize},fontFamily:function(a){return"undefined"!==typeof a?(this._fontFamily=a,this.render()):this._fontFamily},fontColor:function(a){return"undefined"!==typeof a?(this._fontColor=a,this.render()):
this._fontColor},placeHolderColor:function(a){return"undefined"!==typeof a?(this._placeHolderColor=a,this.render()):this._placeHolderColor},fontWeight:function(a){return"undefined"!==typeof a?(this._fontWeight=a,this.render()):this._fontWeight},fontStyle:function(a){return"undefined"!==typeof a?(this._fontStyle=a,this.render()):this._fontStyle},width:function(a){return"undefined"!==typeof a?(this._width=a,this._calcWH(),this._updateCanvasWH(),this.render()):this._width},height:function(a){return"undefined"!==
typeof a?(this._height=a,this._calcWH(),this._updateCanvasWH(),this.render()):this._height},padding:function(a){return"undefined"!==typeof a?(this._padding=a,this._calcWH(),this._updateCanvasWH(),this.render()):this._padding},borderWidth:function(a){return"undefined"!==typeof a?(this._borderWidth=a,this._calcWH(),this._updateCanvasWH(),this.render()):this._borderWidth},borderColor:function(a){return"undefined"!==typeof a?(this._borderColor=a,this.render()):this._borderColor},borderRadius:function(a){return"undefined"!==
typeof a?(this._borderRadius=a,this.render()):this._borderRadius},backgroundColor:function(a){return"undefined"!==typeof a?(this._backgroundColor=a,this.render()):this._backgroundColor},backgroundGradient:function(a){return"undefined"!==typeof a?(this._backgroundColor=this._renderCtx.createLinearGradient(0,0,0,this.outerH),this._backgroundColor.addColorStop(0,a[0]),this._backgroundColor.addColorStop(1,a[1]),this.render()):this._backgroundColor},boxShadow:function(a,c){if("undefined"!==typeof a){var d=
a.split("px ");this._boxShadow={x:"none"===this._boxShadow?0:parseInt(d[0],10),y:"none"===this._boxShadow?0:parseInt(d[1],10),blur:"none"===this._boxShadow?0:parseInt(d[2],10),color:"none"===this._boxShadow?"":d[3]};this.shadowL=0>this._boxShadow.x?Math.abs(this._boxShadow.x)+this._boxShadow.blur:Math.abs(this._boxShadow.blur-this._boxShadow.x);this.shadowR=this._boxShadow.blur+this._boxShadow.x;this.shadowT=0>this._boxShadow.y?Math.abs(this._boxShadow.y)+this._boxShadow.blur:Math.abs(this._boxShadow.blur-
this._boxShadow.y);this.shadowB=this._boxShadow.blur+this._boxShadow.y;this.shadowW=this.shadowL+this.shadowR;this.shadowH=this.shadowT+this.shadowB;this._calcWH();if(!c)return this._updateCanvasWH(),this.render()}else return this._boxShadow},innerShadow:function(a){return"undefined"!==typeof a?(this._innerShadow=a,this.render()):this._innerShadow},selectionColor:function(a){return"undefined"!==typeof a?(this._selectionColor=a,this.render()):this._selectionColor},placeHolder:function(a){return"undefined"!==
typeof a?(this._placeHolder=a,this.render()):this._placeHolder},value:function(a){return"undefined"!==typeof a?(this._value=a,this.focus()):this._value},onsubmit:function(a){if("undefined"!==typeof a)return this._onsubmit=a,this;this._onsubmit()},onkeydown:function(a){if("undefined"!==typeof a)return this._onkeydown=a,this;this._onkeydown()},onkeyup:function(a){if("undefined"!==typeof a)return this._onkeyup=a,this;this._onkeyup()},focus:function(a){var c=this,d;if(!c._readonly){c._hasFocus||c._onfocus(c);
c._selectionUpdated?delete c._selectionUpdated:c._selection=[0,0];c._cursorPos="number"===typeof a?a:c._clipText().length;c._placeHolder===c._value&&(c._value="");c._hasFocus=!0;c._cursor=!0;c._cursorInterval&&clearInterval(c._cursorInterval);c._cursorInterval=setInterval(function(){c._cursor=!c._cursor;c.render()},500);a=navigator.userAgent.toLowerCase();a=0<=a.indexOf("chrome")&&0<=a.indexOf("mobile")&&0<=a.indexOf("android");var p="undefined"!==typeof window.orientation;p&&!a&&document&&document.createElement&&
(d=document.createElement("input"))?(d.type="text",d.style.opacity=0,d.style.position="absolute",d.style.left=c._x+c._extraX+(c._canvas?c._canvas.offsetLeft:0)+"px",d.style.top=c._y+c._extraY+(c._canvas?c._canvas.offsetTop:0)+"px",d.style.width=c._width,d.style.height=0,document.body.appendChild(d),d.focus(),d.addEventListener("blur",function(){c.blur(c)},!1)):p&&c.value(prompt(c._placeHolder)||"");return c.render()}},blur:function(a){a=a||this;a._disableBlur||(a._onblur(a),a._cursorInterval&&clearInterval(a._cursorInterval),
a._hasFocus=!1,a._cursor=!1,a._selection=[0,0],""===a._value&&(a._value=a._placeHolder));return a.render()},disableBlur:function(a){(a||this)._disableBlur=!0},enableBlur:function(a){(a||this)._disableBlur=!1},keydown:function(a,c){var x=a.which,p=a.shiftKey,f=null,g;if(c._hasFocus){c._onkeydown(a,c);if(65===x&&(a.ctrlKey||a.metaKey))return c._selection=[0,c._value.length],a.preventDefault(),c.render();if(17===x||a.metaKey||a.ctrlKey)return c;a.preventDefault();if(8===x)!c._clearSelection()&&0<c._cursorPos&&
(p=c._value.substr(0,c._cursorPos-1),g=c._value.substr(c._cursorPos,c._value.length),c._value=p+g,c._cursorPos--);else if(37===x)0<c._cursorPos&&(c._cursorPos--,c._cursor=!0,c._selection=[0,0]);else if(39===x)c._cursorPos<c._value.length&&(c._cursorPos++,c._cursor=!0,c._selection=[0,0]);else if(13===x)c._onsubmit(a,c);else if(9===x)if(c._tabToClear)c._value="",c._cursorPos=0;else{var h=d[c._inputsIndex+1]?c._inputsIndex+1:0;h!==c._inputsIndex&&(c.blur(),setTimeout(function(){d[h].focus()},10))}else if(f=
c._mapCodeToKey(p,x)){c._clearSelection();if(c._maxlength&&c._maxlength<=c._value.length)return;p=c._value?c._value.substr(0,c._cursorPos):"";g=c._value?c._value.substr(c._cursorPos):"";c._value=p+f+g;c._cursorPos++}return 13==x&&c._renderOnReturn||13!==x?c.render():function(){}}},click:function(a,c){var d=c._mousePos(a),p=d.x,d=d.y;if(c._endSelection)delete c._endSelection,delete c._selectionUpdated;else if(c._canvas&&c._overInput(p,d)||!c._canvas){if(c._mouseDown)return c._mouseDown=!1,c.click(a,
c),c.focus(c._clickPos(p,d))}else return c.blur()},mousemove:function(a,c){var d=c._mousePos(a),p=d.x,f=d.y;(d=c._overInput(p,f))&&c._canvas?(c._canvas.style.cursor="text",c._wasOver=!0):c._wasOver&&c._canvas&&(c._canvas.style.cursor="default",c._wasOver=!1);if(c._hasFocus&&0<=c._selectionStart)if(f=c._clickPos(p,f),p=Math.min(c._selectionStart,f),f=Math.max(c._selectionStart,f),!d)c._selectionUpdated=!0,c._endSelection=!0,delete c._selectionStart,c.render();else if(c._selection[0]!==p||c._selection[1]!==
f)c._selection=[p,f],c.render()},mousedown:function(a,c){var d=c._mousePos(a),p=d.x,d=d.y,f=c._overInput(p,d);c._mouseDown=f;c._hasFocus&&f&&(c._selectionStart=c._clickPos(p,d))},mouseup:function(a,c){var d=c._mousePos(a),p=d.x,d=d.y,f=c._clickPos(p,d)!==c._selectionStart;c._hasFocus&&0<=c._selectionStart&&c._overInput(p,d)&&f?(c._selectionUpdated=!0,delete c._selectionStart,c.render()):delete c._selectionStart;c.click(a,c)},renderCanvas:function(){return this._renderCanvas},cleanup:function(){this._canvas.removeEventListener("mouseup",
this.mouseupCanvasListener,!1);this._canvas.removeEventListener("mousedown",this.mousedownCanvasListener,!1);this._canvas.removeEventListener("mousemove",this.mousemoveCanvasListener,!1);window.removeEventListener("keydown",this.keydownWindowListener,!1);window.removeEventListener("keyup",this.keyupWindowListener,!1);window.removeEventListener("mouseup",this.mouseupWindowListener,!0);window.removeEventListener("paste",this.pasteWindowListener,!1);clearInterval(this._cursorInterval);this._canvas.style.cursor=
"default";for(var a=0;a<d.length;a++)d[a]===this&&d.remove(a)},render:function(){var a=this,c=a._renderCtx,d=a.outerW,p=a.outerH,f=a._borderRadius,g=a._borderWidth,h=a.shadowW,k=a.shadowH;c.clearRect(0,0,c.canvas.width,c.canvas.height);c.shadowOffsetX=a._boxShadow.x;c.shadowOffsetY=a._boxShadow.y;c.shadowBlur=a._boxShadow.blur;c.shadowColor=a._boxShadow.color;0<a._borderWidth&&(c.fillStyle=a._borderColor,a._roundedRect(c,a.shadowL,a.shadowT,d-h,p-k,f),c.fill(),c.shadowOffsetX=0,c.shadowOffsetY=0,
c.shadowBlur=0);a._drawTextBox(function(){c.shadowOffsetX=0;c.shadowOffsetY=0;c.shadowBlur=0;var l=a._clipText(),D=a._padding+a._borderWidth+a.shadowT;if(0<a._selection[1]){var w=a._textWidth(l.substring(0,a._selection[0])),C=a._textWidth(l.substring(a._selection[0],a._selection[1]));c.fillStyle=a._selectionColor;c.fillRect(D+w,D,C,a._height)}c.fillStyle=a._placeHolder===a._value&&""!==a._value?a._placeHolderColor:a._fontColor;a._cursor&&(w=a._textWidth(l.substring(0,a._cursorPos)),c.fillRect(D+w,
D,1,a._height));w=a._padding+a._borderWidth+a.shadowL;D=Math.round(D+a._height/2);c.font=a._fontStyle+" "+a._fontWeight+" "+a._fontSize+"px "+a._fontFamily;c.textAlign="left";c.textBaseline="middle";c.fillText(l,w,D);C=a._innerShadow.split("px ");l="none"===a._innerShadow?0:parseInt(C[0],10);D="none"===a._innerShadow?0:parseInt(C[1],10);w="none"===a._innerShadow?0:parseInt(C[2],10);C="none"===a._innerShadow?"":C[3];if(0<w){var A=a._shadowCtx,u=A.canvas.width,z=A.canvas.height;A.clearRect(0,0,u,z);
A.shadowBlur=w;A.shadowColor=C;A.shadowOffsetX=0;A.shadowOffsetY=D;A.fillRect(-1*d,-100,3*d,100);A.shadowOffsetX=l;A.shadowOffsetY=0;A.fillRect(u,-1*p,100,3*p);A.shadowOffsetX=0;A.shadowOffsetY=D;A.fillRect(-1*d,z,3*d,100);A.shadowOffsetX=l;A.shadowOffsetY=0;A.fillRect(-100,-1*p,100,3*p);a._roundedRect(c,g+a.shadowL,g+a.shadowT,d-2*g-h,p-2*g-k,f);c.clip();c.drawImage(a._shadowCanvas,0,0,u,z,g+a.shadowL,g+a.shadowT,u,z)}a._ctx&&(a._ctx.clearRect(a._x,a._y,c.canvas.width,c.canvas.height),a._ctx.drawImage(a._renderCanvas,
a._x,a._y));return a})},_drawTextBox:function(a){var c=this,d=c._renderCtx,p=c.outerW,f=c.outerH,g=c._borderRadius,h=c._borderWidth,k=c.shadowW,l=c.shadowH;if(""===c._backgroundImage)d.fillStyle=c._backgroundColor,c._roundedRect(d,h+c.shadowL,h+c.shadowT,p-2*h-k,f-2*h-l,g),d.fill(),a();else{var D=new Image;D.src=c._backgroundImage;D.onload=function(){d.drawImage(D,0,0,D.width,D.height,h+c.shadowL,h+c.shadowT,p,f);a()}}},_clearSelection:function(){if(0<this._selection[1]){var a=this._selection[0],
c=this._selection[1];this._value=this._value.substr(0,a)+this._value.substr(c);this._cursorPos=a;this._cursorPos=0>this._cursorPos?0:this._cursorPos;this._selection=[0,0];return!0}return!1},_clipText:function(a){a="undefined"===typeof a?this._value:a;var c=this._textWidth(a)/(this._width-this._padding);return(1<c?a.substr(-1*Math.floor(a.length/c)):a)+""},_textWidth:function(a){var c=this._renderCtx;c.font=this._fontStyle+" "+this._fontWeight+" "+this._fontSize+"px "+this._fontFamily;c.textAlign=
"left";return c.measureText(a).width},_calcWH:function(){this.outerW=this._width+2*this._padding+2*this._borderWidth+this.shadowW;this.outerH=this._height+2*this._padding+2*this._borderWidth+this.shadowH},_updateCanvasWH:function(){var a=this._renderCanvas.width,c=this._renderCanvas.height;this._renderCanvas.setAttribute("width",this.outerW);this._renderCanvas.setAttribute("height",this.outerH);this._shadowCanvas.setAttribute("width",this._width+2*this._padding);this._shadowCanvas.setAttribute("height",
this._height+2*this._padding);this._ctx&&this._ctx.clearRect(this._x,this._y,a,c)},_roundedRect:function(a,c,d,p,f,g){p<2*g&&(g=p/2);f<2*g&&(g=f/2);a.beginPath();a.moveTo(c+g,d);a.lineTo(c+p-g,d);a.quadraticCurveTo(c+p,d,c+p,d+g);a.lineTo(c+p,d+f-g);a.quadraticCurveTo(c+p,d+f,c+p-g,d+f);a.lineTo(c+g,d+f);a.quadraticCurveTo(c,d+f,c,d+f-g);a.lineTo(c,d+g);a.quadraticCurveTo(c,d,c+g,d);a.closePath()},_overInput:function(a,c){var d=a<=this._x+this._extraX+this._width+2*this._padding,p=c>=this._y+this._extraY,
f=c<=this._y+this._extraY+this._height+2*this._padding;return a>=this._x+this._extraX&&d&&p&&f},_clickPos:function(a,c){var d=this._value;this._value===this._placeHolder&&(d="");var d=this._clipText(d),p=0,f=d.length;if(a-(this._x+this._extraX)<this._textWidth(d))for(var g=0;g<d.length;g++)if(p+=this._textWidth(d[g]),p>=a-(this._x+this._extraX)){f=g;break}return f},_mousePos:function(a){var c=a.target,d=document.defaultView.getComputedStyle(c,void 0),p=parseInt(d.paddingLeft,10)||0,f=parseInt(d.paddingLeft,
10)||0,g=parseInt(d.borderLeftWidth,10)||0,d=parseInt(d.borderLeftWidth,10)||0,h=document.body.parentNode.offsetTop||0,k=document.body.parentNode.offsetLeft||0,l=0,D=0;if("unefined"!==typeof c.offsetParent){do l+=c.offsetLeft,D+=c.offsetTop;while(c=c.offsetParent)}return{x:a.pageX-(l+(p+g+k)),y:a.pageY-(D+(f+d+h))}},_mapCodeToKey:function(a,c){for(var d=[8,9,13,16,17,18,20,27,91,92],p="",p=0;p<d.length;p++)if(c===d[p])return;if("boolean"===typeof a&&"number"===typeof c)return d={32:" ",48:")",49:"!",
50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",107:"+",173:"_",189:"_",186:":",187:"+",188:"<",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},p=a?65<=c&&90>=c?String.fromCharCode(c):d[c]:65<=c&&90>=c?String.fromCharCode(c).toLowerCase():96===c?"0":97===c?"1":98===c?"2":99===c?"3":100===c?"4":101===c?"5":102===c?"6":103===c?"7":104===c?"8":105===c?"9":188===c?",":190===c?".":191===c?"/":192===c?"`":220===c?"\\":187===c?"=":189===c||173===c?"-":222===c?"'":186===c?";":219===
c?"[":221===c?"]":String.fromCharCode(c)}}})();
(function(d,a){d.Spinner=a()})(this,function(){function d(a,c){var d=document.createElement(a||"div"),f;for(f in c)d[f]=c[f];return d}function a(a){for(var c=1,d=arguments.length;c<d;c++)a.appendChild(arguments[c]);return a}function c(a,c,d,f){var g=["opacity",c,~~(100*a),d,f].join("-");d=0.01+d/f*100;f=Math.max(1-(1-a)/c*(100-d),a);var h=C.substring(0,C.indexOf("Animation")).toLowerCase();w[g]||(A.insertRule("@"+(h&&"-"+h+"-"||"")+"keyframes "+g+"{0%{opacity:"+f+"}"+d+"%{opacity:"+a+"}"+(d+0.01)+
"%{opacity:1}"+(d+c)%100+"%{opacity:"+a+"}100%{opacity:"+f+"}}",A.cssRules.length),w[g]=1);return g}function x(a,c){var d=a.style,f,g;c=c.charAt(0).toUpperCase()+c.slice(1);for(g=0;g<D.length;g++)if(f=D[g]+c,void 0!==d[f])return f;if(void 0!==d[c])return c}function p(a,c){for(var d in c)a.style[x(a,d)||d]=c[d];return a}function f(a){for(var c=1;c<arguments.length;c++){var d=arguments[c],f;for(f in d)void 0===a[f]&&(a[f]=d[f])}return a}function g(a){for(var c={x:a.offsetLeft,y:a.offsetTop};a=a.offsetParent;)c.x+=
a.offsetLeft,c.y+=a.offsetTop;return c}function h(a,c){return"string"==typeof a?a:a[c%a.length]}function k(a){if("undefined"==typeof this)return new k(a);this.opts=f(a||{},k.defaults,u)}function l(){function c(a,f){return d("<"+a+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',f)}A.addRule(".spin-vml","behavior:url(#default#VML)");k.prototype.lines=function(d,f){function g(){return p(c("group",{coordsize:e+" "+e,coordorigin:-l+" "+-l}),{width:e,height:e})}function k(e,s,d){a(y,a(p(g(),
{rotation:360/f.lines*e+"deg",left:~~s}),a(p(c("roundrect",{arcsize:f.corners}),{width:l,height:f.width,left:f.radius,top:-f.width>>1,filter:d}),c("fill",{color:h(f.color,e),opacity:f.opacity}),c("stroke",{opacity:0}))))}var l=f.length+f.width,e=2*l,s=2*-(f.width+f.length)+"px",y=p(g(),{position:"absolute",top:s,left:s});if(f.shadow)for(s=1;s<=f.lines;s++)k(s,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(s=1;s<=f.lines;s++)k(s);return a(d,y)};k.prototype.opacity=
function(a,c,d,f){a=a.firstChild;f=f.shadow&&f.lines||0;a&&c+f<a.childNodes.length&&(a=(a=(a=a.childNodes[c+f])&&a.firstChild)&&a.firstChild)&&(a.opacity=d)}}var D=["webkit","Moz","ms","O"],w={},C,A=function(){var c=d("style",{type:"text/css"});a(document.getElementsByTagName("head")[0],c);return c.sheet||c.styleSheet}(),u={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:0.25,fps:20,zIndex:2E9,className:"spinner",top:"auto",left:"auto",position:"relative"};
k.defaults={};f(k.prototype,{spin:function(a){this.stop();var c=this,f=c.opts,h=c.el=p(d(0,{className:f.className}),{position:f.position,width:0,zIndex:f.zIndex}),k=f.radius+f.length+f.width,l,e;a&&(a.insertBefore(h,a.firstChild||null),e=g(a),l=g(h),p(h,{left:("auto"==f.left?e.x-l.x+(a.offsetWidth>>1):parseInt(f.left,10)+k)+"px",top:("auto"==f.top?e.y-l.y+(a.offsetHeight>>1):parseInt(f.top,10)+k)+"px"}));h.setAttribute("role","progressbar");c.lines(h,c.opts);if(!C){var s=0,y=(f.lines-1)*(1-f.direction)/
2,G,O=f.fps,n=O/f.speed,R=(1-f.opacity)/(n*f.trail/100),T=n/f.lines;(function H(){s++;for(var e=0;e<f.lines;e++)G=Math.max(1-(s+(f.lines-e)*T)%n*R,f.opacity),c.opacity(h,e*f.direction+y,G,f);c.timeout=c.el&&setTimeout(H,~~(1E3/O))})()}return c},stop:function(){var a=this.el;a&&(clearTimeout(this.timeout),a.parentNode&&a.parentNode.removeChild(a),this.el=void 0);return this},lines:function(f,g){function k(e,a){return p(d(),{position:"absolute",width:g.length+g.width+"px",height:g.width+"px",background:e,
boxShadow:a,transformOrigin:"left",transform:"rotate("+~~(360/g.lines*l+g.rotate)+"deg) translate("+g.radius+"px,0)",borderRadius:(g.corners*g.width>>1)+"px"})}for(var l=0,D=(g.lines-1)*(1-g.direction)/2,w;l<g.lines;l++)w=p(d(),{position:"absolute",top:1+~(g.width/2)+"px",transform:g.hwaccel?"translate3d(0,0,0)":"",opacity:g.opacity,animation:C&&c(g.opacity,g.trail,D+l*g.direction,g.lines)+" "+1/g.speed+"s linear infinite"}),g.shadow&&a(w,p(k("#000","0 0 4px #000"),{top:"2px"})),a(f,a(w,k(h(g.color,
l),"0 0 1px rgba(0,0,0,.1)")));return f},opacity:function(a,c,d){c<a.childNodes.length&&(a.childNodes[c].style.opacity=d)}});var z=p(d("group"),{behavior:"url(#default#VML)"});!x(z,"transform")&&z.adj?l():C=x(z,"animation");return k});window.m=window.m||{};
(function(d,a){var c="undefined";(function(a){d.log=a()})(function(){function d(c,f){var g=c[f];if(g.bind===a){if(Function.prototype.bind===a)return p(g,c);try{return Function.prototype.bind.call(c[f],c)}catch(h){return p(g,c)}}else return c[f].bind(c)}function p(a,c){return function(){Function.prototype.apply.apply(a,[c,arguments])}}function f(a){for(var c=0;c<w.length;c++)l[w[c]]=a(w[c])}function g(){return typeof window!==c&&window.document!==a&&window.document.cookie!==a}function h(){try{return typeof window!==
c&&window.localStorage!==a}catch(d){return!1}}function k(a){var c=!1,d,f;for(f in l.levels)if(l.levels.hasOwnProperty(f)&&l.levels[f]===a){d=f;break}if(h())try{window.localStorage.mloglevel=d}catch(k){c=!0}else c=!0;c&&g()&&(window.document.cookie="mloglevel="+d+";")}var l={},D=function(){},w=["trace","debug","info","warn","error"],C=/mloglevel=([^;]+)/;l.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5};l.setLevel=function(g){if("number"===typeof g&&0<=g&&g<=l.levels.SILENT)if(k(g),g===l.levels.SILENT)f(function(){return D});
else{if(typeof console===c)return f(function(a){return function(){typeof console!==c&&(l.setLevel(g),l[a].apply(l,arguments))}}),"No console available for logging";f(function(f){return g<=l.levels[f.toUpperCase()]?typeof console===c?D:console[f]===a?console.log!==a?d(console,"log"):D:d(console,f):D})}else if("string"===typeof g&&l.levels[g.toUpperCase()]!==a)l.setLevel(l.levels[g.toUpperCase()]);else throw"log.setLevel() called with invalid level: "+g;};l.enableAll=function(){l.setLevel(l.levels.TRACE)};
l.disableAll=function(){l.setLevel(l.levels.SILENT)};(function(){var c;h()&&(c=window.localStorage.mloglevel);c===a&&g()&&(c=(C.exec(window.document.cookie)||[])[1]);l.levels[c]===a&&(c="WARN");l.setLevel(l.levels[c])})();return l})})(window.m);window.m=window.m||{};
(function(d,a){function c(a){return(10>a?"0":"")+a}var x={0:["None","U"],1:["Time","sec"],2:["Delay","sec"],3:["Frequency","Hz"],4:["Time code format",""],5:["Distance","m"],6:["Speed","m/s"],7:["Acceleration","m/sec^2"],8:["Jerk","m/sec^3"],9:["Doppler","Hz"],10:["Doppler rate","Hz/sec"],11:["Energy","J"],12:["Power","W"],13:["Mass","g"],14:["Volume","l"],15:["Angular power density","W/ster"],16:["Integrated power density","W/rad"],17:["Spatial power density","W/m^2"],18:["Integrated power density",
"W/m"],19:["Spectral power density","W/MHz"],20:["Amplitude","U"],21:["Real","U"],22:["Imaginary","U"],23:["Phase","rad"],24:["Phase","deg"],25:["Phase","cycles"],26:["10*Log","U"],27:["20*Log","U"],28:["Magnitude","U"],29:["Unknown","U"],30:["Unknown","U"],31:["General dimensionless",""],32:["Counts",""],33:["Angle","rad"],34:["Angle","deg"],35:["Relative power","dB"],36:["Relative power","dBm"],37:["Relative power","dBW"],38:["Solid angle","ster"],40:["Distance","ft"],41:["Distance","nmi"],42:["Speed",
"ft/sec"],43:["Speed","nmi/sec"],44:["Speed","knots=nmi/hr"],45:["Acceleration","ft/sec^2"],46:["Acceleration","nmi/sec^2"],47:["Acceleration","knots/sec"],48:["Acceleration","G"],49:["Jerk","G/sec"],50:["Rotation","rps"],51:["Rotation","rpm"],52:["Angular velocity","rad/sec"],53:["Angular velocity","deg/sec"],54:["Angular acceleration","rad/sec^2"],55:["Angular acceleration","deg/sec^2"],60:["Latitude","deg"],61:["Longitude","deg"],62:["Altitude","ft"],63:["Altitude","m"]};d.Mc={colormap:[{name:"Greyscale",
colors:[{pos:0,red:0,green:0,blue:0},{pos:60,red:50,green:50,blue:50},{pos:100,red:100,green:100,blue:100},{pos:100,red:0,green:0,blue:0},{pos:100,red:0,green:0,blue:0},{pos:100,red:0,green:0,blue:0},{pos:100,red:0,green:0,blue:0}]},{name:"Ramp Colormap",colors:[{pos:0,red:0,green:0,blue:15},{pos:10,red:0,green:0,blue:50},{pos:31,red:0,green:65,blue:75},{pos:50,red:0,green:85,blue:0},{pos:70,red:75,green:80,blue:0},{pos:83,red:100,green:60,blue:0},{pos:100,red:100,green:0,blue:0}]},{name:"Color Wheel",
colors:[{pos:0,red:100,green:100,blue:0},{pos:20,red:0,green:80,blue:40},{pos:30,red:0,green:100,blue:100},{pos:50,red:10,green:10,blue:0},{pos:65,red:100,green:0,blue:0},{pos:88,red:100,green:40,blue:0},{pos:100,red:100,green:100,blue:0}]},{name:"Spectrum",colors:[{pos:0,red:0,green:75,blue:0},{pos:22,red:0,green:90,blue:90},{pos:37,red:0,green:0,blue:85},{pos:49,red:90,green:0,blue:85},{pos:68,red:90,green:0,blue:0},{pos:80,red:90,green:90,blue:0},{pos:100,red:95,green:95,blue:95}]},{name:"Sunset",
colors:[{pos:0,red:10,green:0,blue:23},{pos:18,red:34,green:0,blue:60},{pos:36,red:58,green:20,blue:47},{pos:55,red:74,green:20,blue:28},{pos:72,red:90,green:43,blue:0},{pos:87,red:100,green:72,blue:0},{pos:100,red:100,green:100,blue:76}]}]};d.PIPESIZE=1048576;d.initialize=function(c,g){var h=new BlueHeader(null);h.version="BLUE";h.size=0;h.type=1E3;h.format="SF";h.timecode=0;h.xstart=0;h.xdelta=1;h.xunits=0;h.subsize=1;h.ystart=0;h.ydelta=1;h.yunits=0;g||(g={});for(var k in g)h[k]=g[k];1<h.subsize&&
(h.type=2E3);h["class"]=h.type/1E3;if(2===h["class"]&&g.subsize===a)throw"subsize must be provided with type 2000 files";g.pipe?(h.pipe=!0,h.in_byte=0,h.out_byte=0,h.buf=new ArrayBuffer(g.pipesize||d.PIPESIZE),h.setData(h.buf),h.data_free=h.dview.length):h.setData(c);return h};d.force1000=function(a){2===a["class"]&&(a.size=a.size&&!a.pipe?a.subsize*a.size:0,a.bpe/=a.subsize,a.ape=1)};d.grab=function(c,d,h,k){if(!c.dview)return 0;"C"===c.format[0]&&(h*=2);k=Math.min(d.length,c.dview.length-h);if(d.set===
a)for(var l=0;l<k;l++)d[l]=c.dview[h+l];else d.set(c.dview.subarray(h,h+k));"C"===c.format[0]&&(k/=2);return k};d.filad=function(a,c,d){if(a.data_free<c.length)throw"Pipe full";var k=a.in_byte/a.dview.BYTES_PER_ELEMENT,l=k+c.length;if(l>a.dview.length){var l=a.dview.length-k,p=c.length-l;c.subarray?(a.dview.set(c.subarray(0,l),k),a.dview.set(c.subarray(l,c.length),0)):(a.dview.set(c.slice(0,l),k),a.dview.set(c.slice(l,c.length),0));a.in_byte=p*a.dview.BYTES_PER_ELEMENT}else a.dview.set(c,k),a.in_byte=
l*a.dview.BYTES_PER_ELEMENT%a.buf.byteLength;a.data_free-=c.length;if(a.onwritelisteners)for(c=0;c<a.onwritelisteners.length;c++)if(d)a.onwritelisteners[c]();else window.setTimeout(a.onwritelisteners[c],0)};d.pavail=function(a){return a.dview.length-a.data_free};d.grabx=function(c,d,h,k){var l=c.dview.length-c.data_free;k===a&&(k=0);if(!h)h=Math.min(d.length-k,l);else if(h>d.length-k)throw"m.grabx : nget larger then available buffer space";if(0>h)throw"m.grabx : nget cannot be negative";if(h>l)return 0;
var l=c.out_byte/c.dview.BYTES_PER_ELEMENT,p=l+h;if(p>=c.dview.length){var w=c.dview.length-l,p=p-c.dview.length;d.set(c.dview.subarray(l,c.dview.length),k);d.set(c.dview.subarray(0,p),k+w)}else d.set(c.dview.subarray(l,p),k);c.out_byte=p*c.dview.BYTES_PER_ELEMENT%c.buf.byteLength;c.data_free+=h;return h};d.addPipeWriteListener=function(a,c){a.onwritelisteners||(a.onwritelisteners=[]);-1===a.onwritelisteners.indexOf(c)&&a.onwritelisteners.push(c)};d.units_name=function(a){a=x[a];return a[0]+" ("+
a[1]+")"};d.trim_name=function(a){var c=a.indexOf("]");-1===c&&(c=a.indexOf("/"));-1===c&&(c=a.indexOf(":"));var d=a.substr(c+1,a.length).indexOf(".");0>d&&(d=a.length-c);return a.substr(c+1,c+d+1)};d.label=function(c,g){var h=["Unknown","U"];"string"===typeof c?h=[c,null]:Array.isArray(c)?h=c:(h=x[c],h===a&&(h=["Unknown","U"]));var k=d.mult_prefix(g);return h[1]?h[0]+" ("+k+h[1]+")":h[0]};d.bound=function(a,c,d){return a<c?c:a>d?d:a};d.touch_distance=function(a,c){var d=a.pageX-c.pageX,k=a.pageY-
c.pageY;return Math.sqrt(d*d+k*k)};d.mult_prefix=function(a){var c="?";1==a?c="":10==a?c="da":0.1==a?c="d":100==a?c="h":0.01==a?c="c":1E3==a?c="K":0.001==a?c="m":1E6==a?c="M":1E-6==a?c="u":1E9==a?c="G":1E-9==a?c="n":1E12==a?c="T":1E-12==a&&(c="p");return c};var p="F";d.vstype=function(a){p=a;"D"===p||"L"===p||"F"===p||"I"===p||"B"===p||alert("Unsupported vector type")};d.log10=function(c,d){d===a&&(d=1E-20);return Math.log(Math.max(c,d))/Math.log(10)};d.vlog10=function(c,d,h){d===a&&(d=1E-20);h===
a&&(h=c);for(var k=0;k<c.length&&!(h.length<=k);k++)h[k]=Math.log(Math.max(c[k],d))/Math.log(10)};d.vlogscale=function(c,d,h,k){d===a&&(d=1E-20);h===a&&(h=1);k===a&&(k=c);for(var l=0;l<c.length&&!(k.length<=l);l++)k[l]=Math.log(Math.abs(Math.max(c[l],d)))/Math.log(10),k[l]*=h};d.cvmag2logscale=function(c,d,h,k){d===a&&(d=1E-20);h===a&&(h=1);k===a&&(k=c);for(var l=0,p=0;p<k.length;p++){l=2*p+1;if(l>=c.length)break;k[p]=c[l-1]*c[l-1]+c[l]*c[l];k[p]=Math.log(Math.abs(Math.max(k[p],d)))/Math.log(10);
k[p]*=h}};d.vsmul=function(c,d,h,k){h===a&&(h=c);k===a&&(k=h.length);k=Math.min(h.length,k);k=Math.min(c.length,k);for(var l=0;l<k&&!(h.length<=l);l++)h[l]=c[l]*d};d.vmxmn=function(a,c){var d=a[0],k=a[0],l=0,p=0;c=Math.min(c,a.length);for(var w=0;w<c;w++)a[w]>d&&(d=a[w],l=w),a[w]<k&&(k=a[w],p=w);return{smax:d,smin:k,imax:l,imin:p}};d.vmov=function(c,d,h,k,l){l===a&&(l=c.length);l=Math.min(c.length,l);for(var p=0;p<l;p++){var w=p*d,C=p*k;if(w>=c.length)break;if(C>=h.length)break;h[C]=c[w]}};d.vfill=
function(c,d,h){h===a&&(h=c.length);h=Math.min(c.length,h);for(var k=0;k<h;k++)c[k]=d};d.vabs=function(c,d,h){h===a&&(h=c.length);d===a&&(d=c);for(var k=0;k<h;k++)d[k]=Math.abs(c[k])};d.cvmag=function(c,d,h){h===a&&(h=d.length);h=Math.min(d.length,h);for(var k=0;k<h;k++){var l=2*k+1;if(l>=c.length)break;d[k]=Math.sqrt(c[l-1]*c[l-1]+c[l]*c[l])}};d.cvmag2=function(c,d,h){h===a&&(h=d.length);h=Math.min(d.length,h);for(var k=0,l=0;l<h;l++){k=2*l+1;if(k>=c.length)break;d[l]=c[k-1]*c[k-1]+c[k]*c[k]}};d.cvpha=
function(c,d,h){h===a&&(h=d.length);h=Math.min(d.length,h);for(var k=0,l=0,p=k=0;p<h;p++){k=2*p+1;if(k>=c.length)break;l=c[k-1];k=c[k];0===l&&0===k&&(l=1);d[p]=Math.atan2(k,l)}};d.cvphad=function(c,d,h){h===a&&(h=d.length);h=Math.min(d.length,h);for(var k=0,l=0,p=k=0;p<h;p++){k=2*p+1;if(k>=c.length)break;l=c[k-1];k=c[k];0===l&&0===k&&(l=1);d[p]=Math.atan2(k,l)*(180/Math.PI)}};d.trunc=function(a){return a-a%1};d.sign=function(a,c){return 0<=c?Math.abs(a):-Math.abs(a)};d.sec2tod=function(a,d){var h=
"",h=Date.UTC(1950,0,1);Date.UTC(1949,11,31);var k=new Date,k=new Date(k.getFullYear(),k.getMonth(),k.getDate(),0,0,0,0);0<=a?86400>a?(h=k.getTime()+1E3*a,k=new Date(h),h=c(k.getHours())+":"+c(k.getMinutes())+":"+c(k.getSeconds())):86400===a?h="24:00:00":31536E3>a?(h=a/86400,h=[0<h?Math.floor(h):Math.ceil(h)],k=new Date(1E3*a+k.getTime()),h=h.toString()+"::"+c(k.getHours())+":"+c(k.getMinutes())+":"+c(k.getSeconds())):(h=Math.floor(1E3*a)+h,k=new Date(h),h=k.getUTCFullYear()+":"+c(k.getUTCMonth()+
1)+":"+c(k.getUTCDate())+"::"+c(k.getUTCHours())+":"+c(k.getUTCMinutes())+":"+c(k.getUTCSeconds())):-31536E3<a?(h=a/86400,h=0>=h?Math.ceil(h):Math.floor(h),k=new Date(Math.abs(1E3*a)+k.getTime()),h=0===h?"-0":h.toString(),h=h+"::"+c(k.getHours())+":"+c(k.getMinutes())+":"+c(k.getSeconds())):(h=Math.floor(1E3*a)+h,k=new Date(h),h=k.getUTCFullYear()+":"+c(k.getUTCMonth()+1)+":"+c(k.getUTCDate())+"::"+c(k.getUTCHours())+":"+c(k.getUTCMinutes())+":"+c(k.getUTCSeconds()));h=0===a%1?h+".000000":h+("."+
Math.abs(a%1).toPrecision(6).slice(2,8));if(d){var k=h.indexOf("."),l=-1;-1!==k&&(l=h.substr(k,h.length).indexOf("0"));-1!==l&&(h=h.substr(0,k+l))}return h};d.sec2tspec=function(a,c,h){c=c||"";if(0<=a&&86400>=a)return d.sec2tod(a,h);a%=86400;return"delta"!==c&&0>=a?d.sec2tod(a+86400,h):"delta"===c&&0>=a?"-"+d.sec2tod(-1*a,h):d.sec2tod(a,h)};d.sec2tod_j1970=function(a){var d="";0<=a&&86400>a?(d=new Date(1E3*a),d=c(d.getHours())+":"+c(d.getMinutes())+":"+c(d.getSeconds())):0>a&&-31536E3<a?(d=new Date(1E3*
a),d=(a/86400*-1).toString()+"::"+c(d.getHours())+":"+c(d.getMinutes())+":"+c(d.getSeconds())):(d=new Date(1E3*(a-631152E3)),d=d.getFullYear()+":"+c(d.getMonth())+":"+c(d.getDate())+"::"+c(d.getHours())+":"+c(d.getMinutes())+":"+c(d.getSeconds()));0!==a%1&&(d+="."+(a%1).toPrecision(6).slice(2,8));return d};d.j1970toj1950=function(c){return c.getTime!==a?c.getTime()/1E3+631152E3:c+631152E3};d.j1950toj1970=function(a){return a-631152E3};d.throttle=function(a,c){var d=(new Date).getTime();return function(){var k=
(new Date).getTime();k-d>=a&&(d=k,c.apply(null,arguments))}}})(window.m);window.mx=window.mx||{};
(function(d,a,c){function x(){this.ymax=this.ymin=this.xmax=this.xmin=this.yl=this.xl=this.yo=this.xo=0;this.mode=this.func=c}function p(e){this.root=e;this.parent=document.createElement("div");this.parent.style.position="relative";this.parent.width=e.clientWidth;this.parent.height=e.clientHeight;e.appendChild(this.parent);this.canvas=document.createElement("canvas");this.canvas.style.position="absolute";this.canvas.style.top="0px";this.canvas.style.left="0px";this.canvas.width=e.clientWidth;this.canvas.height=
e.clientHeight;this.parent.appendChild(this.canvas);this.active_canvas=this.canvas;this.wid_canvas=document.createElement("canvas");this.wid_canvas.style.position="absolute";this.wid_canvas.style.top="0px";this.wid_canvas.style.left="0px";this.wid_canvas.style.zIndex=1;this.wid_canvas.width=e.clientWidth;this.wid_canvas.height=e.clientHeight;this.parent.appendChild(this.wid_canvas);this.font=c;this.font_family="Courier New, monospace";this.level=this.text_h=this.text_w=0;this.width=this.parent.width;
this.height=this.parent.height;this.ymrk=this.xmrk=this.ypos=this.xpos=0;this.origin=1;this.stk=[new d.STKSTRUCT];d.setbgfg(this,"black","white");this.warpbox=this.event_cb=c;this.rmode=!1;this.linewidth=1;this.style=c;this.xi=!1;this.l=this.state_mask=this.button_press=this.button_release=0;this.r=this.width;this.t=0;this.b=this.height;this.scrollbar_x=new d.SCROLLBAR;this.scrollbar_y=new d.SCROLLBAR;this.prompt=c;this.pixel=[];this._renderCanvas=document.createElement("canvas")}function f(e,a,c,
d,g,n,f){g<=c?f>c&&0<(d-a)*(f-c)-(n-a)*(g-c)&&(e+=1):f<=c&&0>(d-a)*(f-c)-(n-a)*(g-c)&&(e-=1);return e}function g(e,a){a.animationFrameHandle||(a.animationFrameHandle=requestAnimFrame(d.withWidgetLayer(e,function(){d.erase_window(e);a.animationFrameHandle=c;var y=1.5*e.text_h;a.x=Math.max(a.x,0);a.y=Math.max(a.y,0);a.x=Math.min(a.x,e.width-a.w);a.y=Math.min(a.y,e.height-a.h);var G=a.x+F.GBorder+Math.max(0,F.sidelab),g=a.y+F.GBorder+F.toplab*(y+F.GBorder),n=a.w-2*F.GBorder-Math.abs(F.sidelab);d.widgetbox(e,
a.x,a.y,a.w,a.h,G,g,n,a.h-2*F.GBorder-F.toplab*(y+F.GBorder),a.title);var f=e.wid_canvas.getContext("2d");f.lineWidth=1;f.strokeStyle=e.xwbs;f.beginPath();f.moveTo(G,g-4+0.5);f.lineTo(G+n-1,g-4+0.5);f.stroke();f.strokeStyle=e.xwts;f.beginPath();f.moveTo(G,g-3+0.5);f.lineTo(G+n-1,g-3+0.5);f.stroke();for(var h=0;h<a.items.length;h++){var B=a.items[h],k=g+y*h;"separator"===B.style?(f.fillStyle=e.xwbs,f.fillRect(G,k,n,y),f.beginPath(),f.moveTo(G,k+0.5),f.lineTo(G+n,k+0.5),f.stroke(),f.textBaseline="middle",
f.textAlign="left",f.fillStyle=e.xwfg,f.fillText(" "+B.text+" ",G+2*e.text_w,k+y/2)):(d.LEGACY_RENDER?(f.fillStyle=e.xwlo,f.fillRect(G,k,n,y),f.beginPath(),f.moveTo(G,k+0.5),f.lineTo(G+n,k+0.5),f.stroke(),B.selected&&d.shadowbox(e,G-1,k,n+2,y,1,2,"",0.75)):(f.save(),f.globalAlpha=0.75,f.fillStyle=B.selected?e.xwts:e.xwlo,f.fillRect(G,k,n,y),f.restore(),f.strokeStyle=e.bg,f.beginPath(),f.moveTo(G,k+0.5),f.lineTo(G+n,k+0.5),f.stroke()),f.textBaseline="middle",f.textAlign="left",f.fillStyle=e.xwfg,"checkbox"===
B.style?(f.fillText(" "+B.text+" ",G+2*e.text_w,k+y/2),f.strokeStyle=e.xwfg,f.strokeRect(G+1+e.text_w,k+(y-e.text_w)/2,e.text_w,e.text_w),B.checked&&(f.beginPath(),f.moveTo(G+1+e.text_w,k+(y-e.text_w)/2),f.lineTo(G+1+e.text_w+e.text_w,k+(y-e.text_w)/2+e.text_w),f.stroke(),f.beginPath(),f.moveTo(G+1+e.text_w+e.text_w,k+(y-e.text_w)/2),f.lineTo(G+1+e.text_w,k+(y-e.text_w)/2+e.text_w),f.stroke())):(f.fillText(" "+B.text+" ",G,k+y/2),B.checked&&(f.beginPath(),f.moveTo(G+1,k+e.text_h/4),f.lineTo(G+1+e.text_w-
2,k+e.text_h/4+e.text_h/2),f.lineTo(G+1,k+e.text_h/4+e.text_h),f.lineTo(G+1,k+e.text_h/4),f.fill())))}})))}function h(e,a){d.onWidgetLayer(e,function(){d.erase_window(e)});e.menu=c;e.widget=null;for(var y=0;y<a.items.length;y++){var G=a.items[y];if(G.selected){G.handler?G.handler():G.menu&&(y=G.menu,"function"===typeof G.menu&&(y=G.menu()),y.finalize=a.finalize,d.menu(e,y));break}}!e.menu&&a.finalize&&a.finalize()}function k(e,a){d.onWidgetLayer(e,function(){d.erase_window(e)});e.menu=c;e.widget=
null;!e.menu&&a.finalize&&a.finalize()}function l(e,a,c){var d=!0,f;f=a/e;0<e?f>c.tL?d=!1:f>c.tE&&(c.tE=f):0>e?f<c.tE?d=!1:f<c.tL&&(c.tL=f):0<a&&(d=!1);return d}function D(e,a,c,d,f,n,g,h){0>a&&(a=0);0>c&&(c=0);0>d&&(d=0);0>f&&(f=0);h&&(e.lineWidth=h);g&&(e.strokeStyle=g);1===e.lineWidth%2&&(a===d&&(d=a=Math.floor(a)+0.5),c===f&&(f=c=Math.floor(c)+0.5));if(!n||!n.mode)e.beginPath(),e.moveTo(a,c),e.lineTo(d,f),e.stroke(),e.beginPath();else if("dashed"===n.mode){if(dashOn(e,n.on,n.off))e.beginPath(),
e.moveTo(a,c),e.lineTo(d,f),e.stroke(),dashOff(e);else if(e.beginPath(),c===f)for(f=Math.min(a,d),d=Math.max(a,d);f<d;)e.moveTo(f,c),e.lineTo(f+n.on,c),e.stroke(),f+=n.on+n.off;else if(a===d)for(d=Math.min(c,f),f=Math.max(c,f);d<f;)e.moveTo(a,d),e.lineTo(a,d+n.on),e.stroke(),d+=n.on+n.off;else throw"Only horizontal or vertical dashed lines are supported";e.beginPath()}else if("xor"===n.mode)if("undefined"===typeof Uint8ClampedArray)e.beginPath(),e.moveTo(a,c),e.lineTo(d,f),e.stroke(),e.beginPath();
else{g=n=0;if(c===f)n=Math.abs(d-a),g=h,a=Math.min(a,d);else if(a===d)n=h,g=Math.abs(f-c),c=Math.min(c,f);else throw"Only horizontal and vertical lines can be drawn with XOR";if(0!==n&&0!==g){a=Math.floor(a);c=Math.floor(c);d=e.getImageData(a,c,n,g);f=d.data;n=0;for(h=f.length;n<h;n+=4)f[n]=255-f[n],f[n+1]=255-f[n+1],f[n+2]=255-f[n+2],f[n+3]=255;e.putImageData(d,a,c);e.clearRect(0,0,1,1)}}}function w(e,a,c,d,f){C(e,a,f);c&&(e.strokeStyle=c);d&&(e.fillStyle=d);e.fill();e.closePath()}function C(e,a,
c){if(!(1>a.length)){var d=a[0].x,f=a[0].y;e.lineWidth=c?c:1;e.beginPath();e.moveTo(d,f);for(c=0;c<a.length;c++)d=a[c].x,f=a[c].y,e.lineTo(d,f)}}function A(e){return Math.floor(Math.round(e/100*255))}function u(e,a,c){return"rgb("+Math.round(e)+", "+Math.round(a)+", "+Math.round(c)+")"}function z(e,a){var c,d;if(".000000"===e.substring(5,8))c=4;else for(c=e.length-1;"0"===e[c];)c-=1;for(d=0;" "===e[d]&&(5<c-d+1||a);)d+=1;c=e.substring(d,c+1);-1===c.indexOf(".")&&(c+=".");return c}function J(e){e._animationFrameHandle=
c;var a=e.warpbox;e.active_canvas.getContext("2d");if(a&&e.xpos>=a.xmin&&e.xpos<=a.xmax&&e.ypos>=a.ymin&&e.ypos<=a.ymax){a.xl=e.xpos;a.yl=e.ypos;var y=Math.min(a.xo,a.xl),f=Math.min(a.yo,a.yl),g=Math.abs(a.xl-a.xo),n=Math.abs(a.yl-a.yo);0!==g&&0!==n&&("vertical"===a.mode?(y=e.l,g=e.r-e.l):"horizontal"===a.mode&&(f=e.t,n=e.b-e.t),d.onWidgetLayer(e,function(){d.erase_window(e);d.draw_box(e,"xor",y,f,g,n,a.style.opacity,a.style.fill_color)}))}}function Q(e,a,d,f,g,n,h,k,B,l,p,r,t){l===c&&(l=0);p===c&&
(p=0);r===c&&(r=d.width-l);t===c&&(t=d.height-p);e._renderCanvas.width=d.width;e._renderCanvas.height=d.height;for(var E=e._renderCanvas.getContext("2d"),q=E.createImageData(e._renderCanvas.width,e._renderCanvas.height),N=new Uint8Array(d),P=0;P<d.height;++P)for(var I=0;I<d.width;++I){var L=4*(P*d.width+I);q.data[L]=N[L];q.data[L+1]=N[L+1];q.data[L+2]=N[L+2];q.data[L+3]=255}E.putImageData(q,0,0);a.save();a.globalAlpha=f;g||(a.imageSmoothingEnabled=!1,a.mozImageSmoothingEnabled=!1,a.webkitImageSmoothingEnabled=
!1);a.drawImage(e._renderCanvas,l,p,r,t,n,h,k,B);a.restore()}function S(e,a,d,f,g,n,h,k,B,l,p,r,t){l===c&&(l=0);p===c&&(p=0);r===c&&(r=d.width-l);t===c&&(t=d.height-p);if(32768>d.width&&32768>d.height){e._renderCanvas.width=d.width;e._renderCanvas.height=d.height;var E=e._renderCanvas.getContext("2d"),q=E.createImageData(e._renderCanvas.width,e._renderCanvas.height);d=new Uint8ClampedArray(d);q.data.set(d);E.putImageData(q,0,0)}else 32768>r&&32768>t?(e._renderCanvas.width=r,e._renderCanvas.height=
t,U(e._renderCanvas,d,l,p,r,t)):(e._renderCanvas.width=Math.min(2*k,d.width),e._renderCanvas.height=Math.min(2*B,d.height),U(e._renderCanvas,d,l,p,r,t),r=e._renderCanvas.width,t=e._renderCanvas.height),p=l=0;a.save();a.globalAlpha=f;g||(a.imageSmoothingEnabled=!1,a.mozImageSmoothingEnabled=!1,a.webkitImageSmoothingEnabled=!1);a.drawImage(e._renderCanvas,l,p,r,t,n,h,k,B);a.restore()}function U(e,a,c,d,f,n){var g=new Uint32Array(a);f||(f=a.width);n||(n=a.height);c||(c=0);d||(d=0);var h=e.width,k=e.height;
e=e.getContext("2d");var l=e.createImageData(h,k),p=new ArrayBuffer(l.data.length),r=new Uint8ClampedArray(p),p=new Uint32Array(p);f/=h;n/=k;for(var t=0,E=0,k=t=0;k<p.length;k++)t=Math.round(Math.floor(k%h)*f)+c,E=Math.round(Math.floor(k/h)*n)+d,t=Math.floor(E*a.width+t),p[k]=g[t];l.data.set(r);e.putImageData(l,0,0)}d.XW_INIT=-3;d.XW_DRAW=1;d.XW_EVENT=2;d.XW_UPDATE=3;d.XW_COMMAND=5;d.SB_EXPAND=1;d.SB_SHRINK=2;d.SB_FULL=3;d.SB_STEPINC=4;d.SB_STEPDEC=5;d.SB_PAGEINC=6;d.SB_PAGEDEC=7;d.SB_DRAG=8;d.SB_WHEELUP=
9;d.SB_WHEELDOWN=10;d.L_ArrowLeft=1001;d.L_ArrowRight=1002;d.L_ArrowUp=1003;d.L_ArrowDown=1004;d.L_dashed=801;d.GBorder=3;d.L_RModeOff=900;d.L_RModeOn=901;d.L_PixelSymbol=1;d.L_CircleSymbol=2;d.L_SquareSymbol=3;d.L_PlusSymbol=4;d.L_XSymbol=5;d.L_TriangleSymbol=6;d.L_ITriangleSymbol=7;d.L_HLineSymbol=8;d.L_VLineSymbol=9;d.LEGACY_RENDER=!1;d.STKSTRUCT=function(){this.y2=this.x2=this.y1=this.x1=this.yscl=this.xscl=this.ymax=this.ymin=this.xmax=this.xmin=0};d.SCROLLBAR=function(){this.repeat_count=this.origin=
this.mxevent=this.arrow=this.a2=this.a1=this.soff=this.swmin=this.sw=this.s1=this.h=this.w=this.y=this.x=this.repeat_pause=this.initial_pause=this.dragoutline=this.scale=this.page=this.step=this.trange=this.tmin=this.srange=this.smin=this.action=this.flag=null};d.open=function(e){e=new p(e);e.wid_canvas.oncontextmenu=function(e){e.preventDefault();return!1};this._ctx=e.active_canvas.getContext("2d");e.onmousemove=function(e){return function(a){var f=a.target.getBoundingClientRect();e.x=a.x||a.clientX;
e.y=a.y||a.clientY;e.xpos=a.offsetX===c?a.pageX-f.left-window.scrollX:a.offsetX;e.ypos=a.offsetX===c?a.pageY-f.top-window.scrollY:a.offsetY;e.warpbox&&(e.warpbox.style=(a.ctrlKey||a.metaKey)&&e.warpbox.alt_style!==c?e.warpbox.alt_style:e.warpbox.def_style,d.redraw_warpbox(e));d.widget_callback(e,a)}}(e);e.onmouseup=function(e){return function(a){if(e.warpbox){d.onWidgetLayer(e,function(){d.erase_window(e)});var f=e.warpbox;e.warpbox=c;if((1===a.which||3===a.which)&&f.func){var g=f.xo,n=f.yo,h=f.xl,
k=f.yl;"vertical"===f.mode?(g=e.l,h=e.r):"horizontal"===f.mode&&(n=e.t,k=e.b);f.func(a,g,n,h,k,f.style.return_value,f.mode)}}d.widget_callback(e,a)}}(e);e.onmousedown=function(e){return function(a){a.preventDefault();d.widget_callback(e,a);return!1}}(e);e.onkeydown=function(e){return function(a){if(e.warpbox){var c=getKeyCode(a);17!==c&&224!==c&&91!==c&&93!==c||e.warpbox.style===e.warpbox.alt_style||(e.warpbox.style=e.warpbox.alt_style,d.redraw_warpbox(e))}d.widget_callback(e,a)}}(e);e.onkeyup=function(e){return function(a){e.warpbox&&
(a=getKeyCode(a),17!==a&&224!==a&&91!==a&&93!==a||e.warpbox.style===e.warpbox.def_style||(e.warpbox.style=e.warpbox.def_style,d.redraw_warpbox(e)))}}(e);e.ontouchend=function(e){return function(a){e.onmouseup({which:1})}}(e);e.ontouchmove=function(e){return function(a){var f=e.canvas,g=0,n=0;if(f.offsetParent!==c){do g+=f.offsetLeft,n+=f.offsetTop;while(f=f.offsetParent)}e.xpos=a.targetTouches[0].pageX-g;e.ypos=a.targetTouches[0].pageY-n;d.redraw_warpbox(e)}}(e);d.enableListeners(e);return e};d.enableListeners=
function(e){d.addEventListener(e,"mousemove",e.onmousemove,!1);window.addEventListener("mouseup",e.onmouseup,!1);d.addEventListener(e,"mousedown",e.onmousedown,!1);window.addEventListener("keydown",e.onkeydown,!1);window.addEventListener("keyup",e.onkeyup,!1)};d.disableListeners=function(e){d.removeEventListener(e,"mousemove",e.onmousemove,!1);window.removeEventListener("mouseup",e.onmouseup,!1);d.removeEventListener(e,"mousedown",e.onmousedown,!1);window.removeEventListener("keydown",e.onkeydown,
!1);window.removeEventListener("keyup",e.onkeyup,!1)};d.addEventListener=function(e,a,c,d){return e.wid_canvas.addEventListener(a,c,d)};d.removeEventListener=function(e,a,c,d){return e.wid_canvas.removeEventListener(a,c,d)};d.dispatchEvent=function(e,a){return e.wid_canvas.dispatchEvent(a)};d.onWidgetLayer=function(e,a){d.onCanvas(e,e.wid_canvas,a)};d.onCanvas=function(e,a,c){var d=e.active_canvas;e.active_canvas=a;try{if(c)return c()}finally{e.active_canvas=d}};d.withWidgetLayer=function(e,a){return function(){d.onWidgetLayer(e,
a)}};d.render=function(e,a){if(a){var d=e.active_canvas;d._animationFrameHandle||(d._animationFrameHandle=requestAnimFrame(function(){d._animationFrameHandle=c;a()}))}};d.fullscreen=function(e,a){a===c&&(a=!e.fullscreen);a?(e.fullscreen={position:e.root.style.position,height:e.root.style.height,width:e.root.style.width,left:e.root.style.left,top:e.root.style.top,zIndex:e.root.style.zIndex},e.root.style.position="fixed",e.root.style.height="100%",e.root.style.width="100%",e.root.style.left="0px",e.root.style.top=
"0px",e.root.style.zIndex=16777271):(e.root.style.position=e.fullscreen.position,e.root.style.height=e.fullscreen.height,e.root.style.width=e.fullscreen.width,e.root.style.left=e.fullscreen.left,e.root.style.top=e.fullscreen.top,e.root.style.zIndex=e.fullscreen.zIndex,e.fullscreen=c);d.checkresize(e)};d.checkresize=function(e){var a=e.canvas;return a.height!==e.root.clientHeight||a.width!==e.root.clientWidth?(e.height=e.root.clientHeight,e.width=e.root.clientWidth,e.canvas.height=e.height,e.canvas.width=
e.width,e.wid_canvas.height=e.height,e.wid_canvas.width=e.width,!0):!1};d.invertbgfg=function(e){d.setbgfg(e,e.fg,e.bg,!e.xi)};d.mixcolor=function(e,a,c){e=tinycolor(e).toRgb();a=tinycolor(a).toRgb();var d=1-c;a.r=e.r*d+a.r*c;a.g=e.g*d+a.g*c;a.b=e.b*d+a.b*c;return tinycolor(a).toHexString(!0)};d.linear_gradient=function(e,a,c,d,f,n){var g=e.active_canvas.getContext("2d");e=1/n.length;a=g.createLinearGradient(a,c,d,f);for(c=0;c<n.length-1;c++)a.addColorStop(e*c,n[c]);a.addColorStop(1,n[n.length-1]);
return a};d.setbgfg=function(e,a,c,f){e.bg=tinycolor(a).toHexString();e.fg=tinycolor(c).toHexString();e.xi=tinycolor(f).toHexString();tinycolor.equals(e.bg,"black")&&tinycolor.equals(e.fg,"white")?(e.xwfg=e.fg,e.xwbg="rgb(35%,35%,30%)",e.xwts="rgb(60%,60%,55%)",e.xwbs="rgb(25%,25%,20%)",e.xwms=d.mixcolor(e.xwts,e.xwbs,0.5),e.xwlo="rgb(15%,15%,10%)",e.hi=e.xwts):tinycolor.equals(e.bg,"white")&&tinycolor.equals(e.fg,"black")?(e.xwfg=e.fg,e.xwbg="rgb(60%,60%,55%)",e.xwts="rgb(80%,80%,75%)",e.xwbs="rgb(40%,40%,35%)",
e.xwms=d.mixcolor(e.xwts,e.xwbs,0.5),e.xwlo="rgb(70%,70%,65%)",e.hi=e.xwbs):(a=tinycolor(e.bg).toRgb(),127.5<Math.sqrt(0.299*a.r*a.r+0.587*a.g*a.g+0.114*a.b*a.b)?(e.xwfg="black",e.xwbg="rgb(60%,60%,55%)",e.xwts="rgb(80%,80%,75%)",e.xwbs="rgb(40%,40%,35%)",e.xwms=d.mixcolor(e.xwts,e.xwbs,0.5),e.xwlo="rgb(70%,70%,65%)",e.hi=e.xwts):(e.xwfg="white",e.xwbg="rgb(35%,35%,30%)",e.xwts="rgb(60%,60%,55%)",e.xwbs="rgb(25%,25%,20%)",e.xwms=d.mixcolor(e.xwts,e.xwbs,0.5),e.xwlo="rgb(15%,15%,10%)",e.hi=e.xwbs))};
d.settheme=function(e,a){e.bg=a.bg;e.fg=a.fg;e.xi=a.xi;e.xwfg=a.xwfg;e.xwbg=a.xwbg;e.xwts=a.xwts;e.xwbs=a.xwbs;e.xwlo=a.xwlo;e.hi=a.hi};d.close=function(e){var a=e.wid_canvas;a.removeEventListener("mousemove",e.onmousemove,!1);a.removeEventListener("mouseup",e.onmouseup,!1);e.parent&&e.parent.parentNode&&e.parent.parentNode.removeChild(e.parent)};d.scrollbar=function(e,a,f,g,h,n,k,l,B,p,v){var r,t,E,q=0,N=new d.SCROLLBAR;r=a.flag!==c?a.flag:a;t=Math.abs(r);E=n-h>g-f?3>e.origin?2:4:e.origin&2?3:1;
10>t&&(a=N);if(10>t||0===a.action)d.scroll(e,a,d.XW_INIT,c,v),a.flag=r,a.initial_pause=-1,d.scroll_loc(a,f,h,g-f+1,n-h+1,E,v);a.srange=k.pe-k.ps;switch(t){case 0:f=g=h=1;break;case 1:case 11:f=g=0.9*a.srange;h=2;break;case 2:case 12:f=0.1*a.srange;g=9*f;h=2;break;case 3:case 13:f=1;g=a.srange-1;h=1;break;default:return 0}d.scroll_vals(a,k.ps,a.srange,l,B-l,f,g,h,v);0===r?d.scroll(e,a,d.XW_DRAW,c,c):d.scroll(e,a,d.XW_EVENT,p,v)&&(k.ps!==a.smin&&(k.ps=a.smin,q+=1),k.pe!==a.smin+a.srange&&(k.pe=a.smin+
a.srange,q+=2));return q};d.scroll=function(e,a,f,g,h){var n;if(a===c)return!1;switch(f){case d.XW_INIT:d.scroll_loc(a,0,0,e.width,20,1,h);d.scroll_vals(a,0,10,0,100,1,10,1,h);a.flag=0;a.action=0;a.initial_pause=0.25;a.repeat_pause=0.05;a.mxevent=!0;a.repeat_count=0;break;case d.XW_EVENT:n=0;if(a.mxevent)n=e.button_release?-e.button_release:e.button_press;else if("mousedown"===g.type||"mouseup"===g.type){switch(g.which){case 1:n=1;break;case 2:n=2;break;case 3:n=3;break;case 4:n=4;break;case 5:n=
5}"mouseup"===g.type&&(n=-n)}else if("mousewheel"===g.type||"DOM-MouseScroll"===g.type)g.wheelDelta&&0<g.wheelDelta?n=4:g.wheelDelta&&0>g.wheelDelta&&(n=5);if(0===a.action){if(4===n||5===n)e.xpos=a.x;if(1!==n&&2!==n&&4!==n&&5!==n||e.xpos<a.x||e.ypos<a.y||e.xpos>a.x+a.w||e.ypos>a.y+a.h)return!1}else if(0>n){a.action=a.repeat_count=0;break}a.origin&1?(g=e.xpos-a.x,a.origin&2&&(g=a.w-g)):(g=e.ypos-a.y,2>=a.origin&&(g=a.h-g));if(0===a.action){a.repeat_count=0;var k=d.scroll_real2pix(a);a.s1=h.s1=k.s1;
a.sw=h.sw=k.sw;a.soff=h.soff=g-a.s1;if(0===a.trange)a.smin=h.smin=a.tmin,a.srange=h.srange=0;else switch(n){case 1:a.action=g>a.a1&&g<a.a2?0<a.soff?d.SB_PAGEINC:d.SB_PAGEDEC:0<a.soff?d.SB_STEPINC:d.SB_STEPDEC;break;case 4:a.action=d.SB_WHEELUP;break;case 5:a.action=d.SB_WHEELDOWN;break}}else switch(a.action){case d.SB_WHEELUP:case d.SB_WHEELDOWN:case d.SB_EXPAND:case d.SB_SHRINK:case d.SB_FULL:a.action=a.repeat_count=0}case d.XW_COMMAND:n=a.smin;g=a.srange;switch(a.action){case d.SB_STEPINC:n+=a.step;
break;case d.SB_STEPDEC:n-=a.step;break;case d.SB_PAGEINC:n+=a.page;break;case d.SB_PAGEDEC:n-=a.page;break;case d.SB_FULL:n=a.tmin;g=a.trange;break;case d.SB_EXPAND:g*=a.scale;n=0>=n&&0<=n+a.srange?n*a.scale:n-(g-a.srange)/2;break;case d.SB_SHRINK:g/=a.scale;n=0>n&&0<=n+a.srange?n+g/a.scale:0===n&&0<=n+a.srange?g/a.scale:n+(a.srange-g)/2;break;case d.SB_WHEELUP:n-=a.page;break;case d.SB_WHEELDOWN:n+=a.page}0<a.trange?(n=Math.max(a.tmin,Math.min(n,a.tmin+a.trange-g)),g=Math.min(g,a.trange)):(n=Math.min(a.tmin,
Math.max(n,a.tmin+a.trange-g)),g=Math.max(g,a.trange));a.smin===n&&a.srange===g?a.action!==d.SB_DRAG&&(a.action=a.repeat_count=0):(a.smin=h.smin=n,a.srange=h.srange=g,a.repeat_count++);f===d.XW_COMMAND&&(d.scroll(e,a,d.XW_UPDATE,c),a.action=0);break;case d.XW_DRAW:case d.XW_UPDATE:d.redrawScrollbar(a,e,f)}return!0};d.scroll_loc=function(e,s,f,g,h,n,k){e!==c&&(e.x=k.x=s,e.y=k.y=f,e.w=k.w=g,e.h=k.h=h,e.origin=k.origin=Math.max(1,Math.min(4,n)),e.origin&1?(e.a2=k.a2=e.w,e.arrow=k.arrow=Math.min(a.trunc((e.w-
a.trunc(2*d.GBorder))/3),e.h+d.GBorder)):(e.a2=k.a2=e.h,e.arrow=k.arrow=Math.min(a.trunc((e.h-a.trunc(2*d.GBorder))/3),e.w+d.GBorder)),e.a1=k.a1=e.arrow+d.GBorder,e.a2-=e.arrow+d.GBorder,k.a2-=e.arrow+d.GBorder,e.swmin=k.swmin=Math.min(10,e.a2-e.a1),e.s1=k.s1=0,e.sw=k.sw=0,e.action=k.action=0)};d.scroll_vals=function(e,a,d,f,g,n,h,k,B){e!==c&&(e.smin=B.smin=a,e.srange=B.srange=d,e.tmin=B.tmin=f,e.trange=B.trange=g,e.step=B.step=n,e.page=B.page=h,e.scale=B.scale=Math.max(k,1))};d.draw_symbol=function(e,
c,f,g,h,n,k){for(var l=e.active_canvas.getContext("2d"),B=0,p=0,v=0,r=!1,t=[],p=0;4>p;p++)t[p]={x:0,y:0};p="";r=0>n;B=Math.abs(n);p=2*B;l.fillStyle=c;l.strokeStyle=c;if("function"===typeof h)h(l,k,f,g);else switch(h){case d.L_CircleSymbol:l.beginPath();r?(l.arc(f,g,B,0,360),l.fill()):(l.arc(f,g,B,0,360),l.stroke());break;case d.L_SquareSymbol:r?l.fillRect(f-B,g-B,p,p):l.strokeRect(f-B,g-B,p,p);break;case d.L_PixelSymbol:l.beginPath();l.arc(f,g,1,0,2*Math.PI,!0);l.fill();break;case d.L_ITriangleSymbol:B=
-B;case d.L_TriangleSymbol:p=a.trunc(1.5*B);v=a.trunc(0.8*B);t[1].x=-v;t[1].y=p;t[2].x=2*v;t[2].y=0;t[3].x=-v;t[3].y=-p;e=[];for(p=0;4>p;p++)e[p]={x:0,y:0};r?(e[0].x=f,e[0].y=g-B,e[1].x=e[0].x+t[1].x,e[1].y=e[0].y+t[1].y,e[2].x=e[1].x+t[2].x,e[2].y=e[1].y+t[2].y,e[3].x=e[2].x+t[3].x,e[3].y=e[2].y+t[3].y,w(l,e)):(e[0].x=f,e[0].y=g-B,e[1].x=e[0].x+t[1].x,e[1].y=e[0].y+t[1].y,e[2].x=e[1].x+t[2].x,e[2].y=e[1].y+t[2].y,e[3].x=e[2].x+t[3].x,e[3].y=e[2].y+t[3].y,C(l,e,void 0),l.stroke(),l.closePath());break;
case d.L_PlusSymbol:D(l,f,g+B,f,g-B);D(l,f+B,g,f-B,g);break;case d.L_HLineSymbol:D(l,f+B,g,f-B,g);break;case d.L_VLineSymbol:D(l,f,g+B,f,g-B);break;case d.L_XSymbol:D(l,f-B,g-B,f+B,g+B);D(l,f+B,g-B,f-B,g+B);break;default:p=h,B=a.trunc(e.text_w/2),r&&l.fillText(p.substring(0,2),f-B,g+B)}};d.draw_symbols=function(e,a,c,f,g,n,h,k){for(var l=0;l<g;l++)d.draw_symbol(e,a,c[l],f[l],n,h,l+k)};d.trace=function(e,s,g,h,k,n,p,T,B,H,v){if(g===c||h===c)throw"mx.trace requires xpoint and ypoint";p===c&&(p=1);T===
c&&(T=1);B===c&&(B=0);H===c&&(H=0);v===c&&(v={});if(0>=k)a.log.warn("No points to draw");else if(0===T&&0===B)a.log.warn("No line or symbol to draw");else{var r;v.dashed&&(r={mode:"dashed",on:4,off:4});var t=d.origin(e.origin,4,e.stk[e.level]);if(0!==t.xscl&&0!==t.yscl){var E=t.x1,q=t.y1,N=t.xmin,P=1/t.xscl,I=t.ymin,L=1/t.yscl;v.noclip||d.clip(e,E,q,t.x2-E+1,t.y2-q+1);var M=Math.abs(t.xmax-t.xmin),w=Math.abs(t.ymax-t.ymin),D=Math.min(t.xmin,t.xmax),t=Math.min(t.ymin,t.ymax),K=D+M,Y=t+w,W=4*Math.ceil(2*
g.length),A=new Int32Array(new ArrayBuffer(W)),W=new Int32Array(new ArrayBuffer(W)),u=0;if(0===T&&0!==B)for(var C=p-1;C<k;C+=p){var x=g[C],z=h[C],J=x>=D&&x<=K&&z>=t&&z<=Y;J&&(A[0]=Math.round((x-N)*P)+E,W[0]=Math.round((z-I)*L)+q,d.draw_symbol(e,s,A[0],W[0],B,H,n+C))}else if(!0===v.vertsym&&0!==B)for(C=p-1;C<k;C+=p)x=g[C],z=h[C],x>=D&&x<=K&&(T=Math.round((x-N)*P)+E,d.draw_line(e,s,T,0,T,e.height),z>=t&&z<=Y&&(A[0]=T,W[0]=Math.round((z-I)*L)+q,d.draw_symbol(e,s,A[0],W[0],B,H,n+C)));else if(!0===v.horzsym&&
0!==B)for(C=p-1;C<k;C+=p)x=g[C],z=h[C],z>=t&&z<=Y&&(T=Math.round((z-I)*L)+q,d.draw_line(e,s,0,T,e.width,T),x>=D&&x<=K&&(A[0]=Math.round((x-N)*P)+E,W[0]=T,d.draw_symbol(e,s,A[0],W[0],B,H,n+C)));else if(0!==T){var F;if(v&&v.highlight){F=[];for(C=0;C<v.highlight.length;C++)if(!(v.highlight[C].xstart>=K||v.highlight[C].xend<=D)&&(x=Math.max(v.highlight[C].xstart,D),z=Math.min(v.highlight[C].xend,K),x<z)){x=Math.round((x-N)*P)+E;z=Math.round((z-N)*P)+E;for(M=F.length-1;0<=M;M--)x<=F[M].start&&z>=F[M].end?
F.splice(M,1):(x>=F[M].start&&z<=F[M].end?(F.push({start:z,end:F[M].end,color:F[M].color}),F[M].end=x):x<=F[M].start&&z>=F[M].start?F[M].start=z:x<=F[M].end&&z>=F[M].end&&(F[M].end=x),F[M].end<=F[M].start&&F.splice(M,1));F.push({start:x,end:z,color:v.highlight[C].color})}F.push({start:E,color:s});F.sort(function(e,a){return e.start-a.start})}else F=s;var Q,S=(e.stk[e.level].xmax+e.stk[e.level].xmin)/2,U=(e.stk[e.level].ymax+e.stk[e.level].ymin)/2,x=g[0],z=h[0];Q=f(0,S,U,e.stk[e.level].xmin,e.stk[e.level].ymin,
x,z);(J=x>=D&&x<=K&&z>=t&&z<=Y)?(A[u]=Math.round((x-N)*P)+E,W[u]=Math.round((z-I)*L)+q,u+=1,0!==B&&d.draw_symbols(e,s,A,W,1,B,H,n)):u=0;for(var X=0,V=!1,C=p;C<=p*(k-1);C+=p)if(M=x,w=z,x=g[C],z=h[C],Q=f(Q,S,U,M,w,x,z),V=x>=D&&x<=K&&z>=t&&z<=Y,J&&V)A[u]=Math.round((x-N)*P)+E,W[u]=Math.round((z-I)*L)+q,u+=1;else if(J=V,M-=x,w-=z,0!==M||0!==w){var Z={tL:1,tE:0};l(M,D-x,Z)&&l(-M,x-K,Z)&&l(w,t-z,Z)&&l(-w,z-Y,Z)&&(1>Z.tL&&(A[u]=Math.round((x-N+Z.tL*M)*P)+E,W[u]=Math.round((z-I+Z.tL*w)*L)+q,u+=1),0<Z.tE?
(A[u]=Math.round((x-N+Z.tE*M)*P)+E,W[u]=Math.round((z-I+Z.tE*w)*L)+q,u+=1,d.draw_lines(e,F,A.subarray(X,u),W.subarray(X,u),u-X,T,r),0!==B&&2<u-X&&d.draw_symbols(e,s,A.subarray(X+1,u-1),W.subarray(X+1,u-1),u-X-2,B,H,n+C-(u-X-2)),X=u):(A[u]=Math.round((x-N)*P)+E,W[u]=Math.round((z-I)*L)+q,u+=1))}Q=f(Q,S,U,x,z,e.stk[e.level].xmax,e.stk[e.level].ymin);Q=f(Q,S,U,e.stk[e.level].xmax,e.stk[e.level].ymin,e.stk[e.level].xmin,e.stk[e.level].ymin);0<u-X&&(d.draw_lines(e,F,A.subarray(X,u),W.subarray(X,u),u-X,
T,r),V&&(X+=1),0!==B&&1<u-X&&d.draw_symbols(e,s,A.subarray(X-1,u),W.subarray(X-1,u),u-X-1,B,H,C-u+n));v.fillStyle&&(1<u||0!==Q)&&d.fill_trace(e,v.fillStyle,A,W,u)}v.noclip||d.clip(e,0,0,0,0)}}};d.draw_mode=function(e,a,d){e.linewidth=a===c?1:a;e.style=d};d.draw_line=function(e,d,f,g,h,n,k,l){var p=e.active_canvas.getContext("2d");k===c&&(k=e.linewidth);l===c&&(l=e.style);"number"===typeof d&&(e.pixel&&0!==e.pixel.length?(d=Math.max(0,Math.min(e.pixel.length,d)),d=u(e.pixel[d].red,e.pixel[d].green,
e.pixel[d].blue)):(a.log.warn("COLORMAP not initialized, defaulting to foreground"),d=e.fg));D(p,f,g,h,n,l,d,k)};d.rubberline=function(e,a,c,d,f){e=e.active_canvas.getContext("2d");D(e,a,c,d,f,{mode:"xor"},"white",1)};d.fill_trace=function(e,a,c,f,g){var n=e.active_canvas.getContext("2d");Array.isArray(a)?n.fillStyle=d.linear_gradient(e,0,0,0,e.b-e.t,a):n.fillStyle=a;if(1>g)n.fillRect(e.l,e.t,e.r-e.l,e.b-e.t);else if(a){a=c[0];var h=f[0];n.beginPath();h===e.t?n.lineTo(e.l,e.t):n.lineTo(e.l,e.b);n.lineTo(a,
h);for(var k=1;k<g;k++)a=c[k],h=f[k],n.lineTo(a,h);h===e.t&&n.lineTo(e.r,e.t);n.lineTo(e.r,e.b);f[0]===e.t&&n.lineTo(e.l,e.b);n.closePath();n.fill()}};d.draw_lines=function(e,d,f,g,h,n,k){var l=e.active_canvas.getContext("2d");if(!(1>h)){var p=f[0],H=g[0];n===c&&(n=e.linewidth);k===c&&(k=e.style);k&&"dashed"===k.mode&&(dashOn(l,k.on,k.off)||a.log.warn("WARNING: Dashed lines aren't supported on your browser"));l.lineWidth=n;e=0;"string"===typeof d?d=[{start:0,color:d}]:d instanceof Array||(d.start===
c&&(d.start=0),d=[d]);for(n=0;n<d.length;n++)null!=d[n].end&&d[n].end<p?d.remove(n):d[n].start<p&&(e=n);l.strokeStyle=d[e].color;l.beginPath();l.moveTo(p,H);for(n=0;n<h;n++)if(p!==f[n]||H!==g[n]){p=f[n];H=g[n];k=!1;if(0<e&&null!=d[e].end&&d[e].end<p)for(k=!0;null!=d[e].end&&d[e].end<p&&(d.remove(e),e-=1,0!==e););if(e+1<d.length&&d[e+1].start<=p)for(k=!0;e+1<d.length&&d[e+1].start<=p;)e++;l.lineTo(p,H);k&&(l.stroke(),l.strokeStyle=d[e].color,l.beginPath(),l.lineTo(p,H))}l.stroke();dashOff(l);l.beginPath()}};
d.clip=function(e,a,c,d,f){e=e.active_canvas.getContext("2d");0===a&&0===c&&0===d&&0===f?e.restore():(e.save(),e.beginPath(),e.rect(a,c,d,f),e.clip())};d.clear_window=function(e){var a=e.active_canvas.getContext("2d");a.fillStyle=e.bg;a.fillRect(0,0,e.width,e.height)};d.erase_window=function(e){e.active_canvas.getContext("2d").clearRect(0,0,e.width,e.height)};d.rubberbox=function(e,a,c,f,g){d.warpbox(e,e.xpos,e.ypos,e.xpos,e.ypos,0,e.width,0,e.height,a,c,f,g)};d.warpbox=function(e,a,c,d,f,g,h,k,l,
p,v,r,t){r||(r={});e.warpbox=new x;e.warpbox.xo=a;e.warpbox.yo=c;e.warpbox.xl=d;e.warpbox.yl=f;e.warpbox.xmin=g;e.warpbox.xmax=h;e.warpbox.ymin=k;e.warpbox.ymax=l;e.warpbox.func=p;e.warpbox.mode=v;e.warpbox.style=r;e.warpbox.def_style=r;e.warpbox.alt_style=t};d.origin=function(e,a,c){e=Math.max(1,e);a=Math.max(1,a);var f=new d.STKSTRUCT;f.xmin=c.xmin;f.xmax=c.xmax;f.ymin=c.ymin;f.ymax=c.ymax;f.xscl=c.xscl;f.yscl=c.yscl;f.x1=c.x1;f.y1=c.y1;f.x2=c.x2;f.y2=c.y2;if(e!==a){var g=Math.abs(a-e);e=a+e;if(2===
g||5!==e)f.xmin=c.xmax,f.xmax=c.xmin,f.xscl=-c.xscl;if(2===g||5===e)f.ymin=c.ymax,f.ymax=c.ymin,f.yscl=-c.yscl}return f};d.mult=function(e,a){var c=Math.max(Math.abs(e),Math.abs(a));if(0===c)return 1;var d=0.1447648*Math.log(c),d=d|d;1>c&&(d-=1);return 0>d?1/Math.pow(10,-3*d):Math.pow(10,3*d)};d.widget_callback=function(a,c){if(a.prompt&&3===c.which)a.prompt.input.onsubmit();a.widget&&a.widget.callback(c)};d.prompt=function(a,f,g,h,k,n,l,p,B){if(n!==c&&(k=g(n),!k.valid))throw"Prompt default input value not valid due to '"+
k.reason+"'";d.onWidgetLayer(a,function(){var k=a.active_canvas.getContext("2d"),O=k.font.indexOf("px"),r=O+3,O=k.font.substr(0,O),k=k.font.substr(r,k.font.length).toString(),k=new CanvasInput({height:a.text_h,fontFamily:k,fontSize:new Number(O),backgroundColor:a.bg,fontColor:a.fg,borderWidth:0,borderRadius:0,padding:0,boxShadow:"none",innerShadow:"none",width:30*a.text_w,value:n!==c?n.toString():"",disableBlur:!0,renderOnReturn:!1,tabToClear:!0}),t=function(r,t){return function(){var f=this.value(),
s=g(f);s.valid?(a.prompt=c,this.cleanup(),d.onWidgetLayer(a,function(){d.erase_window(a)}),h(f)):(d.message(a,"Value: '"+f+"' isn't valid due to '"+s.reason+"' - RETRY",c,r,t),setTimeout(function(){d.onWidgetLayer(a,function(){d.erase_window(a)});a.widget=null},null!=B?B:4E3))}},r=function(a,e,c){return function(r,f){d.onWidgetLayer(a,function(){var s=(c.length+2)*a.text_w,g=s+31*a.text_w+6,n=2*a.text_h+6;r||(r=a.xpos);f||(f=a.ypos);var h=Math.max(0,Math.min(r,a.width-g)),k=Math.max(0,Math.min(f,
a.height-n)),y=h+3,l=k+3,p=l+1.5*a.text_h,B=y+a.text_w;d.widgetbox(a,h,k,g,n,y,l,0,"");d.text(a,B,p,c);g=p-1.15*a.text_h;e.x(y+a.text_w+s-a.text_w);e.y(g);e.onsubmit(t(h,g-75));e.canvas()?e.render():e.canvas(a.active_canvas)})}}(a,k,f);r(l,p);k.focus();a.prompt={redraw:r,input:k}})};d.floatValidator=function(a,d){return(d!==c&&!1!==d||""!==a)&&isNaN(parseFloat(a))||!isFinite(a)?{valid:!1,reason:"Failed float validation: not a valid floating point number"}:{valid:!0,reason:""}};d.intValidator=function(a,
d){return(d===c||!1===d)&&""===a||parseFloat(a)===parseInt(a,10)&&!isNaN(a)?{valid:!0,reason:""}:{valid:!1,reason:"Failed integer validation: not a valid integer"}};d.message=function(a,c,f,g,h,n){d.onWidgetLayer(a,function(){d.render_message_box(a,c,g,h);a.widget={type:n||"ONESHOT",callback:function(c){if("mousedown"===c.type||"keydown"===c.type)a.widget=null,d.onWidgetLayer(a,function(){d.erase_window(a)})}}})};d.render_message_box=function(a,c,f,g,h){var n=c.split(/\r\n|\r|\n/g),k=0,l;if(1===n.length){k=
Math.min((a.width-6)/a.text_w-2,c.length);if(0>=k)return;for(;40<k&&2.5*a.text_h*c.length<a.height*k;)k-=5;var p=0,H=0,v=0,r=0,t=0,E=0,n=[];for(l=!0;H<c.length;){for(var t=H+k-1,E=t=Math.min(t,c.length-1),q=!1,p=H;p<=t&&!q;p++)switch(c[p]){case ",":case ";":case " ":case ":":E=p;break;case "-":case "/":E!==p-1&&(E=p);break;case "@":case "\n":case "\r":l=!1,q=!0,E=p}p===c.length&&(E=t);q?n.push(c.substring(H,E)):(p=c.substring(H,E+1).replace(/^\s+/,""),n.push(p));H=E+1;r=Math.max(r,n[v].length)}}else for(v=
0;v<n.length;v++)k=Math.min((a.width-6)/a.text_w-2,Math.max(k,n[v].length));r=n.length;6<r&&(l=!1);p=0;v=Math.max(1,a.height/a.text_h);c=Math.min(r,p+v-1);k=(k+2)*a.text_w+6;r=(c-p+1)*a.text_h+6;f||(f=a.xpos);g||(g=a.ypos);f=Math.max(a.l,Math.min(f,a.r-k));v=Math.max(a.t,Math.min(g,a.b-r));g=f+3;E=v+3;d.widgetbox(a,f,v,k,r,g,E,0,"");r=E+a.text_h/3;for(v=g+a.text_w;p<c;)r+=a.text_h,l&&(v=f+k/2-n[p].length*a.text_w/2),d.text(a,v,r,n[p],h),p++};d.draw_round_box=function(a,d,f,g,h,n,k,l,p){a=a.active_canvas.getContext("2d");
p||(p=5);a.beginPath();a.moveTo(f+p,g);a.lineTo(f+h-p,g);a.quadraticCurveTo(f+h,g,f+h,g+p);a.lineTo(f+h,g+n-p);a.quadraticCurveTo(f+h,g+n,f+h-p,g+n);a.lineTo(f+p,g+n);a.quadraticCurveTo(f,g+n,f,g+n-p);a.lineTo(f,g+p);a.quadraticCurveTo(f,g,f+p,g);a.closePath();a.lineWidth=1;a.strokeStyle=d;a.stroke();k!==c&&0<k&&(f=a.globalAlpha,a.globalAlpha=k,a.fillStyle=l?l:d,a.fill(),a.globalAlpha=f)};d.draw_box=function(a,d,f,g,h,n,k,p){var l=a.active_canvas.getContext("2d");if("xor"!==d)l.lineWidth=1,l.strokeStyle=
d,l.strokeRect(f,g,h,n);else if("undefined"===typeof Uint8ClampedArray)l.lineWidth=1,l.strokeStyle=a.fg,l.strokeRect(f,g,h,n);else{f=Math.floor(f);g=Math.floor(g);h=Math.floor(h);n=Math.floor(n);a=a.canvas.getContext("2d");for(var H=a.getImageData(f,g,h,1),v=H.data,r=0;r<H.data.length;r++)v[4*r]=255-v[4*r],v[4*r+1]=255-v[4*r+1],v[4*r+2]=255-v[4*r+2],v[4*r+3]=255;l.putImageData(H,f,g);H=a.getImageData(f,g+n,h,1);v=H.data;for(r=0;r<H.data.length;r++)v[4*r]=255-v[4*r],v[4*r+1]=255-v[4*r+1],v[4*r+2]=
255-v[4*r+2],v[4*r+3]=255;l.putImageData(H,f,g+n);H=a.getImageData(f,g,1,n);v=H.data;for(r=0;r<n;r++)v[4*r]=255-v[4*r],v[4*r+1]=255-v[4*r+1],v[4*r+2]=255-v[4*r+2],v[4*r+3]=255;l.putImageData(H,f,g);H=a.getImageData(f+h,g,1,n);v=H.data;for(r=0;r<n;r++)v[4*r]=255-v[4*r],v[4*r+1]=255-v[4*r+1],v[4*r+2]=255-v[4*r+2],v[4*r+3]=255;l.putImageData(H,f+h,g)}k!==c&&0<k&&(a=l.globalAlpha,l.globalAlpha=k,l.fillStyle=p?p:d,l.fillRect(f+1,g+1,h-1,n-1),l.globalAlpha=a)};d.set_font=function(a,c){var d=a.canvas.getContext("2d"),
f=a.wid_canvas.getContext("2d");if(a.font&&a.font.width===c)d.font=a.font.font,f.font=a.font.font;else{var g=1;do{g+=1;d.font=g+"px "+a.font_family;f.font=g+"px "+a.font_family;var n=d.measureText("M");a.text_w=n.width;a.text_h=g}while(a.text_w<c);a.font={font:g+"px "+a.font_family,width:c}}};d.textline=function(a,c,d,f,g,n){var h=a.active_canvas.getContext("2d");n||(n={});n.color||(n.color=a.fg);n.width||(n.width=1);D(h,c,d,f,g,n,n.color,n.width)};d.tics=function(a,c,d,f){var g=1,n=a;if(c===a)return{dtic:1,
dtic1:a};g=Math.abs(c-a)/d;d=Math.max(g,1E-36);d=Math.log(d)/Math.log(10);0>d?(d=Math.ceil(d),d-=1):d=Math.floor(d);g*=Math.pow(10,-d);d=Math.pow(10,d);n=g*d;f&&5<=n&&5140800>=n?(f=17.5>n?5:37.5>n?15:270>n?60:1050>n?300:2250>n?900:7200>n?3600:16200>n?10800:32400>n?21600:129600>n?43200:518400>n?86400:604800,g=Math.round(n/f)*f):g=1.75>g?d:2.25>g?2*d:3.5>g?2.5*d:7>g?5*d:10*d;0===g&&(g=1);c>=a?(f=Math.floor(0<=a?a/g+0.995:a/g-0.005),n=f*g):(f=Math.floor(0<=a?a/g+0.005:a/g-0.995),n=f*g,g*=-1);n+g===n&&
(g=c-a);return{dtic:g,dtic1:n}};d.drawaxis=function(e,f,g,h,k,n){var l=d.origin(e.origin,1,e.stk[e.level]),p=0,B=0,H=0,v=0,r=0,t=0;h=h===c?30:h;k=k===c?30:k;n.exactbox?(p=Math.floor(l.x1),B=Math.floor(l.y1),H=Math.floor(l.x2),v=Math.floor(l.y2),r=H-p,t=v-B):(p=Math.max(Math.floor(l.x1)-2,0),B=Math.max(Math.floor(l.y1)-2,0),H=Math.min(Math.floor(l.x2)+2,e.width),v=Math.min(Math.floor(l.y2)+2,e.height),r=H-p-4,t=v-B-4);var E=e.active_canvas.getContext("2d");n.fillStyle?Array.isArray(n.fillStyle)?E.fillStyle=
d.linear_gradient(e,0,0,0,v-B,n.fillStyle):E.fillStyle=n.fillStyle:E.fillStyle=e.bg;E.fillRect(p,B,H-p,v-B);n.noaxisbox||(d.textline(e,p,B,H,B),d.textline(e,H,B,H,v),d.textline(e,H,v,p,v),d.textline(e,p,v,p,B));var q={dtic:0,dtic1:0},E={dtic:0,dtic1:0};0>f?(q.dtic1=l.xmin,q.dtic=(l.xmin-l.xmax)/f):q=d.tics(l.xmin,l.xmax,f,n.xtimecode);var N=1;n.xmult?N=n.xmult:n.xtimecode||(N=d.mult(l.xmin,l.xmax));0>g?(E.dtic1=l.ymin,E.dtic=(l.ymin-l.ymax)/g):E=d.tics(l.ymin,l.ymax,g,n.ytimecode);f=1;n.ymult?f=n.ymult:
n.ytimecode||(f=d.mult(l.ymin,l.ymax));var P=!n.noxtlab;g=!n.noytlab;var I=Math.max(0,p-4*e.text_w),L=0,L=n.ontop?Math.min(e.height,Math.floor(v+1.5*e.text_h)):Math.max(e.text_h,Math.floor(B-0.5*e.text_h)),M,w;0<L&&(n.noyplab||(w=n.ylabel instanceof Function?n.ylabel(k,f):n.ylabel!==c?n.ylabel:a.label(k,f)),n.noxplab||(M=n.xlabel instanceof Function?n.ylabel(h,N):n.xlabel!==c?n.xlabel:a.label(h,N)));M&&w?d.text(e,I,L,w+" vs "+M):M?d.text(e,I,L,M):w&&d.text(e,I,L,w);h=5.5*e.text_w;k=0;k=n.ontop?n.inside?
B+1*e.text_h:B-0.2*e.text_h:n.inside?v-0.5*e.text_h:v+1*e.text_h+2;r=l.xmin!==l.xmax?r/(l.xmax-l.xmin):r/1;N=0!==N?1/N:1;M=Math.min(12,Math.round(r*q.dtic)/e.text_w);w=1;var u="";if(P)if(n.xtimecode)u=a.sec2tod(q.dtic1),w=u.length*e.text_w<(H-p)/2;else for(var K,L=q.dtic1;L<=l.xmax;L+=q.dtic){u=d.format_f(L*N,M,M/2);if(u===K){w=0;break}K=u}0===q.dtic&&(q.dtic=l.xmax-q.dtic1+1);I=0;u="";for(L=q.dtic1;L<=l.xmax;L+=q.dtic)if(K=p+Math.round(r*(L-l.xmin))+2,!(K<p)&&(n.grid&&"y"!==n.grid?(n.gridStyle||
(n.gridStyle=d.LEGACY_RENDER?{mode:"dashed",on:1,off:3}:{color:e.xwms,mode:"dashed",on:1,off:3}),d.textline(e,K,v,K,B,n.gridStyle)):(d.textline(e,K,v-2,K,v+2),d.textline(e,K,B-2,K,B+2)),P))if(w){if(u=null,n.xtimecode?K>I&&(u=a.sec2tod(L,!0),I=K+e.text_w*(u.length+1)):(u=d.format_f(L*N,M,M/2),u=z(u,!0)),u){var Y=Math.round(u.length/2)*e.text_w;n.inside&&(K=Math.max(p+Y,K),K=Math.min(H-Y,K));0<=K-Y&&d.text(e,K-Y,k,u)}}else L===q.dtic1&&(n.xtimecode?(u=a.sec2tod(L,!0),n.inside&&(K=Math.floor(Math.max(p+
h,K))),d.text(e,K-h,k,u+" +\u0394 "+a.sec2tod(q.dtic))):(u=(q.dtic1*N).toString(),n.inside&&(K=Math.floor(Math.max(p+h,K))),d.text(e,K-h,k,u+" +\u0394 "+q.dtic*N)));h=n.yonright?n.inside?Math.min(H-6*e.text_w,e.width-5*e.text_w):Math.min(H+e.text_w,e.width-5*e.text_w):n.inside?Math.max(0,p+e.text_w):Math.max(0,Math.floor(p-(e.l-0.5)*e.text_w));k=0.4*e.text_h;r=l.ymin!==l.ymax?-t/(l.ymax-l.ymin):-t/1;N=0!==f?1/f:1;t=l.ymax>=l.ymin?function(a){return a<=l.ymax}:function(a){return a>=l.ymax};for(f=E.dtic1;t(f);f+=
E.dtic)K=v+Math.round(r*(f-l.ymin))-2,K>v||(n.grid&&"x"!==n.grid?(n.gridStyle||(n.gridStyle={mode:"dashed",on:1,off:3}),d.textline(e,p,K,H,K,n.gridStyle)):(d.textline(e,p-2,K,p+2,K),d.textline(e,H-2,K,H+2,K)),!g||n.inside&&(K<B+e.text_h||K>v-2*e.text_h)||(n.ytimecode?(q=a.sec2tod(f),P=K+k-e.text_h,I=q.indexOf("::"),-1!==I&&(P>B&&P<v&&d.text(e,h,P,q.substring(0,I)),I+=1),d.text(e,h,Math.min(v,K+k),q.substring(I+1,I+6)),P=K+k+e.text_h,P>B&&P<v&&"00"!==q.substring(I+7,I+9)&&(q+=".00",d.text(e,h,P,q.substring(I+
7,I+12)))):(q=d.format_f(f*N,12,6),q=z(q,n.inside),d.text(e,h,Math.min(v,K+k),q))))};d.inrect=function(a,c,d,f,g,n){return a>=d&&a<=d+g&&c>=f&&c<=f+n};var F={GBorder:3,sidelab:0,toplab:1};d.menu=function(a,f){var l=1.5*a.text_h;if(f){if(!a.widget){f.x=a.xpos;f.y=a.ypos;f.val=0;f.h=2*F.GBorder+l*f.items.length+F.toplab*(l+F.GBorder)-1;f.y=f.y-((F.toplab+Math.max(1,f.val)-0.5)*l+(1+F.toplab)*F.GBorder)+1;for(var p=f.title.length,O=0,n=0;n<f.items.length;n++){var w=f.items[n],p=Math.max(p,w.text.length);
"checkbox"===w.style&&(p+=2);"separator"===w.style&&(p+=2);w.checked&&"checkbox"!==w.style&&(O=l*n)}f.y-=O;p=(p+2)*a.text_w;f.w=2*F.GBorder+Math.abs(F.sidelab)+p-1;f.x-=f.w/2;a.menu=f;a.widget={type:"MENU",callback:function(n){var l=f;if(n===c)g(a,l);else if("mousemove"===n.type){l.drag_x!==c&&l.drag_y!==c&&2<Math.abs(a.xpos-l.drag_x)&&2<Math.abs(a.ypos-l.drag_y)&&(l.x+=a.xpos-l.drag_x,l.y+=a.ypos-l.drag_y,l.drag_x=a.xpos,l.drag_y=a.ypos);var p=l.x+F.GBorder+Math.max(0,F.sidelab),y=l.w-2*F.GBorder-
Math.abs(F.sidelab),r=1.5*a.text_h,t=l.y+F.GBorder+F.toplab*(r+F.GBorder);for(n=0;n<l.items.length;n++){var E=t+r*n,q=l.items[n];q.selected=!1;d.inrect(a.xpos,a.ypos,p,E,y,r)&&(q.selected=!0)}g(a,l)}else if("mouseup"===n.type)1===n.which?l.drag_x!==c&&l.drag_y!==c?(l.drag_x=c,l.drag_y=c):h(a,l):3===n.which&&k(a,l);else if("mousedown"===n.type)n.preventDefault(),1===n.which&&a.xpos>l.x&&a.xpos<l.x+l.w&&a.ypos>l.y&&a.ypos<l.y+1.5*a.text_h&&(l.drag_x=a.xpos,l.drag_y=a.ypos);else if("keydown"===n.type&&
a.menu)if(l=a.menu,n.preventDefault(),n=getKeyCode(n),13===n)h(a,l);else if(38===n){for(n=0;n<l.items.length;n++)if(q=l.items[n],q.selected){q.selected=!1;l.items[n-1]!==c&&(l.items[n-1].selected=!0);break}else n===l.items.length-1&&(q.selected=!0);g(a,l)}else if(40===n){for(n=0;n<l.items.length;n++)if(q=l.items[n],q.selected){q.selected=!1;l.items[n+1]!==c&&(l.items[n+1].selected=!0);break}else n===l.items.length-1&&(l.items[0].selected=!0);g(a,l)}else if(48<=n&&57>=n||65<=n&&90>=n){n=String.fromCharCode(n).toUpperCase();
l.keypresses=l.keypresses===c?n:l.keypresses+n;for(n=p=0;n<l.items.length;n++)q=l.items[n],q.selected=!1,q.text&&0===q.text.toUpperCase().indexOf(l.keypresses)&&(0===p&&(q.selected=!0),p++);0===p?(l.keypresses=c,g(a,l)):1===p?h(a,l):g(a,l)}}}}g(a,f)}};d.widgetbox=function(a,c,f,g,h,n,l,k,p,w){d.shadowbox(a,c,f,g,h,1,2,"",0.75);w&&(h=w.length,h=Math.min(h,g/a.text_w),h=Math.max(h,1),c+=(g-h*a.text_w)/2,f+=3,d.text(a,c,f+(l-f+0.7*a.text_h)/2,w,a.xwfg));0<k&&0<p&&(f=a.active_canvas.getContext("2d"),
d.LEGACY_RENDER?(f.fillStyle=a.bg,f.fillRect(n,l,k,p)):(f.save(),f.globalAlpha=0.1,f.fillStyle=a.bg,f.fillRect(n,l,k,p),f.restore()))};d.text=function(a,d,f,g,h){var n=a.active_canvas.getContext("2d");d=Math.max(0,d);f=Math.max(0,f);if(0>d||0>f)throw"On No!";n.textBaseline="bottom";n.textAlign="left";n.font=a.font.font;n.fillStyle=h===c?a.fg:h;n.fillText(g,d,f)};d.getcolor=function(a,c,d){for(a=0;6>a&&0===c[a+1].pos;a++);for(;d>c[a].pos&&6>a;)a++;if(0===a||d>=c[a].pos)return u(A(c[a].red),A(c[a].green),
A(c[a].blue));d=A((d-c[a-1].pos)/(c[a].pos-c[a-1].pos)*100);var f=255-d;return u(c[a].red/100*d+c[a-1].red/100*f,c[a].green/100*d+c[a-1].green/100*f,c[a].blue/100*d+c[a-1].blue/100*f)};d.redraw_warpbox=function(a){a.warpbox&&(a._animationFrameHandle&&cancelAnimFrame(a._animationFrameHandle),a._animationFrameHandle=requestAnimFrame(function(){J(a)}))};d.format_g=function(a,c,f,g){Math.min(c,f+7);c=Math.abs(a).toString();var h=c.indexOf(".");-1===h&&(c+=".",h=c.length);g=0;var n=c.indexOf("e");-1!==
n&&(g=parseInt(c.slice(n+1,c.length),10),c=c.slice(0,n));for(var n=Math.min(f-(c.length-h)+1,f),l=0;l<n;l++)c+="0";if(0!==a)if(1>Math.abs(a))if("0."===c.slice(0,2))for(l=2;l<c.length;l++)if("0"===c[l])g-=1;else{c="0."+c.slice(l,l+f);break}else c=c.slice(0,f+2);else h>f?(g=Math.max(0,h-1),c=c[0]+"."+c.slice(1,f+1)):c=c.slice(0,f+2);0===g?c+="    ":(f=d.pad(Math.abs(g).toString(),2,"0"),c=0>g?c+"E-"+f:c+"E+"+f);return 0>a?"-"+c:" "+c};d.format_f=function(a,c,f){f=Math.max(Math.min(f,20),0);a=a.toFixed(f).toString();
return a=d.pad(a,c+f," ")};d.pad=function(a,c,d){for(;a.length<c;)a=d+a;return a};d.legacy_shadowbox=function(e,c,f,g,h,n,l,k){for(var p=k.length,u=0,v=0,u=0,v=[],r=0;11>r;r++)v[r]={x:0,y:0};r=!(1===l||-1===l);0!==l&&0<d.GBorder&&(u=a.trunc(Math.min(g,h)/3),u=Math.max(1,Math.min(u,d.GBorder)));if(0<u){v[0].x=v[1].x=c;v[8].x=v[9].x=c+g;v[1].y=v[8].y=f;v[0].y=v[9].y=f+h;switch(n){case d.L_ArrowLeft:v[0].y=v[1].y=f+a.trunc(h/2);c+=2;--g;break;case d.L_ArrowRight:v[8].y=v[9].y=f+a.trunc(h/2);--c;--g;
break;case d.L_ArrowUp:v[1].x=v[8].x=c+a.trunc(g/2);f+=2;--h;break;case d.L_ArrowDown:v[0].x=v[9].x=c+a.trunc(g/2),--f,--h}v[2]=v[8];v[10]=v[0];c+=u;f+=u;g-=2*u;h-=2*u}v[4].x=v[5].x=c;v[3].x=v[6].x=c+g;v[3].y=v[4].y=f;v[5].y=v[6].y=f+h;switch(n){case d.L_ArrowLeft:v[4].y=v[5].y=f+a.trunc(h/2);break;case d.L_ArrowRight:v[3].y=v[6].y=f+a.trunc(h/2);break;case d.L_ArrowUp:v[3].x=v[4].x=c+a.trunc(g/2);break;case d.L_ArrowDown:v[5].x=v[6].x=c+a.trunc(g/2)}v[7]=v[3];n=e.active_canvas.getContext("2d");0<
u&&(n.fillStyle=0<l?e.xwts:e.xwbs,w(n,v.slice(0,7)),n.fillStyle=0>l?e.xwts:e.xwbs,w(n,v.slice(5,11)));r&&(n.fillStyle=e.xwbg,w(n,v.slice(3,8)));n.fillStyle=e.xwfg;n.textBaseline="alphabetic";r&&0<p&&(p=Math.min(p,a.trunc(g/e.text_w)),p=Math.max(p,1),u=c+a.trunc((g-p*e.text_w)/2),v=f+a.trunc((h+0.7*e.text_h)/2),n.fillText(k,u,v))};d.sigplot_shadowbox=function(e,c,f,g,h,n,l,k,p){var u=e.active_canvas.getContext("2d"),v=k.length,r=0>l?e.xwts:e.xwbs;p=p||1;for(var t=[],E=0;11>E;E++)t[E]={x:0,y:0};switch(n){case d.L_ArrowLeft:case d.L_ArrowRight:case d.L_ArrowUp:case d.L_ArrowDown:t=
d.chevron(n,c,f,g,h);u.fillStyle=0<l?e.xwts:e.xwbs;w(u,t.slice(0,6));break;default:d.draw_round_box(e,r,c,f,g,h,p,e.xwbg,5,e.xwbs)}u.fillStyle=e.xwfg;u.textBaseline="alphabetic";1!==l&&-1!==l&&0<v&&(v=Math.min(v,a.trunc(g/e.text_w)),v=Math.max(v,1),c+=a.trunc((g-v*e.text_w)/2),e=f+a.trunc((h+0.7*e.text_h)/2),u.fillText(k,c,e))};d.shadowbox=d.LEGACY_RENDER?d.legacy_shadowbox:d.sigplot_shadowbox;d.chevron=function(e,c,f,g,h,n){var l=Math.min(g,h);n||(n=0.25*l);for(var k=[],p=0;6>p;p++)k[p]={x:0,y:0};
var p=a.trunc((g-l)/2+l/4-n/2.828),u=a.trunc((h-l)/2+l/4-n/2.828);switch(e){case d.L_ArrowLeft:k[0].x=c+p;k[0].y=f+a.trunc(l/2);k[1].x=c+p+a.trunc(l/2);k[1].y=f;k[2].x=c+p+a.trunc(l/2+n/1.414);k[2].y=f+a.trunc(n/1.414);k[3].x=c+p+a.trunc(2*n/1.414);k[3].y=f+a.trunc(l/2);k[4].x=c+p+a.trunc(l/2+n/1.414);k[4].y=f+h-a.trunc(n/1.414);k[5].x=c+p+a.trunc(l/2);k[5].y=f+l;break;case d.L_ArrowRight:k[0].x=c+g-p;k[0].y=f+a.trunc(l/2);k[1].x=c+g-p-a.trunc(l/2);k[1].y=f;k[2].x=c+g-p-a.trunc(l/2+n/1.414);k[2].y=
f+a.trunc(n/1.414);k[3].x=c+g-p-a.trunc(2*n/1.414);k[3].y=f+a.trunc(l/2);k[4].x=c+g-p-a.trunc(l/2+n/1.414);k[4].y=f+h-a.trunc(n/1.414);k[5].x=c+g-p-a.trunc(l/2);k[5].y=f+l;break;case d.L_ArrowUp:k[0].x=c+a.trunc(l/2);k[0].y=f+u;k[1].x=c;k[1].y=f+u+a.trunc(l/2);k[2].x=c+a.trunc(n/1.414);k[2].y=f+u+a.trunc(l/2+n/1.414);k[3].x=c+a.trunc(l/2);k[3].y=f+u+a.trunc(2*n/1.414);k[4].x=c+g-a.trunc(n/1.414);k[4].y=f+u+a.trunc(l/2+n/1.414);k[5].x=c+l;k[5].y=f+u+a.trunc(l/2);break;case d.L_ArrowDown:k[0].x=c+a.trunc(l/
2),k[0].y=f+h-u,k[1].x=c,k[1].y=f+h-u-a.trunc(l/2),k[2].x=c+a.trunc(n/1.414),k[2].y=f+h-u-a.trunc(l/2+n/1.414),k[3].x=c+a.trunc(l/2),k[3].y=f+h-u-a.trunc(2*n/1.414),k[4].x=c+g-a.trunc(n/1.414),k[4].y=f+h-u-a.trunc(l/2+n/1.414),k[5].x=c+l,k[5].y=f+h-u-a.trunc(l/2)}return k};d.ifevent=function(e,d){e.button_press=0;e.button_release=0;e.state_mask=0;var f=d.target.getBoundingClientRect(),g=d.offsetX===c?d.pageX-f.left-window.scrollX:d.offsetX,f=d.offsetX===c?d.pageY-f.top-window.scrollY:d.offsetY;switch(d.type){case "mousedown":e.xpos=
a.bound(g,0,e.width);e.ypos=a.bound(f,0,e.height);switch(d.which){case 1:e.button_press=1;break;case 2:e.button_press=2;break;case 3:e.button_press=3;break;case 4:e.button_press=4;break;case 5:e.button_press=5}break;case "mouseup":switch(e.xpos=a.bound(g,0,e.width),e.ypos=a.bound(f,0,e.height),d.which){case 1:e.button_release=1;break;case 2:e.button_release=2;break;case 3:e.button_release=3;break;case 4:e.button_release=4;break;case 5:e.button_release=5}}};d.scroll_real2pix=function(a){if(0===a.range)return{s1:a.a1,
sw:a.a2-a.a1};var c,d;c=(a.a2-a.a1)/a.trange;d=a.a1+Math.floor(0.5+(a.smin-a.tmin)*c);c=d+Math.floor(0.5+a.srange*c);d=d>a.a2-a.swmin?a.a2-a.swmin:Math.max(d,a.a1);c=c<a.a1+a.swmin?a.a1+a.swmin:Math.min(c,a.a2);return{s1:d,sw:Math.max(c-d,a.swmin)}};d.redrawScrollbar=function(e,c,f){var g,h,n,l,k,p,u,v,r=c.active_canvas.getContext("2d");h=d.scroll_real2pix(e);u=h.s1;v=h.sw;p=u;h=e.x;n=e.y;l=e.w;k=e.h;e.origin&1?(g=n+k/2,e.origin&2&&(p=l-p-v),f===d.XW_DRAW&&(f=e.arrow,d.shadowbox(c,h,n,f,k-1,d.L_ArrowLeft,
2,"",0),d.shadowbox(c,h+l-f,n,f-1,k,d.L_ArrowRight,2,"",0)),d.LEGACY_RENDER?(d.draw_line(c,c.fg,h+e.a1,g,h+e.a2,g),d.shadowbox(c,h+p,n,v+1,k,1,2,"",0)):(f=r.createLinearGradient(h+e.a1,0,h+e.a2,0),f.addColorStop(0,c.xwbs),f.addColorStop(0.5,c.xwts),f.addColorStop(1,c.xwbs),d.draw_line(c,f,h+e.a1,g,h+e.a2,g,1),f=r.createLinearGradient(0,n,0,n+k),f.addColorStop(0.1,c.xwts),f.addColorStop(0.75,c.xwbs),d.draw_round_box(c,c.xwbg,h+p,n,v+1,k,1,f,8,c.xwbs))):(g=h+a.trunc(l/2),2>=e.origin&&(p=k-p-v),f===
d.XW_DRAW&&(f=e.arrow,d.shadowbox(c,h,n,l-1,f,d.L_ArrowUp,2,"",0),d.shadowbox(c,h,n+k-f,l-1,f,d.L_ArrowDown,2,"",0)),d.LEGACY_RENDER?(d.draw_line(c,c.fg,g,n+e.a1,g,n+e.a2),d.shadowbox(c,h,n+p,l,v+1,1,2,"",0)):(f=r.createLinearGradient(0,n+e.a1,0,n+e.a2),f.addColorStop(0,c.xwbs),f.addColorStop(0.5,c.xwts),f.addColorStop(1,c.xwbs),d.draw_line(c,f,g,n+e.a1,g,n+e.a2,1),f=r.createLinearGradient(h,0,h+l,0),f.addColorStop(0.1,c.xwts),f.addColorStop(0.75,c.xwbs),d.draw_round_box(c,c.xwbg,h-1,n+p,l,v+1,1,
f,8,c.xwbs)));e.s1=u;e.sw=v};d.real_to_pixel=function(a,c,f,g){a=d.origin(a.origin,4,a.stk[a.level]);if(0===a.xscl||0===a.yscl)return{x:0,y:0};var h=a.x1,n=a.y1,l=a.xmin,k=1/a.xscl,p=a.ymin,u=1/a.yscl,v=!1,r=!1;null!==c&&(v=c>a.xmax||c<a.xmin,g&&(c=Math.min(c,a.xmax),c=Math.max(c,a.xmin)),c=Math.round((c-l)*k)+h);null!==f&&(r=f>a.ymin||f<a.ymax,g&&(f=Math.min(f,a.ymin),f=Math.max(f,a.ymax)),f=Math.round((f-p)*u)+n);c=Math.round(c);f=Math.round(f);return{x:c,y:f,clipped_x:v,clipped_y:r,clipped:v||
r}};d.pixel_to_real=function(a,c,d){c=Math.min(a.r,Math.max(a.l,c));d=Math.min(a.b,Math.max(a.t,d));var f=a.level;return{x:2!==a.origin&&3!==a.origin?a.stk[f].xmin+(c-a.stk[f].x1)*a.stk[f].xscl:a.stk[f].xmin+(a.stk[f].x2-c)*a.stk[f].xscl,y:2<a.origin?a.stk[f].ymin+(d-a.stk[f].y1)*a.stk[f].yscl:a.stk[f].ymin+(a.stk[f].y2-d)*a.stk[f].yscl}};d.colormap=function(a,c,d){a.pixel=Array(d);for(var f=Array(d),g=100/(Math.max(2,d)-1),n=0;n<d;n++)f[n]=g*n+0.5;for(g=0;6>g&&0===c[g+1].pos;g++);for(n=0;n<d;n++){a.pixel[n]=
0;for(var h=f[n];6>g&&Math.floor(h)>c[g].pos;)g++;if(0===g||h>=c[g].pos)a.pixel[n]={red:A(c[g].red),green:A(c[g].green),blue:A(c[g].blue)};else{var h=A((h-c[g-1].pos)/(c[g].pos-c[g-1].pos)*100),l=255-h;a.pixel[n]={red:c[g].red/100*h+c[g-1].red/100*l,green:c[g].green/100*h+c[g-1].green/100*l,blue:c[g].blue/100*h+c[g-1].blue/100*l}}}};d.colorbar=function(a,c,f,g,h){for(var n=1;n<h;n++)d.draw_line(a,Math.floor(a.pixel.length*(n-1)/h),c,f+h-n,c+g,f+h-n);d.draw_box(a,a.fg,c+0.5,f,g,h)};var V="undefined"===
typeof Uint8ClampedArray?Q:S;d.shift_image_rows=function(a,c,d){a=new Uint32Array(c);0<d?(d*=c.width,a.set(a.subarray(0,a.length-d),d)):0>d&&(d=Math.abs(d)*c.width,a.set(a.subarray(d)));return c};d.update_image_row=function(a,c,d,f,g,h,l){f=new Uint32Array(c,f*c.width*4,c.width);var k=1;h!==g&&(k=a.pixel.length/Math.abs(h-g));h=Math.max(1,d.length/c.width);for(var p=0;p<c.width;p++){var u=Math.floor(p*h),v=d[u];if(1<h)if(1===l){for(var r=1;r<h;r++)v+=d[u+r];v/=h}else if(2===l)for(r=1;r<h;r++)v=Math.min(v,
d[u+r]);else if(3===l)for(r=1;r<h;r++)v=Math.max(v,d[u+r]);else if(4===l)v=d[p];else if(5===l)for(r=1;r<h;r++)v=Math.max(Math.abs(v),Math.abs(d[u+r]));u=Math.floor((v-g)*k);u=Math.max(0,Math.min(a.pixel.length-1,u));(u=a.pixel[u])&&(f[p]=-16777216|u.blue<<16|u.green<<8|u.red)}return f};d.create_image=function(c,f,g,h,l,n,k,p){c.active_canvas.getContext("2d");c.pixel&&0!==c.pixel.length||(a.log.warn("COLORMAP not initialized, defaulting to foreground"),d.colormap(c,a.Mc.colormap[1].colors,16));var u=
1;k!==n&&(u=c.pixel.length/Math.abs(k-n));h=Math.ceil(h);l=Math.ceil(l);k=new ArrayBuffer(h*l*4);k.width=h;k.height=l;var w=Math.max(1,g/h),v=new Uint32Array(k);if(f)for(var r=0;r<v.length;r++){var t=(3===c.origin||4===c.origin?Math.floor(r/h):l-Math.floor(r/h)-1)*g+Math.floor((1===c.origin||4===c.origin?Math.floor(r%h):h-Math.floor(r%h)-1)*w),E=f[t];if(1<w)if(1===p){for(var q=1;q<w;q++)E+=f[t+q];E/=w}else if(2===p)for(q=1;q<w;q++)E=Math.min(E,f[t+q]);else if(3===p)for(q=1;q<w;q++)E=Math.max(E,f[t+
q]);else if(4===p)E=f[t];else if(5===p)for(q=1;q<w;q++)E=Math.max(Math.abs(E),Math.abs(f[t+q]));t=Math.floor((E-n)*u);t=Math.max(0,Math.min(c.pixel.length-1,t));(t=c.pixel[t])&&(v[r]=-16777216|t.blue<<16|t.green<<8|t.red)}return k};d.put_image=function(c,f,g,h,l,n,k,p,u,w,v){u=c.active_canvas.getContext("2d");c.pixel&&0!==c.pixel.length||(a.log.warn("COLORMAP not initialized, defaulting to foreground"),d.colormap(c,a.Mc.colormap[1].colors,16));g=Math.floor(0<l?g*l:-l);h=Math.floor(h*n);n=new ArrayBuffer(g*
h*4);n.width=g;n.height=h;l=new Uint32Array(n);for(var r=0;r<l.length;r++){var t=Math.max(0,f[r]),t=Math.min(c.pixel.length-1,t);(t=c.pixel[t])&&(l[r]=-16777216|t.blue<<16|t.green<<8|t.red)}V(c,u,n,w,v,k,p,g,h);return n};d.draw_image=function(a,c,f,g,h,l,k,p){var u=Math.max(f,a.stk[a.level].xmin),w=Math.min(h,a.stk[a.level].xmax),v=Math.max(g,a.stk[a.level].ymin),r=Math.min(l,a.stk[a.level].ymax);if(!(1>=c.width||0===Math.abs(h-f)||1>=c.height||0===Math.abs(l-g))){h=c.width/(h-f);var t=c.height/(l-
g),u=Math.floor(u*h)/h,w=Math.ceil(w*h)/h,v=Math.floor(v*t)/t,r=Math.ceil(r*t)/t,E,q,N,P,I,L;1===a.origin?(N=Math.max(0,Math.floor((l-r)*t)),L=Math.min(c.height-N,Math.floor((r-v)*t)),P=Math.max(0,Math.floor((u-f)*h)),I=Math.min(c.width-P,Math.floor((w-u)*h)),E=d.real_to_pixel(a,u,r),q=d.real_to_pixel(a,w,v)):2===a.origin?(N=Math.max(0,Math.floor((l-r)*t)),L=Math.min(c.height-N,Math.floor((r-v)*t)),P=Math.max(0,Math.ceil((u-f)*h)),I=Math.min(c.width-P,Math.floor((w-u)*h)),E=d.real_to_pixel(a,w,r),
q=d.real_to_pixel(a,u,v)):3===a.origin?(N=Math.max(0,Math.ceil((v-g)*t)),L=Math.min(c.height-N,Math.floor((r-v)*t)),P=Math.max(0,Math.ceil((u-f)*h)),I=Math.min(c.width-P,Math.floor((w-u)*h)),E=d.real_to_pixel(a,w,v),q=d.real_to_pixel(a,u,r)):4===a.origin&&(N=Math.max(0,Math.ceil((v-g)*t)),L=Math.min(c.height-N,Math.floor((r-v)*t)),P=Math.max(0,Math.floor((u-f)*h)),I=Math.min(c.width-P,Math.floor((w-u)*h)),E=d.real_to_pixel(a,u,v),q=d.real_to_pixel(a,w,r));f=q.x-E.x;q=q.y-E.y;I=Math.max(1,I);L=Math.max(1,
L);"number"===typeof p&&(p=(a.r-a.l)/I<=p);g=a.active_canvas.getContext("2d");g.save();g.beginPath();g.rect(a.l,a.t,a.r-a.l,a.b-a.t);g.clip();V(a,g,c,k,p,E.x,E.y,f,q,P,N,I,L);g.restore()}}})(window.mx,window.m);
(function(d,a,c,x){d.Layer1D=function(a){this.plot=a;this.ybuf=this.xbuf=x;this.xmax=this.xmin=this.imin=this.xdelta=this.xstart=this.offset=0;this.name="";this.cx=!1;this.hcb=x;this.size=0;this.display=!0;this.color=0;this.line=3;this.thick=1;this.symbol=0;this.radius=3;this.ysub=this.xsub=this.skip=0;this.modified=this.xdata=!1;this.preferred_origin=this.opacity=1;this.pointbufsize=0;this.ypoint=this.xpoint=this.yptr=this.xptr=null;this.options={}};d.Layer1D.prototype={init:function(a,g){this.hcb=
a;this.hcb.buf_type="D";this.ybufn=this.xbufn=this.size=this.offset=0;this.hcb.pipe?2===a["class"]&&(c.force1000(a),this.size=a.subsize):2===a["class"]?(c.force1000(a),this.size=a.subsize):this.size=a.size;g.framesize&&(this.size=g.framesize);if(!this.size)throw"1D layer could not determine appropriate size";2>=a["class"]&&(this.xsub=-1,this.ysub=1,this.cx="C"===a.format[0]);this.skip=1;this.cx&&(this.skip=2);this.xstart=a.xstart;this.xdelta=a.xdelta;var h=a.xstart+a.xdelta*(this.size-1);this.xmin=
Math.min(a.xstart,h);this.xmax=Math.max(a.xstart,h);this.xlab=a.xunits;this.ylab=a.yunits;if(this.hcb.pipe){this.drawmode="scrolling";this.position=0;this.tle=g.tl;this.ybufn=this.size*Math.max(this.skip*d.PointArray.BYTES_PER_ELEMENT,d.PointArray.BYTES_PER_ELEMENT);this.ybuf=new ArrayBuffer(this.ybufn);var k=this;c.addPipeWriteListener(this.hcb,function(){k._onpipewrite()})}},_onpipewrite:function(){var a=new d.PointArray(this.ybuf),g=this.tle;if(g===x)g=Math.floor(c.pavail(this.hcb))/this.hcb.spa;
else if(c.pavail(this.hcb)<g*this.hcb.spa)return;var h=g*this.hcb.spa;if("lefttoright"===this.drawmode)this.position=0,a.set(a.subarray(0,this.size-h),h);else if("righttoleft"===this.drawmode)this.position=this.size-g,a.set(a.subarray(h),0);else if("scrolling"!==this.drawmode)throw"Invalid draw mode";g=Math.min(g,this.size-this.position);0!==c.grabx(this.hcb,a,g*this.hcb.spa,this.position*this.hcb.spa)&&(this.position=(this.position+g)%this.size,0!==this.plot._Gx.autol&&this.plot.rescale())},get_data:function(a,
g){var h=this.plot._Gx,k=this.hcb,l=this.skip,p;p=2===k["class"]?k.subsize:k.size;var w=0,l=0;h.index?(w=Math.floor(a),l=Math.floor(g+0.5)):0<=k.xdelta?(w=Math.floor((a-k.xstart)/k.xdelta)-1,l=Math.floor((g-k.xstart)/k.xdelta+0.5)):(w=Math.floor((g-k.xstart)/k.xdelta)-1,l=Math.floor((a-k.xstart)/k.xdelta+0.5));w=Math.max(0,w);l=Math.min(p,l);h=Math.max(0,Math.min(l-w+1,h.bufmax));0>k.xdelta&&(w=l-h+1);if(!(w>=this.imin&&w+h<=this.imin+this.size&&this.ybuf!==x||this.modified)&&2>=k["class"]){p=this.offset+
w;l=this.skip;this.ybufn=h*Math.max(l*d.PointArray.BYTES_PER_ELEMENT,d.PointArray.BYTES_PER_ELEMENT);if(this.ybuf===x||this.ybuf.byteLength<this.ybufn)this.ybuf=new ArrayBuffer(this.ybufn);l=new d.PointArray(this.ybuf);h=c.grab(k,l,p,h);this.imin=w;this.xstart=k.xstart+w*this.xdelta;this.size=h}},change_settings:function(a){if(a.index!==x)if(a.index)this.xmin=this.xdelta=this.xstart=1,this.xmax=this.size;else{this.xstart=this.hcb.xstart+this.imin*this.xdelta;this.xdelta=this.hcb.xdelta;var c=this.hcb.xstart+
this.hcb.xdelta*(this.size-1);this.xmin=Math.min(this.hcb.xstart,c);this.xmax=Math.max(this.hcb.xstart,c)}a.drawmode!==x&&(this.drawmode=a.drawmode,this.position=0,this.ybufn=this.size*Math.max(this.skip*d.PointArray.BYTES_PER_ELEMENT,d.PointArray.BYTES_PER_ELEMENT),this.ybuf=new ArrayBuffer(this.ybufn))},reload:function(a,d){if(this.hcb.pipe)throw"reload cannot be used with pipe, use push instead";var h=this.hcb.dview.length!==a.length||d;if(d)for(var k in d)if(this.hcb[k]=d[k],"xstart"===k||"xdelta"===
k)h=!0;this.hcb.setData(a);this.imin=0;this.xstart=x;this.size=0;k=this.xmin;var l=this.xmax;h&&(2===this.hcb["class"]&&c.force1000(this.hcb),h=this.hcb.xstart+this.hcb.xdelta*(this.hcb.size-1),this.xmin=Math.min(this.hcb.xstart,h),this.xmax=Math.max(this.hcb.xstart,h),this.xdelta=this.hcb.xdelta,this.xstart=this.hcb.xstart,l=k=x);return{xmin:k,xmax:l}},push:function(a,g,h){if(g){for(var k in g)this.hcb[k]=g[k],"type"===k&&(this.hcb["class"]=g[k]/1E3);g.subsize&&2===this.hcb["class"]&&(c.force1000(this.hcb),
this.size=this.hcb.subsize,this.position=null,this.ybufn=this.size*Math.max(this.skip*d.PointArray.BYTES_PER_ELEMENT,d.PointArray.BYTES_PER_ELEMENT),this.ybuf=new ArrayBuffer(this.ybufn));k=this.hcb.xstart+this.hcb.xdelta*(this.hcb.size-1);this.xmin=this.hcb.xmin||Math.min(this.hcb.xstart,k);this.xmax=this.hcb.xmax||Math.max(this.hcb.xstart,k);this.xdelta=this.hcb.xdelta;this.xstart=this.hcb.xstart}0<a.length&&c.filad(this.hcb,a,h);return g?!0:!1},prep:function(a,g){var h=this.plot._Gx,k=this.plot._Mx,
l=Math.ceil(this.size),p=this.skip;if(0===l)return{num:0,start:0,end:0};l*d.PointArray.BYTES_PER_ELEMENT>this.pointbufsize&&(this.pointbufsize=l*d.PointArray.BYTES_PER_ELEMENT,this.xptr=new ArrayBuffer(this.pointbufsize),this.yptr=new ArrayBuffer(this.pointbufsize),this.xpoint=new d.PointArray(this.xptr),this.ypoint=new d.PointArray(this.yptr));var w=new d.PointArray(this.ybuf),x=this.xmin,A=this.xmax,u,z,J;if(5===h.cmode||0<this.xsub)0>=l?(x=h.panxmin,A=h.panxmax):5!==h.cmode?this.xpoint=new d.PointArray(this.xbuf):
this.cx?c.vmov(w,p,this.xpoint,1,l):0!==this.line?(J=c.vmxmn(w,l),this.xpoint[0]=J.smax,this.xpoint[1]=J.smin,u=0,l=z=2):this.xpoint=w,0<l&&(J=c.vmxmn(this.xpoint,l),A=J.smax,x=J.smin,u=0,z=l);else if(0<l){J=this.xstart;var Q=this.xdelta;z=l;h.index?(u=0,z=l-1):0<=Q?(u=Math.max(1,Math.min(z,Math.round((a-J)/Q)))-1,z=Math.max(1,Math.min(z,Math.round((g-J)/Q)+2))-1):(u=Math.max(1,Math.min(z,Math.round((g-J)/Q)-1))-1,z=Math.max(1,Math.min(z,Math.round((a-J)/Q)+2))-1);l=z-u+1;0>l&&(c.log.debug("Nothing to plot"),
l=0);w=(new d.PointArray(this.ybuf)).subarray(u*p);J+=Q*u;for(var S=0;S<l;S++)this.xpoint[S]=h.index?this.imin+S+1:J+S*Q}h.panxmin>h.panxmax?(h.panxmin=x,h.panxmax=A):(h.panxmin=Math.min(h.panxmin,x),h.panxmax=Math.max(h.panxmax,A));if(0>=l)return c.log.debug("Nothing to plot"),{num:l,start:u,end:z};if(this.cx)1===h.cmode?c.cvmag(w,this.ypoint,l):2===h.cmode?25===h.plab?(c.cvpha(w,this.ypoint,l),c.vsmul(this.ypoint,1/(2*Math.PI),this.ypoint,l)):24!==h.plab?c.cvpha(w,this.ypoint,l):c.cvphad(w,this.ypoint,
l):3===h.cmode?c.vmov(w,p,this.ypoint,1,l):6<=h.cmode?c.cvmag2(w,this.ypoint,l):4<=h.cmode&&c.vmov(w.subarray(1),p,this.ypoint,1,l);else if(5===h.cmode)c.vfill(this.ypoint,0,l);else if(1===h.cmode||6<=h.cmode)for(S=0;S<l;S++)this.ypoint[S]=Math.abs(w[S]);else for(S=0;S<l;S++)this.ypoint[S]=w[S];6<=h.cmode&&(c.vlog10(this.ypoint,h.dbmin,this.ypoint),x=10,7===h.cmode&&(x=20),0<h.lyr.length&&h.lyr[0].cx&&(x/=2),c.vsmul(this.ypoint,x,this.ypoint));J=c.vmxmn(this.ypoint,l);A=J.smax;x=J.smin;p=A-x;0>p&&
(A=x,x=A+p,p=-p);1E-20>=p?(x-=1,A+=1):(x-=0.02*p,A+=0.02*p);0===k.level&&(h.panymin>h.panymax?(h.panymin=x,h.panymax=A):(h.panymin=Math.min(h.panymin,x),h.panymax=Math.max(h.panymax,A)),1<h.autol&&(x=1/Math.max(h.autol,1),h.panymin=h.panymin*x+k.stk[0].ymin*(1-x),h.panymax=h.panymax*x+k.stk[0].ymax*(1-x)));return{num:l,start:u,end:z}},draw:function(){var c=this.plot._Mx,g=this.plot._Gx,h=this.color,k=this.symbol,l=this.radius,p=0,w={};w.fillStyle=g.fillStyle;this.options&&(w.highlight=this.options.highlight,
w.noclip=this.options.noclip);0===this.line?p=0:(p=1,0<this.thick?p=this.thick:0>this.thick&&(p=Math.abs(this.thick),w.dashed=!0),1===this.line&&(w.vertsym=!0),2===this.line&&(w.horzsym=!0));var x=g.segment&&5!==g.cmode&&0<this.xsub&&!0,A=this.xdelta,u,z;this.xdata?(u=this.xmin,z=this.xmax):(u=Math.max(this.xmin,c.stk[c.level].xmin),z=Math.min(this.xmax,c.stk[c.level].xmax),u>=z&&(g.panxmin=Math.min(g.panxmin,this.xmin),g.panxmax=Math.max(g.panxmax,this.xmax)));if(!g.all){var J=(g.bufmax-1)*A;-0<=
J?z=Math.min(z,u+J):u=Math.max(u,z+J)}if(0!==p||0!==k){for(;u<z;)this.hcb.pipe||this.get_data(u,z),J=this.prep(u,z),0<J.num&&!x&&a.trace(c,h,new d.PointArray(this.xptr),new d.PointArray(this.yptr),J.num,J.start,1,p,k,l,w),g.all?0===this.size?u=z:g.index?u+=J.num:0<=A?u+=this.size*A:z+=this.size*A:u=z;this.position&&"scrolling"===this.drawmode&&(g=a.real_to_pixel(c,this.position*this.xdelta,0),g.x>c.l&&g.x<c.r&&a.draw_line(c,"white",g.x,c.t,g.x,c.b))}},add_highlight:function(a){this.options.highlight||
(this.options.highlight=[]);a instanceof Array?this.options.highlight.push.apply(this.options.highlight,a):this.options.highlight.push(a);this.plot.refresh()},remove_highlight:function(a){if(this.options.highlight){for(var c=this.options.highlight.length;c--;)a!==this.options.highlight[c]&&a!==this.options.highlight[c].id||this.options.highlight.splice(c,1);this.plot.refresh()}},get_highlights:function(){return this.options.highlight?this.options.highlight.slice(0):[]},clear_highlights:function(){this.options.highlight&&
(this.options.highlight=x,this.plot.refresh())}};var p=[0,53,27,80,13,40,67,93,7,60,33,87,20,47,73,100];d.Layer1D.overlay=function(f,g,h){var k=f._Gx,l=f._Mx;2===g["class"]&&c.force1000(g);g.buf_type="D";var D=1;2===g["class"]&&0<g.size&&(D=Math.min(g.size/g.subsize,16-k.lyr.length));var w=h.name;delete h.name;for(var C=0;C<D;C++){var A=new d.Layer1D(f);A.init(g,h);A.color=a.getcolor(l,c.Mc.colormap[3].colors,p[k.lyr.length%p.length]);2===g["class"]?(w!==x&&(Array.isArray(w)?A.name=w[C]:(A.name=w,
A.name=A.name+"."+a.pad((C+1).toString(),3,"0"))),A.name||(A.name=g.file_name?c.trim_name(g.file_name):"layer_"+k.lyr.length,A.name=A.name+"."+a.pad((C+1).toString(),3,"0")),A.offset=C*g.subsize):(A.name=w!==x?w:g.file_name?c.trim_name(g.file_name):"layer_"+k.lyr.length,A.offset=0);for(var u in h)A[u]!==x&&(A[u]=h[u]);f.add_layer(A)}}})(window.sigplot=window.sigplot||{},mx,m);
(function(d,a,c,x){d.Layer2D=function(a){this.plot=a;this.xmax=this.xmin=this.imin=this.ydelta=this.ystart=this.xdelta=this.xstart=this.offset=0;this.name="";this.cx=!1;this.hcb=x;this.display=!0;this.color=0;this.line=3;this.thick=1;this.symbol=0;this.radius=3;this.ysub=this.xsub=this.skip=0;this.modified=this.xdata=!1;this.preferred_origin=4;this.opacity=1;this.lpb=x;this.yc=1;this.options={}};d.Layer2D.prototype={init:function(a){var d=this.plot._Gx,g=this.plot._Mx;this.hcb=a;this.hcb.buf_type=
"D";if(this.hcb.pipe){var h=this;this.frame=this.position=0;this.lps=this.hcb.lps||Math.ceil(Math.max(1,g.b-g.t));c.addPipeWriteListener(this.hcb,function(){h._onpipewrite()})}else this.lps=this.hcb.lps||Math.ceil(a.size);this.ybufn=this.xbufn=this.offset=0;this.drawmode="scrolling";2>=a["class"]&&(this.xsub=-1,this.ysub=1,this.cx="C"===a.format[0]);this.skip=1;this.cx&&(this.skip=2);d.index?(this.xmin=this.xdelta=this.xstart=1,this.xmax=a.subsize,this.ymin=this.ydelta=this.ystart=1,this.ymax=this.size):
(this.xstart=a.xstart,this.xdelta=a.xdelta,d=a.xstart+a.xdelta*(a.subsize-1),this.xmin=this.hcb.xmin||Math.min(a.xstart,d),this.xmax=this.hcb.xmax||Math.max(a.xstart,d),this.ystart=a.ystart,this.ydelta=a.ydelta,d=a.ystart+a.ydelta*(this.lps-1),this.ymin=this.hcb.ymin||Math.min(a.ystart,d),this.ymax=this.hcb.ymax||Math.max(a.ystart,d));this.xframe=this.hcb.subsize;this.yframe=this.lps*this.hcb.subsize/this.xframe;0===this.lpb&&(this.lpb=this.yframe);if(!this.lpb||0>=this.lpb)this.lpb=16;this.lpb=Math.max(1,
this.lpb/this.yc)*this.yc;this.xlab=a.xunits;this.ylab=a.yunits},_onpipewrite:function(){var p=this.plot._Gx,f=this.plot._Mx;if(!(c.pavail(this.hcb)<this.hcb.subsize*this.hcb.spa)){"scrolling"!==this.drawmode&&(this.hcb.ystart+=this.hcb.ydelta,this.ystart=this.hcb.ystart,this.ymin=this.hcb.ystart-this.hcb.ydelta*this.lps,this.ymax=this.hcb.ystart);if("falling"===this.drawmode)this.position=0,this.img&&a.shift_image_rows(f,this.img,1);else if("rising"===this.drawmode)this.position=this.lps-1,this.img&&
a.shift_image_rows(f,this.img,-1);else if("scrolling"===this.drawmode)this.position>=this.lps&&(this.position=0);else throw"Invalid draw mode";if(0===c.grabx(this.hcb,this.buf,this.hcb.subsize*this.hcb.spa))c.log.error("Internal error");else{var g=new d.PointArray(this.hcb.subsize);this.cx?1===p.cmode?c.cvmag(this.buf,g,g.length):2===p.cmode?25===p.plab?(c.cvpha(this.buf,g,g.length),c.vsmul(g,1/(2*Math.PI),g,g.length)):24!==p.plab?c.cvpha(this.buf,g,g.length):c.cvphad(this.buf,g,g.length):3===p.cmode?
c.vmov(this.buf,this.skip,g,1,g.length):4===p.cmode?c.vmov(this.buf.subarray(1),this.skip,g,1,g.length):5===p.cmode?c.vfill(g,0,g.length):6===p.cmode?c.cvmag2logscale(this.buf,p.dbmin,10,g):7===p.cmode&&c.cvmag2logscale(this.buf,p.dbmin,20,g):1===p.cmode?c.vabs(this.buf,g):2===p.cmode?c.vfill(g,0,g.length):3===p.cmode?c.vmov(this.buf,this.skip,g,1,g.length):4===p.cmode?c.vfill(g,0,g.length):5===p.cmode?c.vfill(g,0,g.length):6===p.cmode?c.vlogscale(this.buf,p.dbmin,10,g):7===p.cmode&&c.vlogscale(this.buf,
p.dbmin,20,g);for(var h=g[0],k=g[0],l=0;l<g.length;l++)g[l]<h&&(h=g[l]),g[l]>k&&(k=g[l]);var x,w;1===p.autol?(x=h,w=k):1<p.autol?(l=1/Math.max(p.autol,1),x=p.zmin*l+h*(1-l),w=p.zmax*l+k*(1-l)):0>p.autol&&(l=1/Math.max(5,1),x=p.zmin*l+h*(1-l),w=p.zmax*l+k*(1-l));0!==(p.autoz&1)&&(p.zmin=x);0!==(p.autoz&2)&&(p.zmax=w);this.img&&a.update_image_row(f,this.img,g,this.position,p.zmin,p.zmax,p.xcompression);this.frame+=1;"scrolling"===this.drawmode&&(this.position=(this.position+1)%this.lps);0===f.level&&
(p.panymin=this.ymin,p.panymax=this.ymax,f.stk[0].ymin=this.ymin,f.stk[0].ymax=this.ymax)}}},get_data:function(){var a=this.hcb;this.buf||(this.hcb.pipe?(this.buf=this.hcb.createArray(null,0,this.hcb.subsize*this.hcb.spa),this.zbuf=new d.PointArray(this.hcb.subsize)):(this.buf=this.hcb.createArray(null,0,this.lps*this.hcb.subsize*this.hcb.spa),this.zbuf=new d.PointArray(this.lps*this.hcb.subsize)));this.hcb.pipe||c.grab(a,this.buf,0,a.subsize)},get_z:function(a,c){return this.zbuf[Math.floor(c/this.hcb.ydelta)*
this.hcb.subsize+Math.floor(a/this.hcb.xdelta)]},change_settings:function(a){var c=this.plot._Gx;a.cmode!==x&&(this.img=x,0!==(c.autoz&1)&&(c.zmin=x),0!==(c.autoz&2)&&(c.zmax=x));if(a.zmin!==x||a.zmax!==x||a.autoz!==x)this.img=x;a.cmap!==x&&(this.img=x);a.drawmode!==x&&(this.drawmode=a.drawmode,this.frame=this.position=0,this.hcb.pipe?(this.buf=this.hcb.createArray(null,0,this.hcb.subsize*this.hcb.spa),this.zbuf=new d.PointArray(this.hcb.subsize)):(this.buf=this.hcb.createArray(null,0,this.lps*this.hcb.subsize*
this.hcb.spa),this.zbuf=new d.PointArray(this.lps*this.hcb.subsize)),this.img=x,this.preferred_origin="falling"===this.drawmode?this.plot._Mx.origin=1:this.plot._Mx.origin=4)},push:function(a,f,g){var h=!1,k=null;if(f){f.timestamp&&(k=f.timestamp,delete f.timestamp);f.subsize&&f.subsize!==this.hcb.subsize&&(this.hcb.subsize=f.subsize,this.hcb.pipe?(this.buf=this.hcb.createArray(null,0,this.hcb.subsize*this.hcb.spa),this.zbuf=new d.PointArray(this.hcb.subsize)):(this.buf=this.hcb.createArray(null,
0,this.lps*this.hcb.subsize*this.hcb.spa),this.zbuf=new d.PointArray(this.lps*this.hcb.subsize)),h=!0);for(var l in f)this.hcb[l]!==f[l]&&(this.hcb[l]=f[l],"type"===l&&(this.hcb["class"]=f[l]/1E3),h=!0);f.lps&&(this.lps=f.lps);h&&(f=this.hcb.xstart+this.hcb.xdelta*(this.hcb.subsize-1),this.xmin=Math.min(this.hcb.xstart,f),this.xmax=Math.max(this.hcb.xstart,f),this.xdelta=this.hcb.xdelta,this.xstart=this.hcb.xstart,this.ystart=this.hcb.ystart,this.ydelta=this.hcb.ydelta,f=this.hcb.ystart+this.hcb.ydelta*
(this.lps-1),this.ymin=Math.min(this.hcb.ystart,f),this.ymax=Math.max(this.hcb.ystart,f))}1!==this.hcb.yunits&&4!==this.hcb.yunits||this.hcb.timecode||!k||(this.hcb.timecode=c.j1970toj1950(k),this.hcb.ystart=0,h=!0);0<a.length&&c.filad(this.hcb,a,g);return h},prep:function(d,f){var g=this.plot._Gx,h=this.plot._Mx,k=this.lps,l=this.xmin,D=this.xmax,w,C=this.hcb.subsize;0<g.xcompression&&(C=Math.ceil(h.r-h.l));if(this.hcb.pipe)g.panxmin>g.panxmax?(g.panxmin=l,g.panxmax=D):(g.panxmin=Math.min(g.panxmin,
l),g.panxmax=Math.max(g.panxmax,D)),g.panymin>g.panxmax?(g.panymin=this.ymin,g.panymax=this.ymax):(g.panymin=Math.min(g.panymin,this.ymin),g.panymax=Math.max(g.panymax,this.ymax)),this.img||(g.zmin===x&&(g.zmin=0),g.zmax===x&&(g.zmax=0),this.img=a.create_image(h,null,this.hcb.subsize,C,this.lps,g.zmin,g.zmax,g.xcompression));else{this.get_data(d,f);if(!(5===g.cmode||0<this.xsub)&&0<k){var A=this.xstart,u=this.xdelta,z=k;g.index?(w=0,k-=1):0<=u?(w=Math.max(1,Math.min(z,Math.round((d-A)/u)))-1,k=Math.max(1,
Math.min(z,Math.round((f-A)/u)+2))-1):(w=Math.max(1,Math.min(z,Math.round((f-A)/u)-1))-1,k=Math.max(1,Math.min(z,Math.round((d-A)/u)+2))-1);k=k-w+1;0>k&&(c.log.debug("Nothing to plot"),k=0)}g.panxmin>g.panxmax?(g.panxmin=l,g.panxmax=D):(g.panxmin=Math.min(g.panxmin,l),g.panxmax=Math.max(g.panxmax,D));if(0>=k){c.log.debug("Nothing to plot");return}!(5===g.cmode||0<this.ysub)&&0<k&&(l=this.ystart,D=this.ydelta,z=k,g.index?(w=0,k-=1):0<=D?(w=Math.max(1,Math.min(z,Math.round((d-l)/D)))-1,k=Math.max(1,
Math.min(z,Math.round((f-l)/D)+2))-1):(w=Math.max(1,Math.min(z,Math.round((f-l)/D)-1))-1,k=Math.max(1,Math.min(z,Math.round((d-l)/D)+2))-1),k=k-w+1,0>k&&(c.log.debug("Nothing to plot"),k=0));g.panymin>g.panxmax?(g.panymin=this.ymin,g.panymax=this.ymax):(g.panymin=Math.min(g.panymin,this.ymin),g.panymax=Math.max(g.panymax,this.ymax));this.cx?1===g.cmode?c.cvmag(this.buf,this.zbuf,this.zbuf.length):2===g.cmode?25===g.plab?(c.cvpha(this.buf,this.zbuf,this.zbuf.length),c.vsmul(this.zbuf,1/(2*Math.PI),
this.zbuf,this.zbuf.length)):24!==g.plab?c.cvpha(this.buf,this.zbuf,this.zbuf.length):c.cvphad(this.buf,this.zbuf,this.zbuf.length):3===g.cmode?c.vmov(this.buf,this.skip,this.zbuf,1,this.zbuf.length):4===g.cmode?c.vmov(this.buf.subarray(1),this.skip,this.zbuf,1,this.zbuf.length):5===g.cmode?c.vfill(this.zbuf,0,this.zbuf.length):6===g.cmode?c.cvmag2logscale(this.buf,g.dbmin,10,this.zbuf):7===g.cmode&&c.cvmag2logscale(this.buf,g.dbmin,20,this.zbuf):1===g.cmode?c.vabs(this.buf,this.zbuf):2===g.cmode?
c.vfill(this.zbuf,0,this.zbuf.length):3===g.cmode?c.vmov(this.buf,this.skip,this.zbuf,1,this.zbuf.length):4===g.cmode?c.vfill(this.zbuf,0,this.zbuf.length):5===g.cmode?c.vfill(this.zbuf,0,this.zbuf.length):6===g.cmode?c.vlogscale(this.buf,g.dbmin,10,this.zbuf):7===g.cmode&&c.vlogscale(this.buf,g.dbmin,20,this.zbuf);z=this.zbuf;D=l=0;if(0>=g.autol||this.hcb.pipe){if(0<z.length)for(l=z[0],D=z[0],w=0;w<z.length&&!(w/this.xframe>=this.lpb);w++)z[w]<l&&(l=z[w]),z[w]>D&&(D=z[w]);0!==(g.autoz&1)&&(g.zmin=
g.zmin!==x?Math.min(g.zmin,l):l);0!==(g.autoz&2)&&(g.zmax=g.zmax!==x?Math.min(g.zmax,D):D);this.img=a.create_image(h,this.zbuf,this.hcb.subsize,C,this.lps,g.zmin,g.zmax,g.xcompression)}else if(A=this.hcb.size,u=1/Math.max(g.autol,1),this.img||(this.img=a.create_image(h,this.zbuf,this.hcb.subsize,C,this.lps,g.zmin,g.zmax)),g.zmin=0,g.zmax=0,0<z.length)for(var J=0;J<A;J++){var Q=J*this.xframe,l=z[Q],D=z[Q];for(w=0;w<this.xframe;w++)l=Math.min(z[Q+w],l),D=Math.max(z[Q+w],D);2!==g.autoz&&l!==x&&(g.zmin=
l*u+g.zmin*(1-u));1!==g.autoz&&D!==x&&(g.zmax=D*u+g.zmax*(1-u));a.update_image_row(h,this.img,z.subarray(Q,Q+this.xframe),J,g.zmin,g.zmax)}}this.img.cmode=g.cmode;this.img.cmap=g.cmap;this.img.origin=h.origin;if(this.hcb.pipe&&this.frame<this.lps)if(g=new Uint32Array(this.img),"rising"===this.drawmode)for(w=0;w<g.length-this.frame*C;w++)g[w]=0;else for(w=this.frame*C;w<g.length;w++)g[w]=0;return k},draw:function(){var c=this.plot._Mx,d=this.plot._Gx,g=this.hcb;if(this.hcb.pipe){var h=this.hcb.lps||
Math.ceil(Math.max(1,c.b-c.t));h!==this.lps&&this.buf&&(this.lps=h,this.position>=this.lps&&(this.position=0),h=g.ystart+g.ydelta*(this.lps-1),this.ymin=Math.min(g.ystart,h),this.ymax=Math.max(g.ystart,h),this.img=null,this.plot.rescale())}var h=Math.max(this.xmin,c.stk[c.level].xmin),k=Math.min(this.xmax,c.stk[c.level].xmax);if(h>=k)d.panxmin=Math.min(d.panxmin,this.xmin),d.panxmax=Math.max(d.panxmax,this.xmax);else{var l=Math.max(this.ymin,c.stk[c.level].ymin),x=Math.min(this.ymax,c.stk[c.level].ymax),
w=Math.abs(k-h)+1,C=Math.abs(x-l)+1,w=Math.floor(w/g.xdelta),C=Math.floor(C/g.ydelta),w=Math.min(w,g.subsize),C=Math.min(C,g.size),g=a.real_to_pixel(c,h,l),x=a.real_to_pixel(c,k,x),C=(x.y-g.y)/C;d.xe=Math.max(1,Math.round((x.x-g.x)/w));d.ye=Math.max(1,Math.round(C));this.img&&d.cmode===this.img.cmode&&d.cmap===this.img.cmap&&c.origin===this.img.origin||this.prep(h,k);this.img&&a.draw_image(c,this.img,this.xmin,this.ymin,this.xmax,this.ymax,this.opacity,d.rasterSmoothing);null!==this.position&&"scrolling"===
this.drawmode&&(d=a.real_to_pixel(c,0,this.position*this.ydelta),d.y>c.t&&d.y<c.b&&a.draw_line(c,"white",c.l,d.y,c.r,d.y))}}};d.Layer2D.overlay=function(a,f,g){var h=a._Gx;f.buf_type="D";var k=new d.Layer2D(a);k.init(f);k.name=f.file_name?c.trim_name(f.file_name):"layer_"+h.lyr.length;k.change_settings(g);a.add_layer(k)}})(window.sigplot=window.sigplot||{},mx,m);window.sigplot=window.sigplot||{};
(function(d,a,c){function x(){this.yptr=this.xptr=void 0;this.xmax=this.xmin=this.panymax=this.panymin=this.panxmax=this.panxmin=this.xdelta=this.xstart=this.arety=this.aretx=this.ymrk=this.xmrk=this.rety=this.retx=0;this.xmult=void 0;this.ymax=this.ymin=0;this.zmax=this.zmin=this.ymult=void 0;this.pmt=this.pyscl=this.pxscl=this.dbmin=0;this.format=this.note="";this.modsource=this.modlayer=this.pthk=this.pyl=this.py2=this.py1=this.px2=this.px1=this.pb=this.pt=this.pr=this.pl=0;this.modified=!1;this.ydiv=
this.xdiv=this.modmode=0;this.cross=this.expand=this.all=!1;this.grid=!0;this.gridBackground=void 0;this.index=!1;this.legend=this.specs=this.pan=!0;this.xdata=!1;this.show_readout=this.show_y_axis=this.show_x_axis=!0;this.autohide_panbars=this.autohide_readout=this.hide_note=!1;this.panning=void 0;this.panmode=0;this.hold=!1;this.isec=this.nsec=this.iysec=this.sections=0;this.ylabel=this.ylab=this.xlabel=this.xlab=void 0;this.xcompression=0;this.default_rubberbox_action="zoom";this.default_rubberbox_mode=
"box";this.wheelscroll_mode_natural=!0;this.scroll_time_interval=10;this.stillPanning=this.repeatPanning=void 0;this.autol=-1;this.wheelZoom=this.rasterSmoothing=this.lineSmoothing=!1;this.wheelZoomPercent=0.2;this.inContinuousZoom=!1;this.lyr=[];this.HCB=[];this.plugins=[];this.plotData=document.createElement("canvas");this.plotData.valid=!1}function p(e,d){var f=e._Gx,q=e._Mx;if(Array.isArray(d)){var g={name:"Custom",colors:d};"Custom"===c.Mc.colormap[c.Mc.colormap.length-1].name?c.Mc.colormap[c.Mc.colormap.length-
1].colors=d:c.Mc.colormap.push(g);f.cmap=c.Mc.colormap.length-1}else if("string"===typeof d)for(f.cmap=-1,g=0;g<c.Mc.colormap.length;g++){if(c.Mc.colormap[g].name===d){f.cmap=g;break}}else f.cmap=d;0>f.ncolors&&(f.ncolors*=-1,f.cmap=Math.max(1,f.cmap));if(0>f.cmap||f.cmap>c.Mc.colormap.length)f.cmap=2===f.cmode?2:1;a.colormap(q,c.Mc.colormap[f.cmap].colors,f.ncolors)}function f(c,e){var d=c._Mx;a.removeEventListener(d,"mousedown",c.onmousedown,!1);a.menu(d,{title:"SCROLLBAR",refresh:function(){c.refresh()},
finalize:function(){a.addEventListener(d,"mousedown",c.onmousedown,!1);c.refresh()},items:[{text:"Expand Range",handler:function(){n(c,a.SB_EXPAND,e)}},{text:"Shrink Range",handler:function(){n(c,a.SB_SHRINK,e)}},{text:"Expand Full",handler:function(){n(c,a.SB_FULL,e)}}]})}function g(e){var d=e._Gx,f=e._Mx;a.removeEventListener(f,"mousedown",e.onmousedown,!1);for(var q={text:"Cntrls...",menu:{title:"CONTROLS OPTIONS",items:[{text:"Continuous (Disabled)",checked:-2===d.cntrls,handler:function(){e.change_settings({xcnt:-2})}},
{text:"LM Click (Disabled)",checked:-1===d.cntrls,handler:function(){e.change_settings({xcnt:-1})}},{text:"Off",checked:0===d.cntrls,handler:function(){e.change_settings({xcnt:0})}},{text:"LM Click",checked:1===d.cntrls,handler:function(){e.change_settings({xcnt:1})}},{text:"Continuous",checked:2===d.cntrls,handler:function(){e.change_settings({xcnt:2})}}]}},g={text:"CX Mode...",menu:{title:"COMPLEX MODE",items:[{text:"Magnitude",checked:1===d.cmode,handler:function(){e.change_settings({cmode:1})}},
{text:"Phase",checked:2===d.cmode,handler:function(){e.change_settings({cmode:2})}},{text:"Real",checked:3===d.cmode,handler:function(){e.change_settings({cmode:3})}},{text:"Imaginary",checked:4===d.cmode,handler:function(){e.change_settings({cmode:4})}},{text:"IR: Imag/Real",checked:5===d.cmode,handler:function(){e.change_settings({cmode:5})}},{text:"10*Log10",checked:6===d.cmode,handler:function(){e.change_settings({cmode:6})}},{text:"20*Log10",checked:7===d.cmode,handler:function(){e.change_settings({cmode:7})}}]}},
h={text:"Scaling...",menu:{title:"SCALING",items:[{text:"Y Axis",style:"separator"},{text:"Parameters...",checked:0===d.autoy,handler:function(){d.autoy=0;U(e,"Y Axis Min:",a.floatValidator,function(a){parseFloat(a)!==f.stk[f.level].ymin?(""===a&&(a=0),R(e,parseFloat(a),f.stk[f.level].ymax,"Y")):e.refresh()},f.stk[f.level].ymin,void 0,void 0,function(){U(e,"Y Axis Max:",a.floatValidator,function(a){parseFloat(a)!==f.stk[f.level].ymax?(""===a&&(a=0),R(e,f.stk[f.level].ymin,parseFloat(a),"Y")):e.refresh()},
f.stk[f.level].ymax,void 0,void 0,void 0)})}},{text:"Min Auto",checked:1===d.autoy,handler:function(){d.autoy=1}},{text:"Max Auto",checked:2===d.autoy,handler:function(){d.autoy=2}},{text:"Full Auto",checked:3===d.autoy,handler:function(){d.autoy=3}},{text:"X Axis",style:"separator"},{text:"Parameters...",checked:0===d.autox,handler:function(){d.autox=0;U(e,"X Axis Min:",a.floatValidator,function(a){parseFloat(a)!==f.stk[f.level].xmin?(""===a&&(a=0),R(e,parseFloat(a),f.stk[f.level].xmax,"X")):e.refresh()},
f.stk[f.level].xmin,void 0,void 0,function(){U(e,"X Axis Max:",a.floatValidator,function(a){parseFloat(a)!==f.stk[f.level].xmax?(""===a&&(a=0),R(e,f.stk[f.level].xmin,parseFloat(a),"X")):e.refresh()},f.stk[f.level].xmax,void 0,void 0,void 0)})}},{text:"Min Auto",checked:1===d.autox,handler:function(){d.autox=1}},{text:"Max Auto",checked:2===d.autox,handler:function(){d.autox=2}},{text:"Full Auto",checked:3===d.autox,handler:function(){d.autox=3}},{text:"Z Axis",style:"separator"},{text:"Parameters...",
checked:0===d.autoz,handler:function(){d.autoz=0;U(e,"Z Axis Min:",a.floatValidator,function(a){parseFloat(a)!==d.zmin&&(""===a&&(a=0),e.change_settings({zmin:a}))},d.zmin,void 0,void 0,function(){U(e,"Z Axis Max:",a.floatValidator,function(a){parseFloat(a)!==d.zmax&&(""===a&&(a=0),e.change_settings({zmax:a}))},d.zmax,void 0,void 0,void 0)})}},{text:"Min Auto",checked:1===d.autoz,handler:function(){e.change_settings({autoz:1})}},{text:"Max Auto",checked:2===d.autoz,handler:function(){e.change_settings({autoz:2})}},
{text:"Full Auto",checked:3===d.autoz,handler:function(){e.change_settings({autoz:3})}}]}},l={text:"Settings...",menu:{title:"SETTINGS",items:[{text:"ALL Mode",checked:d.all,style:"checkbox",handler:function(){e.change_settings({all:!d.all})}},{text:"Controls...",menu:{title:"CONTROLS OPTIONS",items:[{text:"Continuous (Disabled)",checked:-2===d.cntrls,handler:function(){e.change_settings({xcnt:-2})}},{text:"LM Click (Disabled)",checked:-1===d.cntrls,handler:function(){e.change_settings({xcnt:-1})}},
{text:"Off",checked:0===d.cntrls,handler:function(){e.change_settings({xcnt:0})}},{text:"LM Click",checked:1===d.cntrls,handler:function(){e.change_settings({xcnt:1})}},{text:"Continuous",checked:2===d.cntrls,handler:function(){e.change_settings({xcnt:2})}}]}},{text:"Mouse...",menu:{title:"MOUSE OPTIONS",items:[{text:"LM Drag (Zoom)",checked:"zoom"===d.default_rubberbox_action,handler:function(){d.default_rubberbox_action="zoom"}},{text:"LM Drag (Select)",checked:"select"===d.default_rubberbox_action,
handler:function(){d.default_rubberbox_action="select"}},{text:"LM Drag (Disabled)",checked:null===d.default_rubberbox_action,handler:function(){d.default_rubberbox_action=null}},{text:"RM Drag (Zoom)",checked:"zoom"===d.default_rightclick_rubberbox_action,handler:function(){d.default_rightclick_rubberbox_action="zoom"}},{text:"RM Drag (Select)",checked:"select"===d.default_rightclick_rubberbox_action,handler:function(){d.default_rightclick_rubberbox_action="select"}},{text:"RM Drag (Disabled)",checked:null===
d.default_rightclick_rubberbox_action,handler:function(){d.default_rightclick_rubberbox_action=null}},{text:"Mode...",menu:{title:"MOUSE Mode",items:[{text:"Box",checked:"box"===d.default_rubberbox_mode,handler:function(){d.default_rubberbox_mode="box"}},{text:"Horizontal",checked:"horizontal"===d.default_rubberbox_mode,handler:function(){d.default_rubberbox_mode="horizontal"}},{text:"Vertical",checked:"vertical"===d.default_rubberbox_mode,handler:function(){d.default_rubberbox_mode="vertical"}}]}},
{text:"CROSShairs...",menu:{title:"Crosshairs Mode",items:[{text:"Off",checked:!d.cross,handler:function(){d.cross=!1}},{text:"On",checked:!0===d.cross,handler:function(){d.cross=!0}},{text:"Horizontal",checked:"horizontal"===d.cross,handler:function(){d.cross="horizontal"}},{text:"Vertical",checked:"vertical"===d.cross,handler:function(){d.cross="vertical"}}]}},{text:"Mousewheel Natural Mode",checked:d.wheelscroll_mode_natural,style:"checkbox",handler:function(){e.change_settings({wheelscroll_mode_natural:!d.wheelscroll_mode_natural})}}]}},
{text:"CROSShairs",checked:d.cross,style:"checkbox",handler:function(){e.change_settings({cross:!d.cross})}},{text:"GRID",checked:d.grid,style:"checkbox",handler:function(){e.change_settings({grid:!d.grid})}},{text:"INDEX Mode",checked:d.index,style:"checkbox",handler:function(){e.change_settings({index:!d.index})}},{text:"LEGEND",checked:d.legend,style:"checkbox",handler:function(){e.change_settings({legend:!d.legend})}},{text:"PAN Scrollbars",checked:d.pan,style:"checkbox",handler:function(){e.change_settings({pan:!d.pan})}},
{text:"PHase UNITS...",menu:{title:"PHASE UNITS",items:[{text:"Radians",checked:23===d.plab,handler:function(){e.change_settings({phunits:"R"})}},{text:"Degrees",checked:24===d.plab,handler:function(){e.change_settings({phunits:"D"})}},{text:"Cycles",checked:25===d.plab,handler:function(){e.change_settings({phunits:"C"})}}]}},{text:"SPECS",checked:d.specs,style:"checkbox",handler:function(){e.change_settings({specs:!d.specs})}},{text:"XDIVisions...",handler:function(){U(e,"X Divisions:",function(e){var d=
a.intValidator(e),r=c.trunc(f.width/2);return d.valid&&e>r?{valid:!1,reason:"Exceeds maximum number of divisions ("+r+")."}:d},function(a){parseFloat(a)!==d.xdiv&&(""===a&&(a=1),d.xdiv=parseFloat(a));e.refresh()},d.xdiv,void 0,void 0,void 0)}},{text:"XLABel...",handler:function(){U(e,"X Units:",function(c){console.log("The value is "+c);return a.intValidator(c)},function(a){parseFloat(a)!==d.xlab&&(0>a&&(a=0),d.xlab=parseFloat(a));e.refresh()},d.xlab,void 0,void 0,void 0)}},{text:"YDIVisions...",
handler:function(){U(e,"Y Divisions:",function(e){var d=a.intValidator(e),r=c.trunc(f.height/2);return d.valid&&e>r?{valid:!1,reason:"Exceeds maximum number of divisions ("+r+")."}:d},function(a){parseFloat(a)!==d.ydiv&&(""===a&&(a=1),d.ydiv=parseFloat(a));e.refresh()},d.ydiv,void 0,void 0,void 0)}},{text:"YINVersion",checked:4===f.origin,style:"checkbox",handler:function(){e.change_settings({yinv:4!==f.origin})}},{text:"YLABel...",handler:function(){U(e,"Y Units:",function(c){return a.intValidator(c)},
function(a){parseFloat(a)!==d.ylab&&(0>a&&(a=0),d.ylab=parseFloat(a));e.refresh()},d.ylab,void 0,void 0,void 0)}},{text:"X-axis",checked:d.show_x_axis,style:"checkbox",handler:function(){e.change_settings({show_x_axis:!d.show_x_axis})}},{text:"Y-axis",checked:d.show_y_axis,style:"checkbox",handler:function(){e.change_settings({show_y_axis:!d.show_y_axis})}},{text:"Readout",checked:d.show_readout,style:"checkbox",handler:function(){e.change_settings({show_readout:!d.show_readout})}},{text:"Invert Colors",
checked:f.xi,style:"checkbox",handler:function(){a.invertbgfg(f)}}]}},k={text:"Colormap...",menu:{title:"COLORMAP",items:[]}},p=function(a){e.change_settings({cmap:this.cmap})},s=0;s<c.Mc.colormap.length;s++)k.menu.items.push({text:c.Mc.colormap[s].name,cmap:s,checked:d.cmap===s,handler:p});var u=function(c){return{title:"TRACE OPTIONS",items:[{text:"Dashed...",handler:function(){var q=1;if(void 0!==c)q=Math.abs(e._Gx.lyr[c].thick);else{if(0===d.lyr.length)return;for(var q=Math.abs(e._Gx.lyr[0].thick),
f=0;f<d.lyr.length;f++)if(q!==Math.abs(e._Gx.lyr[f].thick)){q=1;break}}U(e,"Line thickness:",a.intValidator,function(a){if(void 0!==c)e._Gx.lyr[c].line=3,e._Gx.lyr[c].thick=-1*a,e._Gx.lyr[c].symbol=0;else for(var c=0;c<d.lyr.length;c++)e._Gx.lyr[c].line=3,e._Gx.lyr[c].thick=-1*a,e._Gx.lyr[c].symbol=0},q)}},{text:"Dots...",handler:function(){var q=3;if(void 0!==c)q=Math.abs(e._Gx.lyr[c].radius);else{if(0===d.lyr.length)return;for(var f=0;f<d.lyr.length;f++)if(q!==Math.abs(e._Gx.lyr[f].radius)){q=3;
break}}U(e,"Radius/Shape:",a.intValidator,function(a){var q;0>a?(q=3,a=Math.abs(a)):0<a?q=2:(q=1,a=0);if(void 0!==c)e._Gx.lyr[c].line=0,e._Gx.lyr[c].radius=a,e._Gx.lyr[c].symbol=q;else for(var f=0;f<d.lyr.length;f++)e._Gx.lyr[f].line=0,e._Gx.lyr[f].radius=a,e._Gx.lyr[f].symbol=q},q)}},{text:"Solid...",handler:function(){var q=1;if(void 0!==c)q=Math.abs(e._Gx.lyr[c].thick);else{if(0===d.lyr.length)return;for(var q=Math.abs(e._Gx.lyr[0].thick),f=0;f<d.lyr.length;f++)if(q!==Math.abs(e._Gx.lyr[f].thick)){q=
1;break}}U(e,"Line thickness:",a.intValidator,function(a){if(void 0!==c)e._Gx.lyr[c].line=3,e._Gx.lyr[c].thick=a,e._Gx.lyr[c].symbol=0;else for(var q=0;q<d.lyr.length;q++)e._Gx.lyr[q].line=3,e._Gx.lyr[q].thick=a,e._Gx.lyr[q].symbol=0},q)}},{text:"Toggle",style:void 0!==c?"checkbox":void 0,checked:void 0!==c?e._Gx.lyr[c].display:void 0,handler:function(){if(void 0!==c)e._Gx.lyr[c].display=!e._Gx.lyr[c].display;else for(var a=0;a<d.lyr.length;a++)e._Gx.lyr[a].display=!e._Gx.lyr[a].display}},{text:"Symbols...",
menu:{title:"SYMBOLS",items:[{text:"Retain Current"},{text:"None",checked:void 0!==c?0===e._Gx.lyr[c].symbol:void 0,handler:function(){if(void 0!==c)e._Gx.lyr[c].radius=0,e._Gx.lyr[c].symbol=0;else for(var a=0;a<d.lyr.length;a++)e._Gx.lyr[a].radius=0,e._Gx.lyr[a].symbol=0}},{text:"Pixels",checked:void 0!==c?1===e._Gx.lyr[c].symbol:void 0,handler:function(){if(void 0!==c)e._Gx.lyr[c].radius=1,e._Gx.lyr[c].symbol=1;else for(var a=0;a<d.lyr.length;a++)e._Gx.lyr[a].radius=1,e._Gx.lyr[a].symbol=1}},{text:"Circles",
checked:void 0!==c?2===e._Gx.lyr[c].symbol:void 0,handler:function(){if(void 0!==c)e._Gx.lyr[c].radius=4,e._Gx.lyr[c].symbol=2;else for(var a=0;a<d.lyr.length;a++)e._Gx.lyr[a].radius=4,e._Gx.lyr[a].symbol=2}},{text:"Squares",checked:void 0!==c?3===e._Gx.lyr[c].symbol:void 0,handler:function(){if(void 0!==c)e._Gx.lyr[c].radius=4,e._Gx.lyr[c].symbol=3;else for(var a=0;a<d.lyr.length;a++)e._Gx.lyr[a].radius=4,e._Gx.lyr[a].symbol=3}},{text:"Plusses",checked:void 0!==c?4===e._Gx.lyr[c].symbol:void 0,handler:function(){if(void 0!==
c)e._Gx.lyr[c].radius=4,e._Gx.lyr[c].symbol=4;else for(var a=0;a<d.lyr.length;a++)e._Gx.lyr[a].radius=4,e._Gx.lyr[a].symbol=4}},{text:"X's",checked:void 0!==c?5===e._Gx.lyr[c].symbol:void 0,handler:function(){if(void 0!==c)e._Gx.lyr[c].radius=4,e._Gx.lyr[c].symbol=5;else for(var a=0;a<d.lyr.length;a++)e._Gx.lyr[a].radius=4,e._Gx.lyr[a].symbol=5}},{text:"Triangles",checked:void 0!==c?6===e._Gx.lyr[c].symbol:void 0,handler:function(){if(void 0!==c)e._Gx.lyr[c].radius=6,e._Gx.lyr[c].symbol=6;else for(var a=
0;a<d.lyr.length;a++)e._Gx.lyr[a].radius=6,e._Gx.lyr[a].symbol=6}},{text:"Downward Triangles",checked:void 0!==c?7===e._Gx.lyr[c].symbol:void 0,handler:function(){if(void 0!==c)e._Gx.lyr[c].radius=6,e._Gx.lyr[c].symbol=7;else for(var a=0;a<d.lyr.length;a++)e._Gx.lyr[a].radius=6,e._Gx.lyr[a].symbol=7}}]}},{text:"Line Type...",menu:{title:"LINE TYPE",items:[{text:"Retain Current"},{text:"None",checked:void 0!==c?0===e._Gx.lyr[c].line:void 0,handler:function(){if(void 0!==c)e._Gx.lyr[c].line=0;else for(var a=
0;a<d.lyr.length;a++)e._Gx.lyr[a].line=0}},{text:"Verticals",checked:void 0!==c?1===e._Gx.lyr[c].line:void 0,handler:function(){if(void 0!==c)e._Gx.lyr[c].line=1;else for(var a=0;a<d.lyr.length;a++)e._Gx.lyr[a].line=1}},{text:"Horizontals",checked:void 0!==c?2===e._Gx.lyr[c].line:void 0,handler:function(){if(void 0!==c)e._Gx.lyr[c].line=2;else for(var a=0;a<d.lyr.length;a++)e._Gx.lyr[a].line=2}},{text:"Connecting",checked:void 0!==c?3===e._Gx.lyr[c].line:void 0,handler:function(){if(void 0!==c)e._Gx.lyr[c].line=
3;else for(var a=0;a<d.lyr.length;a++)e._Gx.lyr[a].line=3}}]}},{text:"Thickness...",handler:function(){var q=1;void 0!==c&&(q=e._Gx.lyr[c].thick);U(e,"Thickness",a.intValidator,function(a){""===a&&(a=1);a=Math.max(0,a);if(void 0!==c)e._Gx.lyr[c].thick=a;else for(var q=0;q<d.lyr.length;q++)e._Gx.lyr[q].thick=a},q,void 0,void 0,void 0)}},{text:"Opacity...",handler:function(){var q=1;void 0!==c&&(q=e._Gx.lyr[c].opacity);U(e,"Opacity:",a.floatValidator,function(a){""===a&&(a=1);a=Math.max(0,a);a=Math.min(1,
a);if(void 0!==c)e._Gx.lyr[c].opacity=a;else for(var q=0;q<d.lyr.length;q++)e._Gx.lyr[q].opacity=a},q,void 0,void 0,void 0)}}]}},p={text:"Plugins...",menu:{title:"PLUGINS",items:function(){for(var a=[],c=0;c<d.plugins.length;c++){var e=d.plugins[c];e.impl.menu&&("function"===typeof e.impl.menu?a.push(e.impl.menu()):a.push(e.impl.menu))}return a}()}};a.menu(f,{title:"SIG-PLOT",finalize:function(){f.prompt||a.addEventListener(f,"mousedown",e.onmousedown,!1);e.refresh()},items:[{text:"Refresh"},q,g,
h,{text:"View...",menu:{title:"VIEW",items:[{text:"Reset",handler:function(){e.unzoom()}},{text:"Y Axis",style:"separator"},{text:"Expand Range",handler:function(){n(e,a.SB_EXPAND,"YPAN")}},{text:"Shrink Range",handler:function(){n(e,a.SB_SHRINK,"YPAN")}},{text:"Expand Full",handler:function(){n(e,a.SB_FULL,"YPAN")}},{text:"X Axis",style:"separator"},{text:"Expand Range",handler:function(){n(e,a.SB_EXPAND,"XPAN")}},{text:"Shrink Range",handler:function(){n(e,a.SB_SHRINK,"XPAN")}},{text:"Expand Full",
handler:function(){n(e,a.SB_FULL,"XPAN")}}]}},{text:"Grid",handler:function(){e.change_settings({grid:!d.grid})}},l,k,{text:"Traces...",menu:function(){var a=e._Gx,c={title:"TRACE",items:[]};c.items.push({text:"All",menu:u()});for(var d=0;d<a.lyr.length;d++)c.items.push({text:a.lyr[d].name,menu:u(d)});return c}},{text:"Files...",menu:{title:"FILES OPTIONS",items:[{text:"Deoverlay File...",menu:function(){var a=e._Gx,c={title:"DEOVERLAY",items:[]};c.items.push({text:"Deoverlay All",handler:function(){e.deoverlay()}});
for(var d=0;d<a.lyr.length;d++){var q=function(a){return function(){e.deoverlay(a)}}(d);c.items.push({text:a.lyr[d].name,handler:q})}return c}}]}},p,{text:"Keypress Info",handler:function(){a.message(f,T)}},{text:"Save as...",menu:{title:"SAVE AS",items:[{text:"PNG",handler:function(){var a=e._Mx.active_canvas.toDataURL("image/png"),c=document.createElement("a");c.href=a;c.download="SigPlot."+(new Date).getTime()+".png";c.display="none";document.body.appendChild(c);c.click();document.body.removeChild(c)}},
{text:"JPG",handler:function(){var a=e._Mx.active_canvas.toDataURL("image/jpg"),c=document.createElement("a");c.href=a;c.download="SigPlot."+(new Date).getTime()+".jpg";c.display="none";document.body.appendChild(c);c.click();document.body.removeChild(c)}},{text:"SVG",handler:function(){var a=e._Mx.active_canvas.toDataURL("image/svg"),c=document.createElement("a");c.href=a;c.download="SigPlot."+(new Date).getTime()+".svg";c.display="none";document.body.appendChild(c);c.click();document.body.removeChild(c)}}]}},
{text:"Exit",handler:function(){var c=document.createEvent("Event");c.initEvent("sigplotexit",!0,!0);a.dispatchEvent(f,c)}}]})}function h(c,d){return function(f,q,g,h,l,k,n){var p=c._Mx,s=Math.min(q,h),u=Math.min(g,l),v=Math.abs(h-q),w=Math.abs(l-g),x=!1;f.which===d&&(x="horizontal"===n?2<v:"vertical"===n?2<w:2<v&&2<w);x?void 0===k||"zoom"===k?(c.pixel_zoom(q,g,h,l),c.refresh()):"select"===k&&(q=document.createEvent("Event"),q.initEvent("mtag",!0,!0),g=e(c,s,u),h=e(c,s+v,u+w),q.x=g.x,q.y=g.y,q.xpos=
s,q.ypos=u,q.w=Math.abs(h.x-g.x),q.h=Math.abs(h.y-g.y),q.wpxl=v,q.hpxl=w,q.shift=f.shiftKey,a.dispatchEvent(p,q)):c.mouseup(f)}}function k(e,d){var f=e._Mx,q=e._Gx;q.xmin=void 0===d.xmin?0:d.xmin;q.xmax=void 0===d.xmax?0:d.xmax;var g=void 0!==d.xmin,h=void 0!==d.xmax,k=void 0===d.cmode?"":d.cmode.toUpperCase();q.ylab=d.ylab;q.ylabel=d.ylabel;q.ymin=void 0===d.ymin?0:d.ymin;q.ymax=void 0===d.ymax?0:d.ymax;var n=void 0!==d.ymin,s=void 0!==d.ymax;q.zmin=d.zmin;q.zmax=d.zmax;var u=void 0!==d.zmin,v=void 0!==
d.zmax;void 0!==d.colors&&a.setbgfg(f,d.colors.bg,d.colors.fg,f.xi);void 0!==d.xi&&a.invertbgfg(f);q.forcelab=void 0===d.forcelab?!0:d.forcelab;q.all=void 0===d.all?!1:d.all;q.expand=void 0===d.expand?!1:d.expand;q.xlab=d.xlab;q.xlabel=d.xlabel;q.segment=void 0===d.segment?!1:d.segment;q.plab=24;var w=void 0===d.phunits?"D":d.phunits;"R"===w[0]?q.plab=23:"C"===w[0]&&(q.plab=25);q.xdiv=void 0===d.xdiv?5:d.xdiv;q.ydiv=void 0===d.ydiv?5:d.ydiv;q.xcompression=d.xcmp||0;q.rasterSmoothing=d.smoothing||
!1;f.origin=1;d.yinv&&(f.origin=4);q.pmt=void 0===d.pmt?1:d.pmt;q.bufmax=void 0===d.bufmax?32768:d.bufmax;q.sections=void 0===d.nsec?0:d.nsec;q.anno_type=void 0===d.anno_type?0:d.anno_type;q.xfmt=void 0===d.xfmt?"":d.xfmt;q.yfmt=void 0===d.yfmt?"":d.yfmt;q.index=void 0===d.index?!1:d.index;if(w=q.index||"IN"===k.slice(0,2))g&&1===q.xmin&&(g=!1),h&&1===q.xmin&&(h=!1);q.xdata=!1;q.note="";q.hold=0;q.always_show_marker=d.always_show_marker||!1;c.vstype("D");d.inputs||l(e,!1);var x=k.slice(0,2);if("IN"===
x||"AB"===x||"__"===x)x=k.slice(2,4);q.cmode=0<q.lyr.length&&q.lyr[0].cx?1:3;"MA"===x&&(q.cmode=1);"PH"===x&&(q.cmode=2);"RE"===x&&(q.cmode=3);"IM"===x&&(q.cmode=4);if("LO"===x||"D1"===x)q.cmode=6;if("L2"===x||"D2"===x)q.cmode=7;if("RI"===x||"IR"===x)q.index?alert("Imag/Real mode not permitted in INDEX mode"):q.cmode=5;q.basemode=q.cmode;e.change_settings({cmode:q.cmode});q.dbmin=1E-20;6<=q.cmode&&(k=10,7===q.cmode&&(k=20),"L"===x[0]?(0<q.lyr.length&&q.lyr[0].cx?(q.ymin=Math.max(q.ymin,1E-10),q.ymax=
Math.max(q.ymax,1E-10)):(q.ymin=Math.max(q.ymin,1E-20),q.ymax=Math.max(q.ymax,1E-20)),q.ymin=c.log10(q.ymin)*k,q.ymax=c.log10(q.ymax)*k):0<q.lyr.length&&q.lyr[0].cx?(q.ymin=Math.max(-18*k,q.ymin),q.ymax=Math.max(-18*k,q.ymax),q.dbmin=1E-37):Math.min(q.ymin,q.ymax)<-20*k&&(q.ymin=Math.max(-37*k,q.ymin),q.ymax=Math.max(-37*k,q.ymax),q.dbmin=Math.pow(10,Math.min(q.ymin,q.ymax)/k)));f.level=0;w&&!q.index&&(g&&(q.xmin=q.xstart+q.xdelta*(q.xmin-1)),g&&(q.xmax=q.xstart+q.xdelta*(q.xmax-1)));q.xmult=d.xmult;
q.ymult=d.xmult;q.autox=void 0===d.autox?-1:d.autox;0>q.autox&&(q.autox=0,g||(q.autox+=1),h||(q.autox+=2));q.autoy=void 0===d.autoy?-1:d.autoy;0>q.autoy&&(q.autoy=0,n||(q.autoy+=1),s||(q.autoy+=2));q.autoz=void 0===d.autoz?-1:d.autoz;0>q.autoz&&(q.autoz=0,u||(q.autoz+=1),v||(q.autoz+=2));q.autol=void 0===d.autol?-1:d.autol;g||(q.xmin=void 0);h||(q.xmax=void 0);V(e,{get_data:!0},q.xmin,q.xmax,q.xlab,q.ylab);g||(q.xmin=f.stk[0].xmin);h||(q.xmax=f.stk[0].xmax);n||(q.ymin=f.stk[0].ymin);s||(q.ymax=f.stk[0].ymax);
q.xmin>q.xmax&&(f.stk[0].xmin=q.xmax,q.xmax=q.xmin,q.xmin=f.stk[0].xmin);q.ymin>q.ymax&&(f.stk[0].ymin=q.ymax,q.ymax=q.ymin,q.ymin=f.stk[0].ymin);f.stk[0].xmin=q.xmin;f.stk[0].xmax=q.xmax;f.stk[0].ymin=q.ymin;f.stk[0].ymax=q.ymax;q.panxmin=Math.min(q.panxmin,q.xmin);q.panxmax=Math.max(q.panxmax,q.xmax);q.panymin=Math.min(q.panymin,q.ymin);q.panymax=Math.max(q.panymax,q.ymax);q.xmin=f.stk[0].xmin;q.ymin=f.stk[0].ymin;d.font_family&&(f.font_family=d.font_family);a.set_font(f,Math.min(7,f.width/64));
q.ncolors=void 0===d.ncolors?16:d.ncolors;q.cmap=null;q.cmap=d.cmap?d.cmap:void 0===d.xc?-1:d.xc;p(e,q.cmap);q.cntrls="leftmouse"===d.xcnt?1:"continuous"===d.xcnt?2:void 0===d.xcnt?1:d.xcnt;q.default_rubberbox_mode=void 0===d.rubberbox_mode?"box":d.rubberbox_mode;q.default_rubberbox_action=void 0===d.rubberbox_action?"zoom":d.rubberbox_action;q.default_rightclick_rubberbox_mode=void 0===d.rightclick_rubberbox_mode?"box":d.rightclick_rubberbox_mode;q.default_rightclick_rubberbox_action=void 0===d.rightclick_rubberbox_action?
null:d.rightclick_rubberbox_action;q.cross=void 0===d.cross?!1:d.cross;q.grid=void 0===d.nogrid?!0:!d.nogrid;q.fillStyle=d.fillStyle;q.gridBackground=d.gridBackground;q.gridStyle=d.gridStyle;q.wheelZoom=d.wheelZoom;q.wheelZoomPercent=d.wheelZoomPercent;q.legend=void 0===d.legend?!1:d.legend;q.no_legend_button=void 0===d.no_legend_button?!1:d.no_legend_button;q.legendBtnLocation=null;q.pan=void 0===d.nopan?!0:!d.nopan;q.nomenu=void 0===d.nomenu?!1:d.nomenu;q.modmode=0;q.modlayer=-1;q.modsource=0;q.modified=
d.mod&&0<q.lyr.length;q.nmark=0;q.iabsc=0;q.index&&(q.iabsc=1);q.specs=!d.nospecs;q.scroll_time_interval=void 0===d.scroll_time_interval?q.scroll_time_interval:d.scroll_time_interval;q.autohide_readout=d.autohide_readout;q.autohide_panbars=d.autohide_panbars;q.x_scrollbar_location=d.x_scrollbar_location;q.specs?(q.show_x_axis=!d.noxaxis,q.show_y_axis=!d.noyaxis,q.show_readout=!d.noreadout,q.specs=q.show_x_axis||q.show_y_axis||q.show_readout?!0:!1):(q.show_x_axis=!1,q.show_y_axis=!1,q.show_readout=
!1);q.hide_note=d.hide_note||!1;q.xmrk=0;q.ymrk=0;d.nodragdrop||(a.addEventListener(f,"dragover",function(a){a.preventDefault()},!1),a.addEventListener(f,"drop",function(a){return function(c){var e=c.dataTransfer.files;0<e.length&&(c.preventDefault(),a.load_files(e))}}(e),!1))}function l(a,c){var e=a._Gx,d=a._Mx;if(c){var f=e.HCB[0];e.xstart=f.xstart;e.xdelta=f.xdelta}else e.xstart=0,e.xdelta=1,e.autol=-1;d.origin=1}function D(a){for(var c=a._Gx,e=a._Mx.canvas.getContext("2d"),d,f=0;f<c.plugins.length;)c.plugins[f].impl.refresh&&
(d=c.plugins[f].canvas,d.width!==a._Mx.canvas.width&&(d.width=a._Mx.canvas.width),d.height!==a._Mx.canvas.height&&(d.height=a._Mx.canvas.height),0!==d.height&&0!==d.width&&(d.width!==a._Mx.canvas.width&&(d.width=a._Mx.canvas.width),d.height!==a._Mx.canvas.height&&(d.height=a._Mx.canvas.height),d.getContext("2d").clearRect(0,0,d.width,d.height),c.plugins[f].impl.refresh(d),e.drawImage(d,0,0))),f+=1}function w(a){a=a._Gx;if(0===a.HCB.length)a.note="";else if(void 0===a.HCB[0].plotnote){for(var c=[],
e=0;e<a.HCB.length;e++)a.HCB[e].file_name&&c.push(a.HCB[e].file_name);a.note=c.join("|").toUpperCase()}}function C(c,e){var d=c._Mx,q=c._Gx;if(!(e>=q.lyr.length)&&q.lyr[e].display&&0===q.hold){q.lyr[e].draw();var f=document.createEvent("Event");f.initEvent("lyrdraw",!0,!0);f.index=e;f.name=q.lyr[e].name;f.layer=q.lyr[e];a.dispatchEvent(d,f)}}function A(c){var e=c._Gx;c=c._Mx;e.cross&&(("vertical"===e.cross||!0===e.cross)&&c.xpos>=c.l&&c.xpos<=c.r&&e.cross_xpos!==c.xpos&&(void 0!==e.cross_xpos&&a.rubberline(c,
e.cross_xpos,c.t,e.cross_xpos,c.b),a.rubberline(c,c.xpos,c.t,c.xpos,c.b),e.cross_xpos=c.xpos),("horizontal"===e.cross||!0===e.cross)&&c.ypos>=c.t&&c.ypos<=c.b&&e.cross_ypos!==c.ypos&&(void 0!==e.cross_ypos&&a.rubberline(c,c.l,e.cross_ypos,c.r,e.cross_ypos),a.rubberline(c,c.l,c.ypos,c.r,c.ypos),e.cross_ypos=c.ypos))}function u(c){var e=c._Gx;c=c._Mx;if(null!==e.xmrk&&null!==e.ymrk){var d=a.real_to_pixel(c,e.xmrk,e.ymrk);if(!d.clipped){var f=c.active_canvas.getContext("2d");f.beginPath();f.strokeStyle=
c.xwfg;f.fillStyle=c.xwfg;f.arc(d.x,d.y,2,0,360);f.stroke();f.textBaseline="alphabetic";f.textAlign="left";f.fillStyle=c.fg;f.font=c.font.font;var g="x:"+a.format_g(e.xmrk,6,3,!0);f.fillText(g,d.x+5,d.y-5);g="y:"+a.format_g(e.ymrk,6,3,!0);f.fillText(g,d.x+5,d.y-5+c.text_h)}}}function z(a,c){var e=a._Mx,d=a._Gx;d.xdata=!1;for(var f=0;f<d.lyr.length;f++)d.lyr[f].xdata=5===c?!0:!1,d.lyr[f].xdata&&(d.xdata=!0);if(c!==d.cmode)if(5===c&&d.index)alert("Imag/Real mode not permitted in INDEX mode");else if(0>=
d.lyr.length)d.cmode=c,F(a);else if(0<c){f=d.cmode;d.cmode=c;var g=d.autox,h=d.autoy;d.autox=3;d.autoy=3;if(5===c||5===f)d.panxmin=1,d.panxmax=-1,d.panymin=1,d.panymax=-1,e.level=0,c===d.basemode?(e.stk[0].xmin=d.xmin,e.stk[0].xmax=d.xmax,e.stk[0].ymin=d.ymin,e.stk[0].ymax=d.ymax):5===c||5===d.basemode?V(a,{get_data:!0}):(e.stk[0].xmin=d.xmin,e.stk[0].xmax=d.xmax,V(a,{get_data:!0},d.xmin,d.xmax));else for(c===d.basemode?(d.panymin=1,d.panymax=-1,e.stk[0].ymin=d.ymin,e.stk[0].ymax=d.ymax):V(a,{},e.stk[e.level].xmin,
e.stk[e.level].xmax),f=1;f<=e.level;f++)e.stk[f].ymin=e.stk[0].ymin,e.stk[f].ymax=e.stk[0].ymax;d.autox=g;d.autoy=h;a.refresh()}}function J(c){var e,d=c._Mx,f=c._Gx;if(f.pan&&!d.widget){e=d.level;var g={ps:d.stk[e].ymin,pe:d.stk[e].ymax},h=g.ps!==f.panymin||g.pe!==f.panymax,h=h&&0<d.level;!f.autohide_panbars||h&&c.mouseOnCanvas||f.panning?(a.scrollbar(d,0,f.pyl,f.pyl+f.pthk,d.t,d.b,g,f.panymin,f.panymax,void 0,d.scrollbar_y),d.stk[e].ymin=g.ps,d.stk[e].ymax=g.pe):(g=d.canvas.getContext("2d"),g.fillStyle=
d.bg,g.fillRect(f.pyl,d.t,f.pyl+f.pthk,d.b-d.t));f.pl<d.width&&(g={ps:d.stk[e].xmin,pe:d.stk[e].xmax},h=(h=g.ps!==f.panxmin||g.pe!==f.panxmax)&&(!f.all||0<d.level),!f.autohide_panbars||h&&c.mouseOnCanvas||f.panning?(a.scrollbar(d,0,f.pl,f.pr,f.pt,f.pt+f.pthk,g,f.panxmin,f.panxmax,void 0,d.scrollbar_x),d.stk[e].xmin=g.ps,d.stk[e].xmax=g.pe):(g=d.canvas.getContext("2d"),g.fillStyle=d.bg,g.fillRect(f.pl,f.pt-1,f.pr-f.pl,f.pthk+4)))}}function Q(c,e,d,f){var g=c._Mx,h=c._Gx,l,k,n,p;p=new a.SCROLLBAR;k=
new a.SCROLLBAR;var s=!1;l=g.level;0<h.panmode?(p.flag=11,k.flag=11):(p.flag=-12,k.flag=-12);0===d&&(p.action=0,k.action=0);if("Y"===e.substring(0,1)){if(p=g.stk[l].ymin,d=g.stk[l].ymax,n=d-p,"YPAN"===e?(e=g.scrollbar_y,d={ps:p,pe:d},a.scrollbar(g,k,h.pyl,h.pyl+h.pthk,g.t,g.b,d,h.panymin,h.panymax,f,e),p=d.ps,d=d.pe,0!==k.action&&a.scroll(g,k,a.XW_UPDATE,void 0,e)):"YCENTER"===e&&(p-=n*(g.ypos-(g.t+g.b)/2)/(g.b-g.t),d=p+n),p!==g.stk[l].ymin||d!==g.stk[l].ymax)g.stk[l].ymin=p,g.stk[l].ymax=d,h.cmode===
h.basemode&&1===g.level&&(h.ymin=Math.min(h.ymin,p),h.ymax=Math.max(h.ymax,d)),this.inPan=!0,f=document.createEvent("Event"),f.initEvent("ypan",!0,!0),f.level=g.level,f.xmin=g.stk[g.level].xmin,f.ymin=g.stk[g.level].ymin,f.xmax=g.stk[g.level].xmax,f.ymax=g.stk[g.level].ymax,a.dispatchEvent(g,f),this.inPan=!1,c.refresh(),s=!0}else if(k=g.stk[l].xmin,d=g.stk[l].xmax,n=d-k,"XPAN"===e?(e=g.scrollbar_x,d={ps:k,pe:d},a.scrollbar(g,p,h.pl,h.pr,h.pt,h.pt+h.pthk,d,h.panxmin,h.panxmax,f,e),k=d.ps,d=d.pe,0!==
p.action&&a.scroll(g,p,a.XW_UPDATE,void 0,e)):"XCENTER"===e&&(k+=n*(g.xpos-(g.l+g.r)/2)/(g.r-g.l),k!==g.stk[l].xmin&&(d=k+n)),g.stk[l].xmin!==k||g.stk[l].xmax!==d)g.stk[l].xmin=k,g.stk[l].xmax=d,h.xdata||1!==g.level||(h.xmin=g.stk[1].xmin,h.xmax=g.stk[1].xmax),this.inPan=!0,f=document.createEvent("Event"),f.initEvent("xpan",!0,!0),f.level=g.level,f.xmin=g.stk[g.level].xmin,f.ymin=g.stk[g.level].ymin,f.xmax=g.stk[g.level].xmax,f.ymax=g.stk[g.level].ymax,a.dispatchEvent(g,f),this.inPan=!1,c.refresh(),
s=!0;return s}function S(c,d,e){var f=c._Mx,g=c._Gx,h,k,l;if("XPAN"===d)l=c._Mx.scrollbar_x;else if("YPAN"===d)l=c._Mx.scrollbar_y;else throw"Unable to drag scrollbar - scrollAction is not 'XPAN' or 'YPAN'!!";l.flag=-12;k=f.level;"XPAN"===d?(h=f.stk[k].xmin,k=f.stk[k].xmax):"YPAN"===d?(h=f.stk[k].ymin,k=f.stk[k].ymax):k=h=void 0;var n=l;n.action=a.SB_DRAG;if("YPAN"===d){var p=f.scrollbar_y.trange/f.scrollbar_y.h;4===n.origin&&(p*=-1);e=e.screenY-g.panning.ypos;e*=p;g.panning.ymin-e<g.panymin?(k=g.panymin+
(k-h),h=g.panymin):g.panning.ymax-e>g.panymax?(h=g.panymax-(k-h),k=g.panymax):(h=g.panning.ymin-e,k=g.panning.ymax-e)}else"XPAN"===d&&(p=f.scrollbar_x.trange/f.scrollbar_x.w,3===n.origin&&(p*=-1),e=e.screenX-g.panning.xpos,e*=p,g.panning.xmin+e<g.panxmin?(k=g.panxmin+(k-h),h=g.panxmin):g.panning.xmax+e>g.panxmax?(h=g.panxmax-(k-h),k=g.panxmax):(h=g.panning.xmin+e,k=g.panning.xmax+e));l.smin=h;l.srange=k-h;a.redrawScrollbar(l,f,void 0);R(c,l.smin,l.smin+l.srange,d.slice(0,1));this.inPan=!0;g=document.createEvent("Event");
"XPAN"===d?g.initEvent("xpan",!0,!0):"YPAN"===d&&g.initEvent("ypan",!0,!0);g.level=f.level;g.xmin=f.stk[f.level].xmin;g.ymin=f.stk[f.level].ymin;g.xmax=f.stk[f.level].xmax;g.ymax=f.stk[f.level].ymax;a.dispatchEvent(f,g);this.inPan=!1;l.action=0;c.refresh()}function U(c,e,d,f,g,h,k,l){var n=c._Mx;if(n.prompt)throw"Prompt already exists! Can only have one prompt at a time!";a.disableListeners(n);c.disable_listeners();var p=function(c,e){return function(d){e(d);a.enableListeners(n);c.enable_listeners();
c.refresh();void 0!==l&&l()}},s=function(){c.refresh()};try{a.prompt(n,e,d,p(c,f),s,g,h,k,5E3)}catch(u){console.log("ERROR: Failed to set up prompt due to: "+u)}}function F(d){var f=d._Mx,g=d._Gx,q=f.canvas.getContext("2d");0===g.sections&&(g.isec=0);if(f.warpbox){var h=e(d,f.warpbox.xo,f.warpbox.yo),k=e(d,f.warpbox.xl,f.warpbox.yl);g.aretx=h.x;g.arety=h.y;g.dretx=k.x-h.x;g.drety=k.y-h.y}else g.aretx=g.retx,g.arety=g.rety,g.dretx=g.retx-g.xmrk,g.drety=g.rety-g.ymrk;5===g.cmode&&1===g.iabsc&&(g.iabsc=
2);1===g.iabsc?(g.aretx=Math.round((g.aretx-g.xstart)/g.xdelta),g.index||(g.aretx+=1),g.dretx=Math.round(g.dretx/g.xdelta)):2===g.iabsc&&(0!==g.aretx&&(g.aretx=1/g.aretx),0!==g.arety&&(g.arety=1/g.arety),0!==g.dretx&&(g.dretx=1/g.dretx),0!==g.drety&&(g.drety=1/g.drety));if(g.show_readout&&!f.widget&&(q.fillStyle=f.bg,k=Math.floor(f.height-2.5*f.text_h),q.fillRect(f.text_w,k-1,49*f.text_w,k+1.5*f.text_h),k=Math.floor(f.height-0.5*f.text_h),h=Math.max(g.pr+f.text_w,f.width-2*f.text_w),q.fillStyle=f.bg,
q.fillRect(h,k-f.text_h,f.text_w,f.text_h),!g.autohide_readout||d.mouseOnCanvas||g.panning)){var l;0===g.iabsc&&4===g.ylab?(k=(c.sec2tspec(g.arety)+"                ").substring(0,16),l=(c.sec2tspec(g.drety,"delta")+"                ").substring(0,16)):(k=a.format_g(g.arety,16,9,!0),l=a.format_g(g.drety,16,9));0===g.iabsc&&4===g.xlab?(d=(c.sec2tspec(g.aretx)+"                ").substring(0,16),q=(c.sec2tspec(g.dretx,"delta")+"                ").substring(0,16)):(d=a.format_g(g.aretx,16,9,!0),q=a.format_g(g.dretx,
16,9));l="y: "+k+" dy: "+l+" L="+f.level+" "+H[g.cmode-1];d="x: "+d+" dx: "+q+" "+v[g.iabsc];3===g.iabsc&&(l=0===g.dretx?l.substr(0,20)+"sl: Inf             "+l.substr(40,l.length):l.substr(0,20)+"sl: "+a.format_g(g.drety/g.dretx,16,9)+l.substr(40,l.length));k=Math.floor(f.height-1.5*f.text_h);a.text(f,f.text_w,k,l);k=Math.floor(f.height-0.5*f.text_h);a.text(f,f.text_w,k,d);a.LEGACY_RENDER&&h<f.width&&(0<g.cntrls?a.text(f,h,k,"C"):a.text(f,h,k," "));a.colorbar(f,49*f.text_w-3,f.height-2.5*f.text_h,
f.text_w,2*f.text_h)}}function V(a,c,d,e,f,g){var h=a._Mx;a=a._Gx;c=!0===c.get_data;a.panxmin=1;a.panxmax=-1;a.panymin=1;a.panymax=-1;var k=void 0===d,l=void 0===e;if(0===a.lyr.length)a.panxmin=-1,a.panxmax=1,a.panymin=-1,a.panymax=1;else for(void 0===f&&(a.xlab=a.lyr[0].xlab),void 0===g&&(a.ylab=a.lyr[0].ylab),f=0;f<a.lyr.length;f++)if(k&&(d=a.lyr[f].xmin),l&&(e=a.lyr[f].xmax),a.xlab!==a.lyr[f].xlab&&(a.xlab=0),a.ylab!==a.lyr[f].ylab&&(a.ylab=0),c&&a.lyr[f].get_data(d,e),0<a.autox||0<a.autoy)for(;d<
e;)a.lyr[f].get_data(d,e),g=a.lyr[f].prep(d,e),a.all&&a.expand?0===a.lyr[f].size?d=e:a.index?d+=g:0<=a.lyr[f].xdelta?d+=a.lyr[f].size*a.lyr[f].xdelta:e+=a.lyr[f].size*a.lyr[f].xdelta:d=e;else a.lyr[f].prep(1,-1);f=a.panxmax-a.panxmin;0>f&&(a.panxmax=a.panxmin,a.panxmin=a.panxmax+f,f=-f);1E-20>=f&&(a.panxmin-=1,a.panxmax+=1);0!==(a.autox&1)&&k&&(h.stk[0].xmin=a.panxmin);if(0!==(a.autox&2)&&l&&(h.stk[0].xmax=a.panxmax,!a.all&&!a.xdata))for(f=0;f<a.lyr.length;f++)e=Math.min(a.lyr[f].xmax,h.stk[0].xmax),
g=Math.abs((e-a.lyr[f].xmin)/a.lyr[f].xdelta)-a.bufmax+1,0<g&&(h.stk[0].xmax=e-g*Math.abs(a.lyr[f].xdelta));0!==(a.autoy&1)&&(h.stk[0].ymin=a.panymin);0!==(a.autoy&2)&&(h.stk[0].ymax=a.panymax)}function e(c,d,e){var f=c._Gx;c=a.pixel_to_real(c._Mx,d,e);f.index&&(c.x*=f.xdelta);return c}function s(a,c,d,e,f,g){return a>=d&&a<=d+f&&c>=e&&c<=e+g}function y(a,d){var e=!1,f=a._Gx,g=a._Mx,h=0,k=0;if(void 0===d){if(h=g.xpos,k=g.ypos,!a.mouseOnCanvas)return!1}else h=d.x,k=d.y;var l=" ";if(!f.pan)return!1;
var n=k<=f.pt+f.pthk+2,p=k>f.pt-2,k=k>=g.t&&k<=g.b,s=h>=f.pl&&h<=f.pr,u=f.show_readout||"bottom"===f.x_scrollbar_location;h>g.r&&k?(l="YPAN",g.xpos=f.pyl+c.trunc(f.pthk/2),e=!0):u&&s&&p?(l="XPAN",g.ypos=f.pt+c.trunc(f.pthk/2),e=!0):!u&&s&&n&&(l="XPAN",g.ypos=f.pt+c.trunc(f.pthk/2),e=!0);return{inPanRegion:e,command:l}}function G(a){var d=!1;a=a._Mx;var e=a.xpos,f=a.ypos,g=a.text_h,h=a.text_w,k=" ";e<a.l-h&&f<=a.b&&f>=a.t?(k="YCENTER",d=!0):f>a.b+c.trunc(0.5*h)&&f<=a.b+c.trunc(c.trunc(3*g)/2)&&e>=
a.l&&e<=a.r&&(k="XCENTER",d=!0);return{inCenterRegion:d,command:k}}function O(c,d){var e,f,g;d.origin&1?(g=c.x-d.x,d.origin&2&&(g=d.w-g)):(g=c.y-d.y,2>=d.origin&&(g=d.h-g));f=a.scroll_real2pix(d);e=f.s1;f=f.sw;return g>=e&&g<=e+f?!0:!1}function n(c,d,e){var f=c._Mx,g;"XPAN"===e?g=f.scrollbar_x:"YPAN"===e&&(g=f.scrollbar_y);g.action=d;g.step=0.1*g.srange;g.page=9*g.step;g.scale=2;a.scroll(f,g,a.XW_COMMAND,void 0,g);R(c,g.smin,g.smin+g.srange,e.slice(0,1));this.inPan=!0;c=document.createEvent("Event");
"XPAN"===e?c.initEvent("xpan",!0,!0):"YPAN"===e&&c.initEvent("ypan",!0,!0);c.level=f.level;c.xmin=f.stk[f.level].xmin;c.ymin=f.stk[f.level].ymin;c.xmax=f.stk[f.level].xmax;c.ymax=f.stk[f.level].ymax;a.dispatchEvent(f,c);this.inPan=!1}function R(a,c,d,e){var f=a._Mx,g=a._Gx,h=f.level;if("X"===e){if(f.stk[h].xmin!==c||f.stk[h].xmax!==d)f.stk[h].xmin=c,f.stk[h].xmax=d,g.xdata||1!==f.level||(g.xmin=f.stk[1].xmin,g.xmax=f.stk[1].xmax),a.refresh()}else"Y"!==e||c===f.stk[h].ymin&&d===f.stk[h].ymax||(f.stk[h].ymin=
c,f.stk[h].ymax=d,g.cmode===g.basemode&&1===f.level&&(g.ymin=Math.min(g.ymin,c),g.ymax=Math.max(g.ymax,d)),a.refresh())}var T="Keypress Table:\n--------------\n?    - Main help box.\nA    - Toggle display x,y readouts:\n       (absc) -> (index) -> (1/absc) -> (time).\nB    - Toggle LM Drag Mode:\n       (box) -> (horizontal) -> (vertical).\nC    - Toggle controls.\nK    - Show Marker.\nL    - Toggle legend.\nM    - Pops up main menu\nR    - Toggle display specs (x/y readout)\nS    - Toggle display specs and axes.\nT    - Popup box with timecode value at mouse.\nX    - Popup box with X value at mouse.\nY    - Popup box with Y value at mouse.\nF    - Toggle fullscreen.\n";
d.browserIsCompatible=function(){var a=document.createElement("canvas").getContext?!0:!1,c="ArrayBuffer"in window;return a&&c};navigator.userAgent.match(/(iPad|iPhone|iPod)/i)||"undefined"===typeof Float64Array||Float64Array.emulated||!Float64Array.BYTES_PER_ELEMENT?d.PointArray=Float32Array:d.PointArray=Float64Array;d.Plot=function(r,l){if(!d.browserIsCompatible())throw"Browser is not compatible";var p=this._Mx=a.open(r);this._Gx=new x;this._Gx.parent=r;this.mouseOnCanvas=!1;l||(l={});k(this,l);
this._refresh();this.onmousemove=function(c){return function(d){var f=c._Mx,g=c._Gx,h=d.target.getBoundingClientRect(),r=void 0===d.offsetX?d.pageX-h.left-window.scrollX:d.offsetX;d=void 0===d.offsetX?d.pageY-h.top-window.scrollY:d.offsetY;h=e(c,r,d);g.retx=h.x;g.rety=h.y;f.widget||(F(c),h=document.createEvent("Event"),h.initEvent("mmove",!0,!0),h.xpos=r,h.ypos=d,h.x=g.retx,h.y=g.rety,a.dispatchEvent(f,h)&&(g.cross&&(f.warpbox?(void 0!==g.cross_xpos&&a.rubberline(f,g.cross_xpos,f.t,g.cross_xpos,f.b),
void 0!==g.cross_ypos&&a.rubberline(f,f.l,g.cross_ypos,f.r,g.cross_ypos),g.cross_xpos=void 0,g.cross_ypos=void 0):c.mouseOnCanvas&&A(c)),2===g.cntrls&&(h=document.createEvent("Event"),h.initEvent("mtag",!0,!0),h.x=g.retx,h.y=g.rety,h.xpos=r,h.ypos=d,a.dispatchEvent(f,h))))}}(this);this.throttledOnMouseMove=c.throttle(this._Gx.scroll_time_interval,this.onmousemove);a.addEventListener(p,"mousemove",this.throttledOnMouseMove,!1);this.onmouseout=function(a){return function(c){c=a._Gx;var d=a._Mx;a.mouseOnCanvas&&
(a.mouseOnCanvas=!1,c.autohide_readout&&F(a),c.autohide_panbars&&J(a),d.prompt&&d.prompt.input.enableBlur())}}(this);a.addEventListener(p,"mouseout",this.onmouseout,!1);this.onmouseover=function(a){return function(c){c=a._Gx;var d=a._Mx;a.mouseOnCanvas=!0;c.autohide_panbars&&J(a);d.prompt&&d.prompt.input.disableBlur()}}(this);a.addEventListener(p,"mouseover",this.onmouseover,!1);this.onmousedown=function(c){return function(d){d.preventDefault();var e=c._Mx,r=c._Gx;e.widget&&"ONESHOT"===e.widget.type&&
(e.widget=null,c.refresh());a.ifevent(e,d);var k=document.createEvent("Event");k.initEvent("mdown",!0,!0);k.xpos=e.xpos;k.ypos=e.ypos;k.x=r.retx;k.y=r.rety;k.which=d.which;if(!a.dispatchEvent(e,k))return!1;var l=y(c);if(l.inPanRegion){if(d.preventDefault()," "!==l.command){var t=null,k=null;"XPAN"===l.command?t=e.scrollbar_x:"YPAN"===l.command&&(t=e.scrollbar_y);if(2===d.which)k={x:e.xpos,y:e.ypos},void 0!==t&&O(k,t)&&f(c,l.command);else if(" "!==l.command&&(k={x:e.xpos,y:e.ypos},!O(k,t)&&1===d.which)){Q(c,
l.command,0,d);var n=function(){O({x:e.xpos,y:e.ypos},t)?r.stillPanning&&(window.clearInterval(r.stillPanning),r.repeatPanning=void 0):Q(c,l.command,0,d)};r.stillPanning=window.setTimeout(function(){r.repeatPanning=window.setInterval(n,50)},250)}}}else if(1===d.which||3===d.which)if(k=!1,r.legendBtnLocation&&(k=s(e.xpos,e.ypos,r.legendBtnLocation.x,r.legendBtnLocation.y,r.legendBtnLocation.width,r.legendBtnLocation.height)),k)c.change_settings({legend:!r.legend});else{F(c);var k={opacity:0,return_value:"zoom"},
p={opacity:0.4,fill_color:e.hi,return_value:"select"};1===d.which?"zoom"===r.default_rubberbox_action?a.rubberbox(e,h(c,d.which),r.default_rubberbox_mode,k,p):"select"===r.default_rubberbox_action&&a.rubberbox(e,h(c,d.which),r.default_rubberbox_mode,p,k):3===d.which&&("zoom"===r.default_rightclick_rubberbox_action?a.rubberbox(e,h(c,d.which),r.default_rightclick_rubberbox_mode,k,p):"select"===r.default_rightclick_rubberbox_action&&a.rubberbox(e,h(c,d.which),r.default_rightclick_rubberbox_mode,p,k))}else 2===
d.which&&(r.nomenu||g(c));return!1}}(this);a.addEventListener(p,"mousedown",this.onmousedown,!1);this.ontouchstart=function(d){return function(e){e.preventDefault();if(1===e.targetTouches.length)if(p.touchClear&&p.touches)window.clearTimeout(p.touchClear),d.unzoom(),n(d,a.SB_FULL,"XPAN"),n(d,a.SB_FULL,"YPAN");else{var f=e.targetTouches[0],g=f.target.getBoundingClientRect(),f={x:f.pageX-g.left-window.scrollX,y:f.pageY-g.top-window.scrollY};p.xpos=c.bound(f.x,0,p.width);p.ypos=c.bound(f.y,0,p.height);
y(d,f).inPanRegion||(p.touches=e.targetTouches)}else 2===e.targetTouches.length&&(p.touch_distance=c.touch_distance(e.targetTouches[0],e.targetTouches[1]))}}(this);a.addEventListener(p,"touchstart",this.ontouchstart,!1);this.ontouchmove=function(a){return function(d){var e=a._Mx,f=a._Gx,g=e.level;d.preventDefault();if(1===d.targetTouches.length){var h=e.touches[0].target.getBoundingClientRect();d=d.targetTouches[0];h=d.target.getBoundingClientRect();d={x:d.pageX-h.left-window.scrollX,y:d.pageY-h.top-
window.scrollY};var r=c.bound(d.x,0,e.width),k=c.bound(d.y,0,e.height),l=r-e.xpos,h=k-e.ypos;e.xpos=r;e.ypos=k;y(a,d).inPanRegion||(d=e.stk[g].xscl*l,k=e.stk[g].yscl*h,1===e.origin?d*=-1:2===e.origin?k*=-1:3===e.origin?k*=-1:4===e.origin&&(d*=-1,k*=-1),h=e.stk[g].xmin+d,d=e.stk[g].xmax+d,r=e.stk[g].ymin+k,k=e.stk[g].ymax+k,h>=f.xmin&&d<=f.xmax&&(e.stk[g].xmin=h,e.stk[g].xmax=d),r>=f.ymin&&k<=f.ymax&&(e.stk[g].ymin=r,e.stk[g].ymax=k),f.cmode===f.basemode&&1===e.level&&(f.xmin=Math.min(f.xmin,h),f.xmax=
Math.max(f.xmax,d),f.ymin=Math.min(f.ymin,r),f.ymax=Math.max(f.ymax,k)),a.refresh())}else 2===d.targetTouches.length&&(h=c.touch_distance(d.targetTouches[0],d.targetTouches[1]),k=0.05*(1-e.touch_distance/h),d=e.stk[g].xmax-e.stk[g].xmin,l=e.stk[g].ymax-e.stk[g].ymin,h=e.stk[g].xmin+k*d,d=e.stk[g].xmax-k*d,r=e.stk[g].ymin+k*l,k=e.stk[g].ymax-k*l,e.stk[g].xmin=Math.max(f.xmin,h),e.stk[g].xmax=Math.min(f.xmax,d),e.stk[g].ymin=Math.max(f.ymin,r),e.stk[g].ymax=Math.min(f.ymax,k),a.refresh())}}(this);this.throttledOnTouchMove=
c.throttle(this._Gx.scroll_time_interval,this.ontouchmove);a.addEventListener(p,"touchmove",this.throttledOnTouchMove,!1);this.ontouchend=function(c){return function(d){var e=c._Gx,f=c._Mx;d.preventDefault();console.log("on touch end ",d.targetTouches.length);e.panning=void 0;c._Mx.scrollbar_x.action=0;c._Mx.scrollbar_y.action=0;f.touch_distance=void 0;a.widget_callback(f,d);f.touchClear=window.setTimeout(function(){f.touches=void 0;f.touchClear=void 0},100)}}(this);a.addEventListener(p,"touchend",
this.ontouchend,!1);this.docMouseUp=function(a){return function(c){var d=a._Gx;1===c.which&&(d.panning=void 0,a._Mx.scrollbar_x.action=0,a._Mx.scrollbar_y.action=0);d.stillPanning&&(window.clearTimeout(d.stillPanning),d.stillPanning=void 0);d.repeatPanning&&(window.clearInterval(d.repeatPanning),d.repeatPanning=void 0);return!1}}(this);document.addEventListener("mouseup",this.docMouseUp,!1);this.mouseup=function(c){return function(d){d.preventDefault();var e=c._Gx,f=c._Mx;a.ifevent(c._Mx,d);var g=
document.createEvent("Event");g.initEvent("mup",!0,!0);g.xpos=f.xpos;g.ypos=f.ypos;g.x=e.retx;g.y=e.rety;g.which=d.which;if((g=a.dispatchEvent(f,g))&&!(f.warpbox||f.widget||f.prompt))if(1===d.which)g=G(c),g.inCenterRegion?" "!==g.command&&Q(c,g.command,0,d):1===e.cntrls&&(e.xmrk=e.retx,e.ymrk=e.rety,g=document.createEvent("Event"),g.initEvent("mtag",!0,!0),g.x=e.xmrk,g.y=e.ymrk,g.xpos=d.x||d.clientX,g.ypos=d.y||d.clientY,g.w=void 0,g.h=void 0,g.shift=d.shiftKey,a.dispatchEvent(f,g),(e.always_show_marker||
e.show_marker)&&c.redraw());else if(2===d.which){if(e.nomenu&&(g=document.createEvent("Event"),g.initEvent("showmenu",!0,!0),g.x=d.x||d.clientX,g.y=d.y||d.clientY,g=a.dispatchEvent(f,g))){d.stopPropagation&&d.stopPropagation();d.cancelBubble=!0;a.removeEventListener(f,"mousedown",c.onmousedown,!1);var h=function(){try{var d=document.createEvent("Event");d.initEvent("hidemenu",!0,!0);a.dispatchEvent(f,d)&&a.addEventListener(f,"mousedown",c.onmousedown,!1)}finally{document.removeEventListener("mouseup",
h,!1)}};document.addEventListener("mouseup",h,!1)}}else 3===d.which&&(d.preventDefault(),c.unzoom(1),c.refresh())}}(this);a.addEventListener(p,"mouseup",this.mouseup,!1);this.mouseclick=function(c){return function(d){d.preventDefault();var e=c._Gx,f=c._Mx;a.ifevent(c._Mx,d);var g=document.createEvent("Event");g.initEvent("mclick",!0,!0);g.xpos=f.xpos;g.ypos=f.ypos;g.x=e.retx;g.y=e.rety;g.which=d.which;a.dispatchEvent(f,g);return!1}}(this);a.addEventListener(p,"click",this.mouseclick,!1);this.mousedblclick=
function(c){return function(d){d.preventDefault();var e=c._Gx,f=c._Mx;a.ifevent(c._Mx,d);var g=document.createEvent("Event");g.initEvent("mdblclick",!0,!0);g.xpos=f.xpos;g.ypos=f.ypos;g.x=e.retx;g.y=e.rety;g.which=d.which;a.dispatchEvent(f,g);return!1}}(this);a.addEventListener(p,"dblclick",this.mousedblclick,!1);this.dragMouseDownHandler=function(a){return function(c){var d=a._Mx,e=a._Gx,f=y(a);if(f.inPanRegion&&(c.preventDefault()," "!==f.command)){var g;"XPAN"===f.command?g=d.scrollbar_x:"YPAN"===
f.command&&(g=d.scrollbar_y);var h={x:d.xpos,y:d.ypos};void 0!==g&&O(h,g)&&1===c.which&&(e.panning={axis:f.command,xpos:c.screenX,ypos:c.screenY,xmin:d.stk[d.level].xmin,xmax:d.stk[d.level].xmax,ymin:d.stk[d.level].ymin,ymax:d.stk[d.level].ymax})}}}(this);window.addEventListener("mousedown",this.dragMouseDownHandler,!1);this.dragMouseMoveHandler=function(a){return function(c){var d=a._Gx;if(void 0!==d.panning)try{S(a,d.panning.axis,c)}catch(e){console.log("Error: "+e)}}}(this);this.throttledDragOnMouseMove=
c.throttle(this._Gx.scroll_time_interval,this.dragMouseMoveHandler);window.addEventListener("mousemove",this.throttledDragOnMouseMove,!1);this.dragMouseUpHandler=function(a){return function(c){var d=a._Gx;1===c.which&&(d.panning=void 0)}}(this);window.addEventListener("mouseup",this.dragMouseUpHandler,!1);this.onresize=function(c){return function(d){a.checkresize(c._Mx)&&c.refresh()}}(this);this.wheelHandler=function(d){var e=d._Mx,f=d._Gx,g=c.throttle(100,function(c){var g;"XPAN"===c.command?g=e.scrollbar_x:
"YPAN"===c.command&&(g=e.scrollbar_y);g.action=f.wheelscroll_mode_natural?0>event.deltaY?a.SB_WHEELDOWN:a.SB_WHEELUP:0>event.deltaY?a.SB_WHEELUP:a.SB_WHEELDOWN;g.step=0.1*g.srange;g.page=9*g.step;a.scroll(e,g,a.XW_COMMAND,void 0,g);R(d,g.smin,g.smin+g.srange,c.command.slice(0,1))}),h=c.throttle(100,function(){var a=f.wheelZoomPercent||0.2;f.wheelscroll_mode_natural?0<event.deltaY&&(a*=-1):0>event.deltaY&&(a*=-1);"x"===f.wheelZoom?d.percent_zoom(a,1,!0):"y"===f.wheelZoom?d.percent_zoom(1,a,!0):d.percent_zoom(a,
a,!0)});return function(c){a.ifevent(e,c);var r=y(d);d.mouseOnCanvas&&(c.preventDefault(),r.inPanRegion?g(r):f.wheelZoom&&h())}}(this);window.addWheelListener(window,this.wheelHandler,!1);window.addEventListener("resize",this.onresize,!1);l.nokeypress||(this.onkeypress=function(d){return function(e){var f=d._Mx,h=d._Gx;if(d.mouseOnCanvas&&(!f.widget||"MENU"!==f.widget.type))if(f.widget&&"ONESHOT"===f.widget.type)f.widget=null,d.refresh();else{var r=getKeyCode(e),k=document.createEvent("Event");k.initEvent("plotkeypress",
!0,!0);k.keyCode=r;k.shiftKey=e.shiftKey;k.ctrlKey=e.ctrlKey;k.altKey=e.altKey;k.metaKey=e.metaKey;if(k=a.dispatchEvent(f,k))97===r?(h.iabsc=(h.iabsc+1)%4,F(d)):108===r?d.change_settings({legend:!h.legend}):103===r?d.change_settings({grid:!h.grid}):98===r||2===r?f.warpbox&&(f.warpbox.mode="box"===f.warpbox.mode?"horizontal":"horizontal"===f.warpbox.mode?"vertical":"box",a.redraw_warpbox(f)):99===r?d.change_settings({xcnt:-1*h.cntrls}):114===r?d.change_settings({show_readout:!h.show_readout}):115===
r?d.change_settings({specs:!h.specs}):120===r?(e=d._Gx,f=d._Mx,h=e.aretx.toString(),1===e.iabsc?a.message(f,"INDEX = "+h):2===e.iabsc?a.message(f,"1/X = "+h):a.message(f,"X = "+h)):121===r?(e=d._Gx,f=d._Mx,h=e.arety.toString(),2===e.iabsc?a.message(f,"1/Y = "+h):a.message(f,"Y = "+h)):122===r?(e=d._Gx,f=d._Mx,e.zmin&&e.zmax&&(h="",h=1===e.lyr.length?"Z = "+e.lyr[0].get_z(e.retx,e.rety).toString():"TODO",a.message(f,h))):116===r?(e=d._Gx,f=d._Mx,0<e.lyr.length&&(h=e.lyr[0].hcb,1!==h["class"]||1!==
h.xunits&&4!==h.xunits?2!==h["class"]||1!==h.yunits&&4!==h.yunits?a.message(f,"Time = UNK"):a.message(f,"Time = "+c.sec2tod(h.timecode+e.rety),!0):a.message(f,"Time = "+c.sec2tod(h.timecode+e.retx),!0))):109===r?h.nomenu||(k=document.createEvent("Event"),k.initEvent("showmenu",!0,!0),k.x=f.x,k.y=f.y,(k=a.dispatchEvent(f,k))&&g(d)):63===r?a.message(f,"To zoom, press and drag the left mouse (LM) over the region of interest and release. To unzoom, press right mouse (RM).  Press the middle mouse (MM) button or press the by selecting 'Keypress Info' from the main menu."):
102===r?(a.fullscreen(f),d.refresh()):9===r&&e.ctrlKey?d.change_settings({invert:null}):107===r&&(h.show_marker=!h.show_marker,d.redraw())}}}(this),setKeypressHandler(this.onkeypress));return this};d.Plot.prototype={add_plugin:function(a,c){void 0===c&&(c=Number.MAX_VALUE);if(0>=c)throw"Invalid plugin zorder";a.init(this);var d=document.createElement("canvas");d.width=this._Mx.canvas.width;d.height=this._Mx.canvas.height;this._Gx.plugins.push({impl:a,zorder:c,canvas:d});this._Gx.plugins.sort(function(a,
c){return a.zorder-c.zorder});this.refresh()},remove_plugin:function(a){for(var c=this._Gx.plugins.length;c--;)this._Gx.plugins[c].impl===a&&(a.dispose&&a.dispose(),this._Gx.plugins[c].canvas.parentNode&&this._Gx.plugins[c].canvas.parentNode.removeElement(this._Gx.plugins[c].canvas),this._Gx.plugins.splice(c,1));this._Gx.plugins.sort(function(a,c){return a.zorder-c.zorder});this.refresh()},addListener:function(c,d){a.addEventListener(this._Mx,c,d,!1)},removeListener:function(c,d){a.removeEventListener(this._Mx,
c,d,!1)},change_settings:function(c){for(var d=this._Gx,e=this._Mx,f=0;f<d.lyr.length;f++)d.lyr[f].change_settings(c);void 0!==c.grid&&(d.grid=null===c.grid?!d.grid:c.grid);void 0!==c.gridBackground&&(d.gridBackground=c.gridBackground);void 0!==c.gridStyle&&(d.gridStyle=c.gridStyle);void 0!==c.wheelZoom&&(d.wheelZoom=c.wheelZoom);void 0!==c.wheelZoomPercent&&(d.wheelZoomPercent=c.wheelZoomPercent);void 0!==c.autol&&(d.autol=c.autol);void 0!==c.index&&c.index!==d.index&&(d.index=null===c.index?!d.index:
c.index,d.index&&1!==d.iabsc?d.iabsc=1:d.index||1!==d.iabsc||(d.iabsc=0),V(this,{get_data:!1},void 0,void 0),this.unzoom());void 0!==c.all&&(d.all=null===c.all?!d.all:c.all);void 0!==c.show_x_axis&&(d.show_x_axis=null===c.show_x_axis?!d.show_x_axis:c.show_x_axis,d.specs=d.show_x_axis||d.show_y_axis||d.show_readout);void 0!==c.show_y_axis&&(d.show_y_axis=null===c.show_y_axis?!d.show_y_axis:c.show_y_axis,d.specs=d.show_x_axis||d.show_y_axis||d.show_readout);void 0!==c.show_readout&&(d.show_readout=
null===c.show_readout?!d.show_readout:c.show_readout,d.specs=d.show_x_axis||d.show_y_axis||d.show_readout);void 0!==c.specs&&(d.specs=null===c.specs?!d.specs:c.specs,d.specs?(d.show_x_axis=!0,d.show_y_axis=!0,d.show_readout=!0):(d.show_x_axis=!1,d.show_y_axis=!1,d.show_readout=!1));void 0!==c.xcnt&&(d.cntrls="leftmouse"===c.xcnt?1:"continuous"===c.xcnt?2:"disable"===c.xcnt&&0<d.cntrls?-1*d.cntrls:"enable"===c.xcnt&&0>d.cntrls?-1*d.cntrls:c.xcnt);void 0!==c.legend&&(d.legend=null===c.legend?!d.legend:
c.legend);void 0!==c.pan&&(d.pan=null===c.pan?!d.pan:c.pan);void 0!==c.cross&&(d.cross=null===c.cross?!d.cross:c.cross,d.cross?(d.cross_xpos=void 0,d.cross_ypos=void 0,!e.warpbox&&this.mouseOnCanvas&&A(this)):(void 0!==d.cross_xpos&&a.rubberline(e,d.cross_xpos,e.t,d.cross_xpos,e.b),void 0!==d.cross_ypos&&a.rubberline(e,e.l,d.cross_ypos,e.r,d.cross_ypos),d.cross_xpos=void 0,d.cross_ypos=void 0));void 0!==c.cmode&&z(this,c.cmode);if(void 0!==c.phunits){var g=c.phunits,f=this._Gx,h=this._Mx,k=f.plab;
"R"===g?k=23:"D"===g&&(k=24);"C"===g&&(k=25);if(k!==f.plab&&(g=[Math.PI,180,0.5],g=g[k-23]/g[f.plab-23],f.plab=k,2===f.cmode)){for(k=0;k<=h.level;k++)h.stk[k].ymin*=g,h.stk[k].ymax*=g,h.stk[k].yscl*=g;f.panymin*=g;f.panymax*=g;this.refresh()}}void 0!==c.rubberbox_action&&(d.default_rubberbox_action=c.rubberbox_action);void 0!==c.rubberbox_mode&&(d.default_rubberbox_mode=c.rubberbox_mode);void 0!==c.rightclick_rubberbox_action&&(d.default_rightclick_rubberbox_action=c.rightclick_rubberbox_action);
void 0!==c.rightclick_rubberbox_mode&&(d.default_rightclick_rubberbox_mode=c.rightclick_rubberbox_mode);void 0!==c.wheelscroll_mode_natural&&(d.wheelscroll_mode_natural=c.wheelscroll_mode_natural);void 0!==c.colors&&(c.colors.fg||(c.colors.fg=e.fg),c.colors.bg||(c.colors.bg=e.bg),a.setbgfg(e,c.colors.bg,c.colors.fg,e.xi));void 0!==c.cmap&&(d.cmap=null===c.cmap?2===d.cmode?2:1:c.cmap,p(this,d.cmap));void 0!==c.yinv&&(e.origin=c.yinv?4:1);void 0!==c.rasterSmoothing&&(d.rasterSmoothing=null===c.rasterSmoothing?
!d.rasterSmoothing:c.rasterSmoothing);void 0!==c.fillStyle&&(d.fillStyle=c.fillStyle);void 0!==c.invert&&(null===c.invert?a.invertbgfg(e):!0===c.invert?a.setbgfg(this,"white","black"):a.setbgfg(this,"black","white"));void 0!==c.nomenu&&(d.nomenu=null===c.nomenu?!d.nomenu:c.nomenu);void 0!==c.ymax&&(null===c.ymax?(d.autoy|=2,d.panymax=void 0,V(this,{}),d.ymax=d.panymax):(d.autoy&=13,d.ymax=c.ymax,R(this,e.stk[0].ymin,c.ymax,"Y")));void 0!==c.ymin&&(null===c.ymin?(d.autoy|=1,d.panymin=void 0,V(this,
{}),d.ymin=d.panymin):(d.autoy&=14,d.ymin=c.ymin,R(this,c.ymin,e.stk[0].ymax,"Y")));void 0!==c.autoy&&(d.autoy=c.autoy,0!==(d.autoy&1)&&(d.ymin=void 0),0!==(d.autoy&2)&&(d.ymax=void 0));void 0!==c.xmin&&(R(this,c.xmin,e.stk[0].xmax,"X"),d.autox&=2);void 0!==c.xmax&&(R(this,e.stk[0].xmin,c.xmax,"X"),d.autox&=1);void 0!==c.zmin&&(d.zmin=c.zmin,d.autoz&=2);void 0!==c.zmax&&(d.zmax=c.zmax,d.autoz&=1);void 0!==c.autoz&&(d.autoz=c.autoz,0!==(d.autoz&1)&&(d.zmin=void 0),0!==(d.autoz&2)&&(d.zmax=void 0));
void 0!==c.note&&(d.note=c.note);this.refresh();void 0!==c.pan&&F(this)},reread:function(){for(var c=this._Gx,d=[],e=0;e<c.lyr.length;e++)d[e]=c.lyr[e];e=c.HCB.slice();this.deoverlay();for(var f=0;f<e.length;f++)this.overlay_bluefile(e[f]);for(e=0;e<c.lyr.length;e++)c.lyr[e].symbol=d[e].symbol,c.lyr[e].radius=d[e].radius;this.refresh();c=document.createEvent("Event");c.initEvent("reread",!0,!0);a.dispatchEvent(this._Mx,c)},cleanup:function(){},reload:function(a,c,d,e){var f=this._Mx,g=this._Gx;0>
a||a>=g.lyr.length||void 0===g.lyr[a].reload||(a=g.lyr[a].reload(c,d),0===f.level&&V(this,{get_data:!1},a.xmin,a.xmax),e?this._refresh():this.refresh())},rescale:function(){0===this._Mx.level&&V(this,{get_data:!1},void 0,void 0);this.refresh()},push:function(a,c,d,e,f){var g=this._Mx,h=this._Gx;if(!(0>a||a>=h.lyr.length)&&void 0!==h.lyr[a].push){var k=d;d&&(k=JSON.parse(JSON.stringify(d)),0===c.length&&(k.xmin=g.stk[a].xmin,k.xmax=g.stk[a].xmax,k.ymin=g.stk[a].ymin,k.ymax=g.stk[a].ymax));a=h.lyr[a].push(c,
k,e);0===g.level&&a&&V(this,{get_data:!1});f?this._refresh():this.refresh()}},overlay_array:function(a,d,e){c.log.debug("Overlay array");a=c.initialize(a,d);return this.overlay_bluefile(a,e)},overlay_pipe:function(a,d){c.log.debug("Overlay pipe");a||(a={});a.pipe=!0;var e=c.initialize(null,a);return this.overlay_bluefile(e,d)},overlay_websocket:function(a,d,e){c.log.debug("Overlay websocket: "+a);a=new WebSocket(a,"plot-data");a.binaryType="arraybuffer";var f=this;d||(d={});d.pipe=!0;var g=c.initialize(null,
d);g.ws=a;var h=this.overlay_bluefile(g,e);a.onopen=function(a){};a.onmessage=function(a){return function(a){a.data instanceof ArrayBuffer?(a=g.createArray(a.data),f.push(h,a)):"string"===typeof a.data&&(f._Gx.lyr[h].hcb||c.log.warning("Couldn't find header for layer "+h),a=JSON.parse(a.data),f.push(h,[],a))}}(a);return h},overlay_href:function(a,d,e){c.log.debug("Overlay href: "+a);try{this.show_spinner();var f=function(a,c){return function(d){try{if(d){var f=a.overlay_bluefile(d,e);c&&c(d,f)}else alert("Failed to load data")}finally{a.hide_spinner()}}}(this,
d);(new BlueFileReader).read_http(a,f)}catch(g){console.log(g),alert("Failed to load data"),this.hide_spinner()}},show_spinner:function(){this._Gx.spinner||(B.color=this._Mx.xwfg,this._Gx.spinner=(new Spinner(B)).spin(this._Gx.parent))},hide_spinner:function(){this._Gx.spinner&&this._Gx.spinner.stop();this._Gx.spinner=void 0},add_layer:function(c){var d=this._Gx,e=this._Mx,f=document.createEvent("Event");f.initEvent("lyradd",!0,!0);f.index=d.lyr.length;f.name=c.name;f.layer=c;a.dispatchEvent(e,f)&&
d.lyr.push(c)},get_layer:function(a){var c=this._Gx;return 0<=a&&a<c.lyr.length?c.lyr[a]:null},overlay_bluefile:function(a,e){c.log.debug("Overlay bluefile: "+a.file_name);var f=this._Mx,g=this._Gx;e=e||{};var h=0===g.HCB.length;g.HCB.push(a);1===g.HCB.length&&l(this,!0);var k=g.lyr.length;void 0===e.layerType?1===a["class"]?d.Layer1D.overlay(this,a,e):2===a["class"]&&d.Layer2D.overlay(this,a,e):"1D"===e.layerType?d.Layer1D.overlay(this,a,e):"2D"===e.layerType?d.Layer2D.overlay(this,a,e):e.layerType.overlay(this,
a,e);z(this,g.cmode);if(h||e.expand)if(0===g.HCB.length)l(this,!1);else{g.basemode=g.cmode;var n,p;0===(g.autox&1)&&(n=g.xmin);0===(g.autox&2)&&(p=g.xmin);V(this,{get_data:!0},n,p);f.level=0;0!==(g.autox&1)&&(g.xmin=f.stk[0].xmin);0!==(g.autox&2)&&(g.xmax=f.stk[0].xmax);0!==(g.autoy&1)&&(g.ymin=f.stk[0].ymin);0!==(g.autoy&2)&&(g.ymax=f.stk[0].ymax);f.resize=!0;f.origin=g.lyr[0].preferred_origin?g.lyr[0].preferred_origin:1}else for(f=k;f<g.lyr.length;f++)C(this,f);w(this);this.refresh();return g.HCB.length-
1},load_files:function(a,c){for(var d=function(a){return function(d){a.overlay_bluefile(d,c)}}(this),e=0;e<a.length;e++){var f=a[e];(new BlueFileReader).read(f,d)}},deoverlay:function(a){var c=this._Gx;if(0<c.HCB.length)if(void 0===a)for(a=c.HCB.length-1;0<=a;a--)this.remove_layer(a);else if(0>a){a=c.HCB.length+a;if(0>a)return;this.remove_layer(a)}else a<c.HCB.length&&this.remove_layer(a);0===c.lyr.length&&(l(this,!1),V(this,{}))},remove_layer:function(c){var d=this._Gx,e="",f=null;if(0<=c&&c<d.HCB.length){e=
d.HCB[c].file_name;f=d.HCB[c];for(d.HCB[c]=null;c<d.HCB.length-1;c++)d.HCB[c]=d.HCB[c+1];d.HCB.length-=1}for(c=d.lyr.length-1;0<=c;c--)if(d.lyr[c].hcb===f){var g=c,h=this._Gx,k=this._Mx,l=document.createEvent("Event");l.initEvent("lyrdel",!0,!0);l.index=g;l.name=h.lyr[g].name;l.layer=h.lyr[g];if(a.dispatchEvent(k,l)){h.lyr[g].ybufn=0;h.lyr[g].ybuf=null;if(g<h.lyr.length-1)for(;g<h.lyr.length-1;g++)h.lyr[g]=h.lyr[g+1];h.lyr.length-=1;0<h.HCB.length&&(h.panxmin=1,h.panxmax=-1,h.panymin=1,h.panymax=
-1)}}w(this);this.refresh();d=document.createEvent("Event");d.initEvent("file_deoverlayed",!0,!0);""!==e&&(d.fileName=e);a.dispatchEvent(this._Mx,d)},pixel_zoom:function(a,c,d,f,g){a=e(this,a,c);d=e(this,d,f);this.zoom(a,d,g)},percent_zoom:function(a,c,d){var e=this._Mx,f=this._Gx,g=0;1>Math.abs(a)&&(g=Math.abs(e.stk[e.level].xmax-e.stk[e.level].xmin),g=g*a/2);a=0;1>Math.abs(c)&&(a=Math.abs(e.stk[e.level].ymax-e.stk[e.level].ymin),a=a*c/2);c={x:Math.max(e.stk[e.level].xmin+g,f.panxmin),y:Math.max(e.stk[e.level].ymin+
a,f.panymin)};e={x:Math.min(e.stk[e.level].xmax-g,f.panxmax),y:Math.min(e.stk[e.level].ymax-a,f.panymax)};this.zoom(c,e,d)},zoom:function(c,d,e){var f=this._Mx,g=this._Gx;if(!(9<=f.level)){void 0===c.x&&(c.x=f.stk[f.level].xmin);void 0===c.y&&(c.y=f.stk[f.level].ymin);void 0===d.x&&(d.x=f.stk[f.level].xmax);void 0===d.y&&(d.y=f.stk[f.level].ymax);if(d.x<c.x){var h=d.x;d.x=c.x;c.x=h}d.y<c.y&&(h=d.y,d.y=c.y,c.y=h);h={};h.xscl=f.stk[f.level].xscl;h.yscl=f.stk[f.level].yscl;h.xmin=c.x;h.xmax=d.x;h.ymin=
c.y;h.ymax=d.y;g.index&&(h.xmin=Math.min(h.xmin/g.xdelta),h.xmax=Math.min(h.xmax/g.xdelta));e&&g.inContinuousZoom?f.stk[f.level]=h:(f.stk.push(h),f.level=f.stk.length-1);g.inContinuousZoom=e;this.inZoom=!0;c=document.createEvent("Event");c.initEvent("zoom",!0,!0);c.level=f.level;c.inContinuousZoom=g.inContinuousZoom;c.xmin=f.stk[f.level].xmin;c.ymin=f.stk[f.level].ymin;c.xmax=f.stk[f.level].xmax;c.ymax=f.stk[f.level].ymax;a.dispatchEvent(f,c);this.inZoom=!1;this.refresh()}},unzoom:function(c){var d=
this._Mx,e=this._Gx;if(0!==d.level){c||(c=d.stk.length);for(;0<c&&0!==d.level;)d.stk.pop(),d.level=d.stk.length-1,c-=1;0===d.level&&this.rescale();e.inContinuousZoom=!1;this.inZoom=!0;c=document.createEvent("Event");c.initEvent("unzoom",!0,!0);c.level=d.level;c.xmin=d.stk[d.level].xmin;c.ymin=d.stk[d.level].ymin;c.xmax=d.stk[d.level].xmax;c.ymax=d.stk[d.level].ymax;a.dispatchEvent(d,c);this.inZoom=!1;this.refresh()}},mimic:function(a,c){var d=this;if(!c)throw"mimic must be called with at least one event mask";
c.zoom?a.addListener("zoom",function(a){d.inZoom||d.zoom({x:a.xmin,y:a.ymin},{x:a.xmax,y:a.ymax},a.inContinuousZoom)}):c.xzoom?a.addListener("zoom",function(a){d.inZoom||d.zoom({x:a.xmin,y:void 0},{x:a.xmax,y:void 0},a.inContinuousZoom)}):c.yzoom&&a.addListener("zoom",function(a){d.inZoom||d.zoom({x:void 0,y:a.ymin},{x:void 0,y:a.ymax},a.inContinuousZoom)});c.unzoom&&a.addListener("unzoom",function(a){d.inZoom||a.level<d._Mx.level&&d.unzoom(d._Mx.level-a.level)});(c.pan||c.xpan)&&a.addListener("xpan",
function(a){d.inPan||R(d,a.xmin,a.xmax,"X")});(c.pan||c.ypan)&&a.addListener("ypan",function(a){d.inPan||R(d,a.ymin,a.ymax,"Y")})},redraw:function(){var a=this._Gx,c=this._Mx,d=c.canvas.getContext("2d");a.plotData.valid?(d.drawImage(a.plotData,c.l-1,c.t-1,c.r-c.l+2,c.b-c.t+2,c.l-1,c.t-1,c.r-c.l+2,c.b-c.t+2),D(this),a.cross_xpos=void 0,a.cross_ypos=void 0,!c.warpbox&&this.mouseOnCanvas&&A(this),(a.always_show_marker||a.show_marker)&&u(this)):this.refresh()},refresh:function(){var c=this;a.render(this._Mx,
function(){c._refresh()})},enable_listeners:function(){var c=this._Mx;a.addEventListener(c,"mousedown",this.onmousedown,!1);a.addEventListener(c,"mousemove",this.throttledOnMouseMove,!1);window.addEventListener("mouseup",c.onmouseup,!1);window.addEventListener("keydown",c.onkeydown,!1);window.addEventListener("keyup",c.onkeyup,!1);window.addEventListener("resize",this.onresize,!1);document.addEventListener("mouseup",this.docMouseUp,!1);a.addEventListener(c,"mouseup",this.mouseup,!1);window.addEventListener("mousedown",
this.dragMouseDownHandler,!1);window.addEventListener("mousemove",this.throttledDragOnMouseMove,!1);window.addEventListener("mouseup",this.dragMouseUpHandler,!1);window.addEventListener("wheel",this.wheelHandler,!1);window.addEventListener("mousewheel",this.wheelHandler,!1);window.addEventListener("DOMMouseScroll",this.wheelHandler,!1);window.addEventListener("keypress",this.onkeypress,!1)},disable_listeners:function(){var c=this._Mx;a.removeEventListener(c,"mousedown",this.onmousedown,!1);a.removeEventListener(c,
"mousemove",this.throttledOnMouseMove,!1);a.removeEventListener(c,"mouseup",this.mouseup,!1);window.removeEventListener("mouseup",c.onmouseup,!1);window.removeEventListener("keydown",c.onkeydown,!1);window.removeEventListener("keyup",c.onkeyup,!1);window.removeEventListener("resize",this.onresize,!1);document.removeEventListener("mouseup",this.docMouseUp,!1);window.removeEventListener("mousedown",this.dragMouseDownHandler,!1);window.removeEventListener("mousemove",this.throttledDragOnMouseMove,!1);
window.removeEventListener("mouseup",this.dragMouseUpHandler,!1);window.removeEventListener("wheel",this.wheelHandler,!1);window.removeEventListener("mousewheel",this.wheelHandler,!1);window.removeEventListener("DOMMouseScroll",this.wheelHandler,!1);window.removeEventListener("keypress",this.onkeypress,!1)},checkresize:function(){a.checkresize(this._Mx)&&this.refresh()},_refresh:function(){var d=this._Mx,f=this._Gx;d.canvas.getContext("2d");if(!f.hold){a.set_font(d,Math.min(8,d.width/64));f.pthk=
1.5*d.text_w;if(f.specs){var g=!1;4===f.ylab&&(g=!0);!0===f.show_y_axis?(d.l=6*d.text_w,g&&(31536E3<=Math.abs(d.stk[0].ymin)||31536E3<=Math.abs(d.stk[0].ymax))&&(d.l=11*d.text_w)):d.l=1;d.r=!0===f.pan?d.width-(f.pthk+2*d.text_w):d.width-5;f.show_readout?(d.t=2*d.text_h,d.b=f.show_x_axis?d.height-4*d.text_h:d.height-3*d.text_h):"bottom"===f.x_scrollbar_location?(d.t=2*d.text_h,d.b=f.pan?f.show_x_axis?d.height-3*d.text_h:d.height-2*d.text_h:f.show_x_axis?d.height-2*d.text_h:d.height-5):(d.t=f.pan?f.pthk+
2*d.text_w:1,d.b=f.show_x_axis?d.height-3*d.text_h/2:d.height-2);f.pl=f.show_readout?50*d.text_w:"bottom"===f.x_scrollbar_location?d.l:35*d.text_w;f.pr=Math.max(f.pl+9*d.text_w,d.r);f.pt=f.show_readout?f.show_x_axis?d.b+d.text_h+(d.height-d.b-d.text_h-f.pthk)/2:d.b+(d.height-d.b-f.pthk)/2:"bottom"===f.x_scrollbar_location?f.show_x_axis?d.b+d.text_h+(d.height-d.b-d.text_h-f.pthk)/2:d.b+(d.height-d.b-f.pthk)/2:(d.t-f.pthk)/2;f.lbtn=d.text_h+d.text_w+2}else f.pan?(d.t=f.pthk+2*d.text_w,d.r=d.width-(f.pthk+
d.text_w)):(d.t=1,d.r=d.width-2),d.b=d.height-2,d.l=1,f.pl=d.l,f.pr=d.r,f.pt=(d.t-f.pthk)/2,f.lbtn=0;f.pyl=d.r+(d.width-d.r-f.pthk)/2+1;g=d.level;d.stk[g].x1=d.l;d.stk[g].y1=d.t;d.stk[g].x2=d.r;d.stk[g].y2=d.b;d.stk[g].xscl=(d.stk[g].xmax-d.stk[g].xmin)/(d.r-d.l);d.stk[g].yscl=(d.stk[g].ymax-d.stk[g].ymin)/(d.b-d.t);g=e(this,d.xpos,d.ypos);f.retx=g.x;f.rety=g.y;if(0===f.panning||0!==f.panning)f.plotData.valid=!1,a.clear_window(d);var g=f.xlab,h=f.ylab;void 0===g&&(g=30);f.index&&(g=0);void 0===h&&
(h=0<f.lyr.length&&f.lyr[0].cx,1===f.cmode?h=28:2===f.cmode?h=f.plab:3===f.cmode&&h?h=21:4===f.cmode?h=22:5===f.cmode?(h=22,g=21):h=6===f.cmode?26:7===f.cmode?27:0);if(f.specs){if(0===f.sections){var k={grid:f.grid};2===f.panning&&(k.noxtlab=!0);f.show_x_axis||(k.noxtics=!0,k.noxtlab=!0,k.noxplab=!0);f.show_y_axis||(k.noytics=!0,k.noytlab=!0,k.noyplab=!0);!f.specs||f.show_readout||f.pan||(k.noyplab=!0,k.noxplab=!0);f.gridBackground&&(k.fillStyle=f.gridBackground);f.gridStyle&&(k.gridStyle=f.gridStyle);
f.xmult&&(k.xmult=f.xmult);f.ymult&&(k.ymult=f.ymult);4===g&&(k.xtimecode=!0);4===h&&(k.ytimecode=!0);void 0!==f.xlabel&&(k.xlabel=f.xlabel);void 0!==f.ylabel&&(k.ylabel=f.ylabel);a.drawaxis(d,f.xdiv,f.ydiv,g,h,k)}g=f.lbtn-2;f.show_readout&&f.pan&&!f.no_legend_button?(f.legend?(f.legendBtnLocation={x:d.width-f.lbtn,y:2,width:g,height:g},a.shadowbox(d,d.width-f.lbtn,2,g,g,1,-2,"L")):(f.legendBtnLocation={x:d.width-f.lbtn,y:2,width:g,height:g},a.shadowbox(d,d.width-f.lbtn,2,g,g,1,2,"L")),F(this)):f.legendBtnLocation=
null}else f.grid&&0<=f.sections&&(k={grid:!0,noaxisbox:!0,noxtics:!0,noxtlab:!0,noxplab:!0,noytics:!0,noytlab:!0,noyplab:!0},a.drawaxis(d,f.xdiv,f.ydiv,g,h,k));for(g=0;g<f.lyr.length;g++)C(this,g);g=this._Mx;h=this._Gx;h.show_readout&&!h.hide_note&&a.text(g,g.width-h.lbtn-(h.note.length+1)*g.text_w,g.text_h,h.note);J(this);if(h.legend){for(var g=this._Mx,h=this._Gx,k=g.canvas.getContext("2d"),l=0,n=0,p=0,s=0,v=0,w=0,x=0,y=l=0,z=0,s=g.text_w,x=23*s,l=(h.lyr.length+1)*g.text_h,v=g.r-x,w=g.t,n=v+2,p=
w+2,y=x-5,z=l-5,B=0,l=x=0;l<h.lyr.length;l++){var G=k.measureText(h.lyr[l].name).width;G>B&&(B=G)}98<B&&(x=B-98,y+=x,n-=x);k.strokeStyle=g.fg;k.fillStyle=g.bg;k.fillRect(n,p,y,z);k.strokeRect(n,p,y,z);for(l=0;l<h.lyr.length;l++)n=v+4*s,p=w+l*g.text_h+g.text_h,l===h.modlayer&&a.text(g,v+s-x,p+Math.floor(g.text_w/2),"**"),h.lyr[l].display&&(z=h.lyr[l].color,0<h.lyr[l].line&&(y=c.sign(Math.min(s,Math.abs(h.lyr[l].thick)),h.lyr[l].thick),0>y||y===a.L_dashed?a.draw_line(g,z,n-x,p-3,n+2*s-x,p-3,Math.abs(y),
{mode:"dashed",on:4,off:4}):a.draw_line(g,z,n-x,p-3,n+2*s-x,p-3,Math.abs(y))),0<h.lyr[l].symbol&&(y=0>h.lyr[l].radius?-c.trunc(0.6*s):Math.min(h.lyr[l].radius,c.trunc(0.6*s)),a.draw_symbol(g,z,n+s-x,p-3,h.lyr[l].symbol,y))),n+=3*s,p+=0.3*g.text_h,a.text(g,n-x,p,h.lyr[l].name)}d.r>d.l&&d.b>d.t&&(f.plotData.width=d.canvas.width,f.plotData.height=d.canvas.height,f.plotData.getContext("2d").drawImage(d.canvas,0,0),f.plotData.valid=!0);D(this);f.cross_xpos=void 0;f.cross_ypos=void 0;!d.warpbox&&this.mouseOnCanvas&&
A(this);(f.always_show_marker||f.show_marker)&&u(this)}}};var B={lines:13,length:7,width:4,radius:10,corners:1,rotate:0,color:"#FFF",speed:1,trail:60,shadow:!1,hwaccel:!1,className:"spinner",zIndex:2E9,top:"auto",left:"auto"},H="Ma Ph Re Im IR Lo L2".split(" "),v=["(absc)","(indx)","(1/ab)","(dydx)"]})(window.sigplot,window.mx,window.m);
